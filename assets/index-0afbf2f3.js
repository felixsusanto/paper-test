(function(){const mt=document.createElement("link").relList;if(mt&&mt.supports&&mt.supports("modulepreload"))return;for(const ct of document.querySelectorAll('link[rel="modulepreload"]'))wt(ct);new MutationObserver(ct=>{for(const z of ct)if(z.type==="childList")for(const Et of z.addedNodes)Et.tagName==="LINK"&&Et.rel==="modulepreload"&&wt(Et)}).observe(document,{childList:!0,subtree:!0});function T(ct){const z={};return ct.integrity&&(z.integrity=ct.integrity),ct.referrerPolicy&&(z.referrerPolicy=ct.referrerPolicy),ct.crossOrigin==="use-credentials"?z.credentials="include":ct.crossOrigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function wt(ct){if(ct.ep)return;ct.ep=!0;const z=T(ct);fetch(ct.href,z)}})();var Pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pu(dt){return dt&&dt.__esModule&&Object.prototype.hasOwnProperty.call(dt,"default")?dt.default:dt}function Pg(dt){if(dt.__esModule)return dt;var mt=dt.default;if(typeof mt=="function"){var T=function wt(){if(this instanceof wt){var ct=[null];ct.push.apply(ct,arguments);var z=Function.bind.apply(mt,ct);return new z}return mt.apply(this,arguments)};T.prototype=mt.prototype}else T={};return Object.defineProperty(T,"__esModule",{value:!0}),Object.keys(dt).forEach(function(wt){var ct=Object.getOwnPropertyDescriptor(dt,wt);Object.defineProperty(T,wt,ct.get?ct:{enumerable:!0,get:function(){return dt[wt]}})}),T}function Tg(dt){throw new Error('Could not dynamically require "'+dt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vf={exports:{}};const Og={},Eg=Object.freeze(Object.defineProperty({__proto__:null,default:Og},Symbol.toStringTag,{value:"Module"})),vu=Pg(Eg);/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(dt){(function(mt,T){mt=mt||vu;var wt=mt.window,ct=mt.document,z=new function(){var t=/^(statics|enumerable|beans|preserve)$/,n=[],r=n.slice,s=Object.create,a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,l=n.forEach||function(v,g){for(var I=0,y=this.length;I<y;I++)v.call(g,this[I],I,this)},f=function(v,g){for(var I in this)this.hasOwnProperty(I)&&v.call(g,this[I],I,this)},h=Object.assign||function(v){for(var g=1,I=arguments.length;g<I;g++){var y=arguments[g];for(var A in y)y.hasOwnProperty(A)&&(v[A]=y[A])}return v},c=function(v,g,I){if(v){var y=a(v,"length");(y&&typeof y.value=="number"?l:f).call(v,g,I=I||v)}return I};function p(v,g,I,y,A){var m={};function b(S,R){R=R||(R=a(g,S))&&(R.get?R:R.value),typeof R=="string"&&R[0]==="#"&&(R=v[R.substring(1)]||R);var F=typeof R=="function",B=R,W=A||F&&!R.base?R&&R.get?S in v:v[S]:null,N;(!A||!W)&&(F&&W&&(R.base=W),F&&y!==!1&&(N=S.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(m[N[3].toLowerCase()+N[4]]=N[2]),(!B||F||!B.get||typeof B.get!="function"||!w.isPlainObject(B))&&(B={value:B,writable:!0}),(a(v,S)||{configurable:!0}).configurable&&(B.configurable=!0,B.enumerable=I??!N),o(v,S,B))}if(g){for(var _ in g)g.hasOwnProperty(_)&&!t.test(_)&&b(_);for(var _ in m){var x=m[_],C=v["set"+x],O=v["get"+x]||C&&v["is"+x];O&&(y===!0||O.length===0)&&b(_,{get:O,set:C})}}return v}function w(){for(var v=0,g=arguments.length;v<g;v++){var I=arguments[v];I&&h(this,I)}return this}return p(w,{inject:function(v){if(v){var g=v.statics===!0?v:v.statics,I=v.beans,y=v.preserve;g!==v&&p(this.prototype,v,v.enumerable,I,y),p(this,g,null,I,y)}for(var A=1,m=arguments.length;A<m;A++)this.inject(arguments[A]);return this},extend:function(){for(var v=this,g,I,y=0,A,m=arguments.length;y<m&&!(g&&I);y++)A=arguments[y],g=g||A.initialize,I=I||A.prototype;return g=g||function(){v.apply(this,arguments)},I=g.prototype=I||s(this.prototype),o(I,"constructor",{value:g,writable:!0,configurable:!0}),p(g,this),arguments.length&&this.inject.apply(g,arguments),g.base=v,g}}).inject({enumerable:!1,initialize:w,set:w,inject:function(){for(var v=0,g=arguments.length;v<g;v++){var I=arguments[v];I&&p(this,I,I.enumerable,I.beans,I.preserve)}return this},extend:function(){var v=s(this);return v.inject.apply(v,arguments)},each:function(v,g){return c(this,v,g)},clone:function(){return new this.constructor(this)},statics:{set:h,each:c,create:s,define:o,describe:a,clone:function(v){return h(new v.constructor,v)},isPlainObject:function(v){var g=v!=null&&v.constructor;return g&&(g===Object||g===w||g.name==="Object")},pick:function(v,g){return v!==T?v:g},slice:function(v,g,I){return r.call(v,g,I)}}})};dt.exports=z,z.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+z.each(this,function(t,n){if(!/^_/.test(n)){var r=typeof t;this.push(n+": "+(r==="number"?ft.instance.number(t):r==="string"?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return z.importJSON(t,this)},exportJSON:function(t){return z.exportJSON(this,t)},toJSON:function(){return z.serialize(this)},set:function(t,n){return t&&z.filter(this,t,n,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var n=t.base.apply(this,arguments),r=n.prototype._class;return r&&!z.exports[r]&&(z.exports[r]=n),n},equals:function(t,n){if(t===n)return!0;if(t&&t.equals)return t.equals(n);if(n&&n.equals)return n.equals(t);if(t&&n&&typeof t=="object"&&typeof n=="object"){if(Array.isArray(t)&&Array.isArray(n)){var r=t.length;if(r!==n.length)return!1;for(;r--;)if(!z.equals(t[r],n[r]))return!1}else{var s=Object.keys(t),r=s.length;if(r!==Object.keys(n).length)return!1;for(;r--;){var a=s[r];if(!(n.hasOwnProperty(a)&&z.equals(t[a],n[a])))return!1}}return!0}return!1},read:function(t,n,r,s){if(this===z){var a=this.peek(t,n);return t.__index++,a}var o=this.prototype,l=o._readIndex,f=n||l&&t.__index||0,h=t.length,c=t[f];if(s=s||h-f,c instanceof this||r&&r.readNull&&c==null&&s<=1)return l&&(t.__index=f+1),c&&r&&r.clone?c.clone():c;if(c=z.create(o),l&&(c.__read=!0),c=c.initialize.apply(c,f>0||f+s<h?z.slice(t,f,f+s):t)||c,l){t.__index=f+c.__read;var p=c.__filtered;p&&(t.__filtered=p,c.__filtered=T),c.__read=T}return c},peek:function(t,n){return t[t.__index=n||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,n,r,s){for(var a=[],o,l=n||0,f=s?l+s:t.length,h=l;h<f;h++)a.push(Array.isArray(o=t[h])?this.read(o,0,r):this.read(t,h,r,1));return a},readNamed:function(t,n,r,s,a){var o=this.getNamed(t,n),l=o!==T;if(l){var f=t.__filtered;if(!f){var h=this.getSource(t);f=t.__filtered=z.create(h),f.__unfiltered=h}f[n]=T}return this.read(l?[o]:t,r,s,a)},readSupported:function(t,n){var r=this.getSource(t),s=this,a=!1;return r&&Object.keys(r).forEach(function(o){if(o in n){var l=s.readNamed(t,o);l!==T&&(n[o]=l),a=!0}}),a},getSource:function(t){var n=t.__source;if(n===T){var r=t.length===1&&t[0];n=t.__source=r&&z.isPlainObject(r)?r:null}return n},getNamed:function(t,n){var r=this.getSource(t);if(r)return n?r[n]:t.__filtered||r},hasNamed:function(t,n){return!!this.getNamed(t,n)},filter:function(t,n,r,s){var a;function o(p){if(!(r&&p in r)&&!(a&&p in a)){var w=n[p];w!==T&&(t[p]=w)}}if(s){for(var l={},f=0,h,c=s.length;f<c;f++)(h=s[f])in n&&(o(h),l[h]=!0);a=l}return Object.keys(n.__unfiltered||n).forEach(o),t},isPlainValue:function(t,n){return z.isPlainObject(t)||Array.isArray(t)||n&&typeof t=="string"},serialize:function(t,n,r,s){n=n||{};var a=!s,o;if(a&&(n.formatter=new ft(n.precision),s={length:0,definitions:{},references:{},add:function(w,v){var g="#"+w._id,I=this.references[g];if(!I){this.length++;var y=v.call(w),A=w._class;A&&y[0]!==A&&y.unshift(A),this.definitions[g]=y,I=this.references[g]=[g]}return I}}),t&&t._serialize){o=t._serialize(n,s);var l=t._class;l&&!t._compactSerialize&&(a||!r)&&o[0]!==l&&o.unshift(l)}else if(Array.isArray(t)){o=[];for(var f=0,h=t.length;f<h;f++)o[f]=z.serialize(t[f],n,r,s)}else if(z.isPlainObject(t)){o={};for(var c=Object.keys(t),f=0,h=c.length;f<h;f++){var p=c[f];o[p]=z.serialize(t[p],n,r,s)}}else typeof t=="number"?o=n.formatter.number(t,n.precision):o=t;return a&&s.length>0?[["dictionary",s.definitions],o]:o},deserialize:function(t,n,r,s,a){var o=t,l=!r,f=l&&t&&t.length&&t[0][0]==="dictionary";if(r=r||{},Array.isArray(t)){var h=t[0],c=h==="dictionary";if(t.length==1&&/^#/.test(h))return r.dictionary[h];h=z.exports[h],o=[];for(var p=h?1:0,w=t.length;p<w;p++)o.push(z.deserialize(t[p],n,r,c,f));if(h){var v=o;n?o=n(h,v,l||a):o=new h(v)}}else if(z.isPlainObject(t)){o={},s&&(r.dictionary=o);for(var g in t)o[g]=z.deserialize(t[g],n,r)}return f?o[1]:o},exportJSON:function(t,n){var r=z.serialize(t,n);return n&&n.asString==!1?r:JSON.stringify(r)},importJSON:function(t,n){return z.deserialize(typeof t=="string"?JSON.parse(t):t,function(r,s,a){var o=a&&n&&n.constructor===r,l=o?n:z.create(r.prototype);if(s.length===1&&l instanceof Ct&&(o||!(l instanceof ee))){var f=s[0];z.isPlainObject(f)&&(f.insert=!1,o&&(s=s.concat([Ct.INSERT])))}return(o?l.set:r).apply(l,s),o&&(n=null),l})},push:function(t,n){var r=n.length;if(r<4096)t.push.apply(t,n);else{var s=t.length;t.length+=r;for(var a=0;a<r;a++)t[s+a]=n[a]}return t},splice:function(t,n,r,s){var a=n&&n.length,o=r===T;r=o?t.length:r,r>t.length&&(r=t.length);for(var l=0;l<a;l++)n[l]._index=r+l;if(o)return z.push(t,n),[];var f=[r,s];n&&z.push(f,n);for(var h=t.splice.apply(t,f),l=0,c=h.length;l<c;l++)h[l]._index=T;for(var l=r+a,c=t.length;l<c;l++)t[l]._index=l;return h},capitalize:function(t){return t.replace(/\b[a-z]/g,function(n){return n.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(n,r){return r.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var Et={on:function(t,n){if(typeof t!="string")z.each(t,function(o,l){this.on(l,o)},this);else{var r=this._eventTypes,s=r&&r[t],a=this._callbacks=this._callbacks||{};a=a[t]=a[t]||[],a.indexOf(n)===-1&&(a.push(n),s&&s.install&&a.length===1&&s.install.call(this,t))}return this},off:function(t,n){if(typeof t!="string"){z.each(t,function(l,f){this.off(f,l)},this);return}var r=this._eventTypes,s=r&&r[t],a=this._callbacks&&this._callbacks[t],o;return a&&(!n||(o=a.indexOf(n))!==-1&&a.length===1?(s&&s.uninstall&&s.uninstall.call(this,t),delete this._callbacks[t]):o!==-1&&a.splice(o,1)),this},once:function(t,n){return this.on(t,function r(){n.apply(this,arguments),this.off(t,r)})},emit:function(t,n){var r=this._callbacks&&this._callbacks[t];if(!r)return!1;var s=z.slice(arguments,1),a=n&&n.target&&!n.currentTarget;r=r.slice(),a&&(n.currentTarget=this);for(var o=0,l=r.length;o<l;o++)if(r[o].apply(this,s)==!1){n&&n.stop&&n.stop();break}return a&&delete n.currentTarget,!0},responds:function(t){return!!(this._callbacks&&this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var n=this._eventTypes,r=this._callbacks,s=t?"install":"uninstall";if(n){for(var a in r)if(r[a].length>0){var o=n[a],l=o&&o[s];l&&l.call(this,a)}}},statics:{inject:function t(n){var r=n._events;if(r){var s={};z.each(r,function(a,o){var l=typeof a=="string",f=l?a:o,h=z.capitalize(f),c=f.substring(2).toLowerCase();s[c]=l?{}:a,f="_"+f,n["get"+h]=function(){return this[f]},n["set"+h]=function(p){var w=this[f];w&&this.off(c,w),p&&this.on(c,p),this[f]=p}}),n._eventTypes=s}return t.base.apply(this,arguments)}}},lt=z.extend({_class:"PaperScope",initialize:function t(){Xt=this,this.settings=new z({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var n=t.prototype;if(!this.support){var r=oe.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in r||"mozDash"in r,nativeBlendModes:ei.nativeModes},oe.release(r)}if(!this.agent){var s=mt.navigator.userAgent.toLowerCase(),a=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(s)||[])[0],o=a==="darwin"?"mac":a,l=n.agent=n.browser={platform:o};o&&(l[o]=!0),s.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(f,h,c,p,w){if(!l.chrome){var v=h==="opera"?p:/^(node|trident)$/.test(h)?w:c;l.version=v,l.versionNumber=parseFloat(v),h={trident:"msie",jsdom:"node"}[h]||h,l.name=h,l[h]=!0}}),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},version:"0.12.17",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,n){var r=Xt.PaperScript.execute(t,this,n);return we.updateFocus(),r},install:function(t){var n=this;z.each(["project","view","tool"],function(s){z.define(t,s,{configurable:!0,get:function(){return n[s]}})});for(var r in this)!/^_/.test(r)&&this[r]&&(t[r]=this[r])},setup:function(t){return Xt=this,this.project=new Mt(t),this},createCanvas:function(t,n){return oe.getCanvas(t,n)},activate:function(){Xt=this},clear:function(){for(var t=this.projects,n=this.tools,r=t.length-1;r>=0;r--)t[r].remove();for(var r=n.length-1;r>=0;r--)n[r].remove()},remove:function(){this.clear(),delete lt._scopes[this._id]},statics:new function(){function t(n){return n+="Attribute",function(r,s){return r[n](s)||r[n]("data-paper-"+s)}}return{_scopes:{},_id:0,get:function(n){return this._scopes[n]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),K=z.extend(Et,{initialize:function(t){this._scope=Xt,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(z.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),it={findItemBoundsCollisions:function(t,n,r){function s(l){for(var f=new Array(l.length),h=0;h<l.length;h++){var c=l[h].getBounds();f[h]=[c.left,c.top,c.right,c.bottom]}return f}var a=s(t),o=!n||n===t?a:s(n);return this.findBoundsCollisions(a,o,r||0)},findCurveBoundsCollisions:function(t,n,r,s){function a(v){for(var g=Math.min,I=Math.max,y=new Array(v.length),A=0;A<v.length;A++){var m=v[A];y[A]=[g(m[0],m[2],m[4],m[6]),g(m[1],m[3],m[5],m[7]),I(m[0],m[2],m[4],m[6]),I(m[1],m[3],m[5],m[7])]}return y}var o=a(t),l=!n||n===t?o:a(n);if(s){for(var f=this.findBoundsCollisions(o,l,r||0,!1,!0),h=this.findBoundsCollisions(o,l,r||0,!0,!0),c=[],p=0,w=f.length;p<w;p++)c[p]={hor:f[p],ver:h[p]};return c}return this.findBoundsCollisions(o,l,r||0)},findBoundsCollisions:function(t,n,r,s,a){var o=!n||t===n,l=o?t:t.concat(n),f=t.length,h=l.length;function c(_t,pt,It){for(var et=0,rt=_t.length;et<rt;){var yt=rt+et>>>1;l[_t[yt]][pt]<It?et=yt+1:rt=yt}return et-1}for(var p=s?1:0,w=p+2,v=s?0:1,g=v+2,I=new Array(h),y=0;y<h;y++)I[y]=y;I.sort(function(_t,pt){return l[_t][p]-l[pt][p]});for(var A=[],m=new Array(f),y=0;y<h;y++){var b=I[y],_=l[b],x=o?b:b-f,C=b<f,O=o||!C,S=C?[]:null;if(A.length){var R=c(A,w,_[p]-r)+1;if(A.splice(0,R),o&&a){S=S.concat(A);for(var F=0;F<A.length;F++){var B=A[F];m[B].push(x)}}else for(var W=_[g],N=_[v],F=0;F<A.length;F++){var B=A[F],U=l[B],H=B<f,G=o||B>=f;(a||(C&&G||O&&H)&&W>=U[v]-r&&N<=U[g]+r)&&(C&&G&&S.push(o?B:B-f),O&&H&&m[B].push(x))}}if(C&&(t===n&&S.push(b),m[b]=S),A.length){var Z=_[w],$=c(A,w,Z);A.splice($+1,0,b)}else A.push(b)}for(var y=0;y<m.length;y++){var ot=m[y];ot&&ot.sort(function(pt,It){return pt-It})}return m}},ft=z.extend({initialize:function(t){this.precision=z.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,n,r){return this.number(t)+(r||",")+this.number(n)},point:function(t,n){return this.number(t.x)+(n||",")+this.number(t.y)},size:function(t,n){return this.number(t.width)+(n||",")+this.number(t.height)},rectangle:function(t,n){return this.point(t,n)+(n||",")+this.size(t,n)}});ft.instance=new ft;var J=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],n=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],r=Math.abs,s=Math.sqrt,a=Math.pow,o=Math.log2||function(w){return Math.log(w)*Math.LOG2E},l=1e-12,f=112e-18;function h(w,v,g){return w<v?v:w>g?g:w}function c(w,v,g){function I(R){var F=R*134217729,B=R-F,W=B+F,N=R-W;return[W,N]}var y=v*v-w*g,A=v*v+w*g;if(r(y)*3<A){var m=I(w),b=I(v),_=I(g),x=v*v,C=b[0]*b[0]-x+2*b[0]*b[1]+b[1]*b[1],O=w*g,S=m[0]*_[0]-O+m[0]*_[1]+m[1]*_[0]+m[1]*_[1];y=x-O+(C-S)}return y}function p(){var w=Math.max.apply(Math,arguments);return w&&(w<1e-8||w>1e8)?a(2,-Math.round(o(w))):0}return{EPSILON:l,MACHINE_EPSILON:f,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(s(2)-1)/3,isZero:function(w){return w>=-l&&w<=l},isMachineZero:function(w){return w>=-f&&w<=f},clamp:h,integrate:function(w,v,g,I){for(var y=t[I-2],A=n[I-2],m=(g-v)*.5,b=m+v,_=0,x=I+1>>1,C=I&1?A[_++]*w(b):0;_<x;){var O=m*y[_];C+=A[_++]*(w(b+O)+w(b-O))}return m*C},findRoot:function(w,v,g,I,y,A,m){for(var b=0;b<A;b++){var _=w(g),x=_/v(g),C=g-x;if(r(x)<m){g=C;break}_>0?(y=g,g=C<=I?(I+y)*.5:C):(I=g,g=C>=y?(I+y)*.5:C)}return h(g,I,y)},solveQuadratic:function(w,v,g,I,y,A){var m,b=1/0;if(r(w)<l){if(r(v)<l)return r(g)<l?-1:0;m=-g/v}else{v*=-.5;var _=c(w,v,g);if(_&&r(_)<f){var x=p(r(w),r(v),r(g));x&&(w*=x,v*=x,g*=x,_=c(w,v,g))}if(_>=-f){var C=_<0?0:s(_),O=v+(v<0?-C:C);O===0?(m=g/w,b=-m):(m=O/w,b=g/O)}}var S=0,R=y==null,F=y-l,B=A+l;return isFinite(m)&&(R||m>F&&m<B)&&(I[S++]=R?m:h(m,y,A)),b!==m&&isFinite(b)&&(R||b>F&&b<B)&&(I[S++]=R?b:h(b,y,A)),S},solveCubic:function(w,v,g,I,y,A,m){var b=p(r(w),r(v),r(g),r(I)),_,x,C,O,S;b&&(w*=b,v*=b,g*=b,I*=b);function R($){_=$;var ot=w*_;x=ot+v,C=x*_+g,O=(ot+x)*_+C,S=C*_+I}if(r(w)<l)w=v,x=g,C=I,_=1/0;else if(r(I)<l)x=v,C=g,_=0;else{R(-(v/w)/3);var F=S/w,B=a(r(F),1/3),W=F<0?-1:1,N=-O/w,U=N>0?1.324717957244746*Math.max(B,s(N)):B,H=_-W*U;if(H!==_){do R(H),H=O===0?_:_-S/O/(1+f);while(W*H>W*_);r(w)*_*_>r(I/_)&&(C=-I/_,x=(C-g)/_)}}var G=J.solveQuadratic(w,x,C,y,A,m),Z=A==null;return isFinite(_)&&(G===0||G>0&&_!==y[0]&&_!==y[1])&&(Z||_>A-l&&_<m+l)&&(y[G++]=Z?_:h(_,A,m)),G}}},ut={_id:1,_pools:{},get:function(t){if(t){var n=this._pools[t];return n||(n=this._pools[t]={_id:1}),n._id++}else return this._id++}},k=z.extend({_class:"Point",_readIndex:!0,initialize:function(n,r){var s=typeof n,a=this.__read,o=0;if(s==="number"){var l=typeof r=="number";this._set(n,l?r:n),a&&(o=l?2:1)}else if(s==="undefined"||n===null)this._set(0,0),a&&(o=n===null?1:0);else{var f=s==="string"?n.split(/[\s,]+/)||[]:n;o=1,Array.isArray(f)?this._set(+f[0],+(f.length>1?f[1]:f[0])):"x"in f?this._set(f.x||0,f.y||0):"width"in f?this._set(f.width||0,f.height||0):"angle"in f?(this._set(f.length||0,0),this.setAngle(f.angle||0)):(this._set(0,0),o=0)}return a&&(this.__read=o),this},set:"#initialize",_set:function(t,n){return this.x=t,this.y=n,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new k(this.x,this.y)},toString:function(){var t=ft.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var n=t.formatter;return[n.number(this.x),n.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var n=this._angle||0;this._set(Math.cos(n)*t,Math.sin(n)*t)}else{var r=t/this.getLength();J.isZero(r)&&this.getAngle(),this._set(this.x*r,this.y*r)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=k.read(arguments),n=this.getLength()*t.getLength();if(J.isZero(n))return NaN;var r=this.dot(t)/n;return Math.acos(r<-1?-1:r>1?1:r)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var n=this.getLength();this._set(Math.cos(t)*n,Math.sin(t)*n)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=k.read(arguments);return Math.atan2(this.cross(t),this.dot(t))*180/Math.PI},getDistance:function(){var t=arguments,n=k.read(t),r=n.x-this.x,s=n.y-this.y,a=r*r+s*s,o=z.read(t);return o?a:Math.sqrt(a)},normalize:function(t){t===T&&(t=1);var n=this.getLength(),r=n!==0?t/n:0,s=new k(this.x*r,this.y*r);return r>=0&&(s._angle=this._angle),s},rotate:function(t,n){if(t===0)return this.clone();t=t*Math.PI/180;var r=n?this.subtract(n):this,s=Math.sin(t),a=Math.cos(t);return r=new k(r.x*a-r.y*s,r.x*s+r.y*a),n?r.add(n):r},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=k.read(arguments);return new k(this.x+t.x,this.y+t.y)},subtract:function(){var t=k.read(arguments);return new k(this.x-t.x,this.y-t.y)},multiply:function(){var t=k.read(arguments);return new k(this.x*t.x,this.y*t.y)},divide:function(){var t=k.read(arguments);return new k(this.x/t.x,this.y/t.y)},modulo:function(){var t=k.read(arguments);return new k(this.x%t.x,this.y%t.y)},negate:function(){return new k(-this.x,-this.y)},isInside:function(){return xt.read(arguments).contains(this)},isClose:function(){var t=arguments,n=k.read(t),r=z.read(t);return this.getDistance(n)<=r},isCollinear:function(){var t=k.read(arguments);return k.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=k.read(arguments);return k.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=J.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=k.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=k.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=k.read(arguments),n=t.isZero()?0:this.dot(t)/t.dot(t);return new k(t.x*n,t.y*n)},statics:{min:function(){var t=arguments,n=k.read(t),r=k.read(t);return new k(Math.min(n.x,r.x),Math.min(n.y,r.y))},max:function(){var t=arguments,n=k.read(t),r=k.read(t);return new k(Math.max(n.x,r.x),Math.max(n.y,r.y))},random:function(){return new k(Math.random(),Math.random())},isCollinear:function(t,n,r,s){return Math.abs(t*s-n*r)<=Math.sqrt((t*t+n*n)*(r*r+s*s))*1e-8},isOrthogonal:function(t,n,r,s){return Math.abs(t*r+n*s)<=Math.sqrt((t*t+n*n)*(r*r+s*s))*1e-8}}},z.each(["round","ceil","floor","abs"],function(t){var n=Math[t];this[t]=function(){return new k(n(this.x),n(this.y))}},{})),Ot=k.extend({initialize:function(n,r,s,a){this._x=n,this._y=r,this._owner=s,this._setter=a},_set:function(t,n,r){return this._x=t,this._y=n,r||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),vt=z.extend({_class:"Size",_readIndex:!0,initialize:function(n,r){var s=typeof n,a=this.__read,o=0;if(s==="number"){var l=typeof r=="number";this._set(n,l?r:n),a&&(o=l?2:1)}else if(s==="undefined"||n===null)this._set(0,0),a&&(o=n===null?1:0);else{var f=s==="string"?n.split(/[\s,]+/)||[]:n;o=1,Array.isArray(f)?this._set(+f[0],+(f.length>1?f[1]:f[0])):"width"in f?this._set(f.width||0,f.height||0):"x"in f?this._set(f.x||0,f.y||0):(this._set(0,0),o=0)}return a&&(this.__read=o),this},set:"#initialize",_set:function(t,n){return this.width=t,this.height=n,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new vt(this.width,this.height)},toString:function(){var t=ft.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var n=t.formatter;return[n.number(this.width),n.number(this.height)]},add:function(){var t=vt.read(arguments);return new vt(this.width+t.width,this.height+t.height)},subtract:function(){var t=vt.read(arguments);return new vt(this.width-t.width,this.height-t.height)},multiply:function(){var t=vt.read(arguments);return new vt(this.width*t.width,this.height*t.height)},divide:function(){var t=vt.read(arguments);return new vt(this.width/t.width,this.height/t.height)},modulo:function(){var t=vt.read(arguments);return new vt(this.width%t.width,this.height%t.height)},negate:function(){return new vt(-this.width,-this.height)},isZero:function(){var t=J.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,n){return new vt(Math.min(t.width,n.width),Math.min(t.height,n.height))},max:function(t,n){return new vt(Math.max(t.width,n.width),Math.max(t.height,n.height))},random:function(){return new vt(Math.random(),Math.random())}}},z.each(["round","ceil","floor","abs"],function(t){var n=Math[t];this[t]=function(){return new vt(n(this.width),n(this.height))}},{})),Gt=vt.extend({initialize:function(n,r,s,a){this._width=n,this._height=r,this._owner=s,this._setter=a},_set:function(t,n,r){return this._width=t,this._height=n,r||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),xt=z.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(n,r,s,a){var o=arguments,l=typeof n,f;if(l==="number"?(this._set(n,r,s,a),f=4):l==="undefined"||n===null?(this._set(0,0,0,0),f=n===null?1:0):o.length===1&&(Array.isArray(n)?(this._set.apply(this,n),f=1):n.x!==T||n.width!==T?(this._set(n.x||0,n.y||0,n.width||0,n.height||0),f=1):n.from===T&&n.to===T&&(this._set(0,0,0,0),z.readSupported(o,this)&&(f=1))),f===T){var h=k.readNamed(o,"from"),c=z.peek(o),p=h.x,w=h.y,v,g;if(c&&c.x!==T||z.hasNamed(o,"to")){var I=k.readNamed(o,"to");v=I.x-p,g=I.y-w,v<0&&(p=I.x,v=-v),g<0&&(w=I.y,g=-g)}else{var y=vt.read(o);v=y.width,g=y.height}this._set(p,w,v,g),f=o.__index}var A=o.__filtered;return A&&(this.__filtered=A),this.__read&&(this.__read=f),this},set:"#initialize",_set:function(t,n,r,s){return this.x=t,this.y=n,this.width=r,this.height=s,this},clone:function(){return new xt(this.x,this.y,this.width,this.height)},equals:function(t){var n=z.isPlainValue(t)?xt.read(arguments):t;return n===this||n&&this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height||!1},toString:function(){var t=ft.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var n=t.formatter;return[n.number(this.x),n.number(this.y),n.number(this.width),n.number(this.height)]},getPoint:function(t){var n=t?k:Ot;return new n(this.x,this.y,this,"setPoint")},setPoint:function(){var t=k.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var n=t?vt:Gt;return new n(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=vt.read(arguments),n=this._sx,r=this._sy,s=t.width,a=t.height;n&&(this.x+=(this.width-s)*n),r&&(this.y+=(this.height-a)*r),this.width=s,this.height=a,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var n=t-this.x;this.width-=this._sx===.5?n*2:n}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var n=t-this.y;this.height-=this._sy===.5?n*2:n}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var n=t-this.x;this.width=this._sx===.5?n*2:n}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var n=t-this.y;this.height=this._sy===.5?n*2:n}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||this._sx===.5?this.x=t-this.width/2:(this._sx&&(this.x+=(t-this.x)*2*this._sx),this.width=(t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||this._sy===.5?this.y=t-this.height/2:(this._sy&&(this.y+=(t-this.y)*2*this._sy),this.height=(t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(t){var n=t?k:Ot;return new n(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=k.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(t){return t&&t.width!==T||(Array.isArray(t)?t:arguments).length===4?this._containsRectangle(xt.read(arguments)):this._containsPoint(k.read(arguments))},_containsPoint:function(t){var n=t.x,r=t.y;return n>=this.x&&r>=this.y&&n<=this.x+this.width&&r<=this.y+this.height},_containsRectangle:function(t){var n=t.x,r=t.y;return n>=this.x&&r>=this.y&&n+t.width<=this.x+this.width&&r+t.height<=this.y+this.height},intersects:function(){var t=xt.read(arguments),n=z.read(arguments)||0;return t.x+t.width>this.x-n&&t.y+t.height>this.y-n&&t.x<this.x+this.width+n&&t.y<this.y+this.height+n},intersect:function(){var t=xt.read(arguments),n=Math.max(this.x,t.x),r=Math.max(this.y,t.y),s=Math.min(this.x+this.width,t.x+t.width),a=Math.min(this.y+this.height,t.y+t.height);return new xt(n,r,s-n,a-r)},unite:function(){var t=xt.read(arguments),n=Math.min(this.x,t.x),r=Math.min(this.y,t.y),s=Math.max(this.x+this.width,t.x+t.width),a=Math.max(this.y+this.height,t.y+t.height);return new xt(n,r,s-n,a-r)},include:function(){var t=k.read(arguments),n=Math.min(this.x,t.x),r=Math.min(this.y,t.y),s=Math.max(this.x+this.width,t.x),a=Math.max(this.y+this.height,t.y);return new xt(n,r,s-n,a-r)},expand:function(){var t=vt.read(arguments),n=t.width,r=t.height;return new xt(this.x-n/2,this.y-r/2,this.width+n,this.height+r)},scale:function(t,n){return this.expand(this.width*t-this.width,this.height*(n===T?t:n)-this.height)}},z.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,n){var r=t.join(""),s=/^[RL]/.test(r);n>=4&&(t[1]+=s?"Y":"X");var a=t[s?0:1],o=t[s?1:0],l="get"+a,f="get"+o,h="set"+a,c="set"+o,p="get"+r,w="set"+r;this[p]=function(v){var g=v?k:Ot;return new g(this[l](),this[f](),this,w)},this[w]=function(){var v=k.read(arguments);this[h](v.x),this[c](v.y)}},{beans:!0})),le=xt.extend({initialize:function(n,r,s,a,o,l){this._set(n,r,s,a,!0),this._owner=o,this._setter=l},_set:function(t,n,r,s,a){return this._x=t,this._y=n,this._width=r,this._height=s,a||this._owner[this._setter](this),this}},new function(){var t=xt.prototype;return z.each(["x","y","width","height"],function(n){var r=z.capitalize(n),s="_"+n;this["get"+r]=function(){return this[s]},this["set"+r]=function(a){this[s]=a,this._dontNotify||this._owner[this._setter](this)}},z.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(n){var r="set"+n;this[r]=function(){this._dontNotify=!0,t[r].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(n){var r=this._owner;r._changeSelection&&r._changeSelection(2,n)}}))}),Ht=z.extend({_class:"Matrix",initialize:function t(n,r){var s=arguments,a=s.length,o=!0;if(a>=6?this._set.apply(this,s):a===1||a===2?n instanceof t?this._set(n._a,n._b,n._c,n._d,n._tx,n._ty,r):Array.isArray(n)?this._set.apply(this,r?n.concat([r]):n):o=!1:a?o=!1:this.reset(),!o)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,n,r,s,a,o,l){return this._a=t,this._b=n,this._c=r,this._d=s,this._tx=a,this._ty=o,l||this._changed(),this},_serialize:function(t,n){return z.serialize(this.getValues(),t,!0,n)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new Ht(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=ft.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,n){var r=this._owner;return r?(r.transform(null,z.pick(t,!0),n),this.isIdentity()):!1},translate:function(){var t=k.read(arguments),n=t.x,r=t.y;return this._tx+=n*this._a+r*this._c,this._ty+=n*this._b+r*this._d,this._changed(),this},scale:function(){var t=arguments,n=k.read(t),r=k.read(t,0,{readNull:!0});return r&&this.translate(r),this._a*=n.x,this._b*=n.x,this._c*=n.y,this._d*=n.y,r&&this.translate(r.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var n=k.read(arguments,1),r=n.x,s=n.y,a=Math.cos(t),o=Math.sin(t),l=r-r*a+s*o,f=s-r*o-s*a,h=this._a,c=this._b,p=this._c,w=this._d;return this._a=a*h+o*p,this._b=a*c+o*w,this._c=-o*h+a*p,this._d=-o*c+a*w,this._tx+=l*h+f*p,this._ty+=l*c+f*w,this._changed(),this},shear:function(){var t=arguments,n=k.read(t),r=k.read(t,0,{readNull:!0});r&&this.translate(r);var s=this._a,a=this._b;return this._a+=n.y*this._c,this._b+=n.y*this._d,this._c+=n.x*s,this._d+=n.x*a,r&&this.translate(r.negate()),this._changed(),this},skew:function(){var t=arguments,n=k.read(t),r=k.read(t,0,{readNull:!0}),s=Math.PI/180,a=new k(Math.tan(n.x*s),Math.tan(n.y*s));return this.shear(a,r)},append:function(t,n){if(t){var r=this._a,s=this._b,a=this._c,o=this._d,l=t._a,f=t._c,h=t._b,c=t._d,p=t._tx,w=t._ty;this._a=l*r+h*a,this._c=f*r+c*a,this._b=l*s+h*o,this._d=f*s+c*o,this._tx+=p*r+w*a,this._ty+=p*s+w*o,n||this._changed()}return this},prepend:function(t,n){if(t){var r=this._a,s=this._b,a=this._c,o=this._d,l=this._tx,f=this._ty,h=t._a,c=t._c,p=t._b,w=t._d,v=t._tx,g=t._ty;this._a=h*r+c*s,this._c=h*a+c*o,this._b=p*r+w*s,this._d=p*a+w*o,this._tx=h*l+c*f+v,this._ty=p*l+w*f+g,n||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,n=this._b,r=this._c,s=this._d,a=this._tx,o=this._ty,l=t*s-n*r,f=null;return l&&!isNaN(l)&&isFinite(a)&&isFinite(o)&&(this._a=s/l,this._b=-n/l,this._c=-r/l,this._d=t/l,this._tx=(r*o-s*a)/l,this._ty=(n*a-t*o)/l,f=this),f},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new Ht(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,n,r){return arguments.length<3?this._transformPoint(k.read(arguments)):this._transformCoordinates(t,n,r)},_transformPoint:function(t,n,r){var s=t.x,a=t.y;return n||(n=new k),n._set(s*this._a+a*this._c+this._tx,s*this._b+a*this._d+this._ty,r)},_transformCoordinates:function(t,n,r){for(var s=0,a=2*r;s<a;s+=2){var o=t[s],l=t[s+1];n[s]=o*this._a+l*this._c+this._tx,n[s+1]=o*this._b+l*this._d+this._ty}return n},_transformCorners:function(t){var n=t.x,r=t.y,s=n+t.width,a=r+t.height,o=[n,r,s,r,s,a,n,a];return this._transformCoordinates(o,o,4)},_transformBounds:function(t,n,r){for(var s=this._transformCorners(t),a=s.slice(0,2),o=a.slice(),l=2;l<8;l++){var f=s[l],h=l&1;f<a[h]?a[h]=f:f>o[h]&&(o[h]=f)}return n||(n=new xt),n._set(a[0],a[1],o[0]-a[0],o[1]-a[1],r)},inverseTransform:function(){return this._inverseTransform(k.read(arguments))},_inverseTransform:function(t,n,r){var s=this._a,a=this._b,o=this._c,l=this._d,f=this._tx,h=this._ty,c=s*l-a*o,p=null;if(c&&!isNaN(c)&&isFinite(f)&&isFinite(h)){var w=t.x-this._tx,v=t.y-this._ty;n||(n=new k),p=n._set((w*l-v*o)/c,(v*s-w*a)/c,r)}return p},decompose:function(){var t=this._a,n=this._b,r=this._c,s=this._d,a=t*s-n*r,o=Math.sqrt,l=Math.atan2,f=180/Math.PI,h,c,p;if(t!==0||n!==0){var w=o(t*t+n*n);h=Math.acos(t/w)*(n>0?1:-1),c=[w,a/w],p=[l(t*r+n*s,w*w),0]}else if(r!==0||s!==0){var v=o(r*r+s*s);h=Math.asin(r/v)*(s>0?1:-1),c=[a/v,v],p=[0,l(t*r+n*s,v*v)]}else h=0,p=c=[0,0];return{translation:this.getTranslation(),rotation:h*f,scaling:new k(c),skewing:new k(p[0]*f,p[1]*f)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new k(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},z.each(["a","b","c","d","tx","ty"],function(t){var n=z.capitalize(t),r="_"+t;this["get"+n]=function(){return this[r]},this["set"+n]=function(s){this[r]=s,this._changed()}},{})),bt=z.extend({_class:"Line",initialize:function(n,r,s,a,o){var l=!1;arguments.length>=4?(this._px=n,this._py=r,this._vx=s,this._vy=a,l=o):(this._px=n.x,this._py=n.y,this._vx=r.x,this._vy=r.y,l=s),l||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new k(this._px,this._py)},getVector:function(){return new k(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,n){return bt.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,n)},getSide:function(t,n){return bt.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,n)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return bt.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return k.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return k.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,n,r,s,a,o,l,f,h,c){h||(r-=t,s-=n,l-=a,f-=o);var p=r*f-s*l;if(!J.isMachineZero(p)){var w=t-a,v=n-o,g=(l*v-f*w)/p,I=(r*v-s*w)/p,y=1e-12,A=-y,m=1+y;if(c||A<g&&g<m&&A<I&&I<m)return c||(g=g<=0?0:g>=1?1:g),new k(t+g*r,n+g*s)}},getSide:function(t,n,r,s,a,o,l,f){l||(r-=t,s-=n);var h=a-t,c=o-n,p=h*s-c*r;return!f&&J.isMachineZero(p)&&(p=(h*r+h*r)/(r*r+s*s),p>=0&&p<=1&&(p=0)),p<0?-1:p>0?1:0},getSignedDistance:function(t,n,r,s,a,o,l){return l||(r-=t,s-=n),r===0?s>0?a-t:t-a:s===0?r<0?o-n:n-o:((a-t)*s-(o-n)*r)/(s>r?s*Math.sqrt(1+r*r/(s*s)):r*Math.sqrt(1+s*s/(r*r)))},getDistance:function(t,n,r,s,a,o,l){return Math.abs(bt.getSignedDistance(t,n,r,s,a,o,l))}}}),Mt=K.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(n){K.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new ti(null,null,this),this._view=we.create(this,n||oe.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,n){return z.serialize(this._children,t,!0,n)},_changed:function(t,n){if(t&1){var r=this._view;r&&(r._needsUpdate=!0,!r._requested&&r._autoUpdate&&r.requestUpdate())}var s=this._changes;if(s&&n){var a=this._changesById,o=n._id,l=a[o];l?l.flags|=t:s.push(a[o]={item:n,flags:t})}},clear:function(){for(var t=this._children,n=t.length-1;n>=0;n--)t[n].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return t.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ee({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],n={};return this.getItems({class:ce,match:function(r){var s=r._definition,a=s._id;return n[a]||(n[a]=!0,t.push(s)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,n=[];for(var r in t){var s=t[r],a=s._selection;a&1&&s.isInserted()?n.push(s):a||this._updateSelection(s)}return n},_updateSelection:function(t){var n=t._id,r=this._selectionItems;t._selection?r[n]!==t&&(this._selectionCount++,r[n]=t):r[n]===t&&(this._selectionCount--,delete r[n])},selectAll:function(){for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var n in t)t[n].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(T,t)},insertLayer:function(t,n){if(n instanceof ee){n._remove(!1,!0),z.splice(this._children,[n],t,0),n._setProject(this,!0);var r=n._name;r&&n.setName(r),this._changes&&n._changed(5),this._activeLayer||(this._activeLayer=n)}else n=null;return n},_insertItem:function(t,n,r){return n=this.insertLayer(t,n)||(this._activeLayer||this._insertItem(T,new ee(Ct.NO_INSERT),!0)).insertChild(t,n),r&&n.activate&&n.activate(),n},getItems:function(t){return Ct._getItems(this,t)},getItem:function(t){return Ct._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var n=this._activeLayer;return z.importJSON(t,n&&n.isEmpty()&&n)},removeOn:function(t){var n=this._removeSets;if(n){t==="mouseup"&&(n.mousedrag=null);var r=n[t];if(r){for(var s in r){var a=r[s];for(var o in n){var l=n[o];l&&l!=r&&delete l[a._id]}a.remove()}n[t]=null}}},draw:function(t,n,r){this._updateVersion++,t.save(),n.applyToContext(t);for(var s=this._children,a=new z({offset:new k(0,0),pixelRatio:r,viewMatrix:n.isIdentity()?null:n,matrices:[new Ht],updateMatrix:!0}),o=0,l=s.length;o<l;o++)s[o].draw(t,a);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var f=this._selectionItems,h=this._scope.settings.handleSize,c=this._updateVersion;for(var p in f)f[p]._drawSelection(t,n,h,f,c);t.restore()}}}),Ct=z.extend(Et,{statics:{extend:function t(n){return n._serializeFields&&(n._serializeFields=z.set({},this.prototype._serializeFields,n._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new Ht,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return z.each(t,function(n){this._events[n]={install:function(r){this.getView()._countItemEvent(r,1)},uninstall:function(r){this.getView()._countItemEvent(r,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,n){var r=t&&z.isPlainObject(t),s=r&&t.internal===!0,a=this._matrix=new Ht,o=r&&t.project||Xt.project,l=Xt.settings;return this._id=s?null:ut.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,n&&a.translate(n),a._owner=this,this._style=new ti(o._currentStyle,this,o),s||r&&t.insert==!1||!l.insertItems&&!(r&&t.insert==!0)?this._setProject(o):(r&&t.parent||o)._insertItem(T,this,!0),r&&t!==Ct.NO_INSERT&&t!==Ct.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),r},_serialize:function(t,n){var r={},s=this;function a(o){for(var l in o){var f=s[l];z.equals(f,l==="leading"?o.fontSize*1.2:o[l])||(r[l]=z.serialize(f,t,l!=="data",n))}}return a(this._serializeFields),this instanceof Zt||a(this._style._defaults),[this._class,r]},_changed:function(t){var n=this._symbol,r=this._parent||n,s=this._project;t&8&&(this._bounds=this._position=this._decomposed=T),t&16&&(this._globalMatrix=T),r&&t&72&&Ct._clearBoundsCache(r),t&2&&Ct._clearBoundsCache(this),s&&s._changed(t,this),n&&n._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var n=this._getOwner();if(t&&n){var r=n._children,s=n._namedChildren;(s[t]=s[t]||[]).push(this),t in r||(r[t]=this)}this._name=t||T,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},z.each(["locked","visible","blendMode","opacity","guide"],function(t){var n=z.capitalize(t),r="_"+t,s={locked:256,visible:265};this["get"+n]=function(){return this[r]},this["set"+n]=function(a){a!=this[r]&&(this[r]=a,this._changed(s[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var n=this._project;n&&(n._updateSelection(this),this._changed(257))}},_changeSelection:function(t,n){var r=this._selection;this.setSelection(n?r|t:r&~t)},isSelected:function(){if(this._selectChildren){for(var t=this._children,n=0,r=t.length;n<r;n++)if(t[n].isSelected())return!0}return!!(this._selection&1)},setSelected:function(t){if(this._selectChildren)for(var n=this._children,r=0,s=n.length;r<s;r++)n[r].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,n=!!(this._selection&1);if(t&&n){for(var r=0,s=t.length;r<s;r++)if(!t[r].isFullySelected())return!1;return!0}return n},setFullySelected:function(t){var n=this._children;if(n)for(var r=0,s=n.length;r<s;r++)n[r].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var n=t?k:Ot,r=this._position||(this._position=this._getPositionFromBounds());return new n(r.x,r.y,this,"setPosition")},setPosition:function(){this.translate(k.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new Ot(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=k.read(arguments,0,{clone:!0,readNull:!0}),this._position=T}},z.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,n){this[n]=function(r){return this.getBounds(r,t)}},{beans:!0,getBounds:function(t,n){var r=n||t instanceof Ht,s=z.set({},r?n:t,this._boundsOptions);(!s.stroke||this.getStrokeScaling())&&(s.cacheItem=this);var a=this._getCachedBounds(r&&t,s).rect;return arguments.length?a:new le(a.x,a.y,a.width,a.height,this,"setBounds")},setBounds:function(){var t=xt.read(arguments),n=this.getBounds(),r=this._matrix,s=new Ht,a=t.getCenter();s.translate(a),(t.width!=n.width||t.height!=n.height)&&(r.isInvertible()||(r.set(r._backup||new Ht().translate(r.getTranslation())),n=this.getBounds()),s.scale(n.width!==0?t.width/n.width:0,n.height!==0?t.height/n.height:0)),a=n.getCenter(),s.translate(-a.x,-a.y),this.transform(s)},_getBounds:function(t,n){var r=this._children;return!r||!r.length?new xt:(Ct._updateBoundsCache(this,n.cacheItem),Ct._getBounds(r,t,n))},_getBoundsCacheKey:function(t,n){return[t.stroke?1:0,t.handle?1:0,n?1:0].join("")},_getCachedBounds:function(t,n,r){t=t&&t._orNullIfIdentity();var s=n.internal&&!r,a=n.cacheItem,o=s?null:this._matrix._orNullIfIdentity(),l=a&&(!t||t.equals(o))&&this._getBoundsCacheKey(n,s),f=this._bounds;if(Ct._updateBoundsCache(this._parent||this._symbol,a),l&&f&&l in f){var h=f[l];return{rect:h.rect.clone(),nonscaling:h.nonscaling}}var c=this._getBounds(t||o,n),p=c.rect||c,w=this._style,v=c.nonscaling||w.hasStroke()&&!w.getStrokeScaling();if(l){f||(this._bounds=f={});var h=f[l]={rect:p.clone(),nonscaling:v,internal:s}}return{rect:p,nonscaling:v}},_getStrokeMatrix:function(t,n){var r=this.getStrokeScaling()?null:n&&n.internal?this:this._parent||this._symbol&&this._symbol._item,s=r?r.getViewMatrix().invert():t;return s&&s._shiftless()},statics:{_updateBoundsCache:function(t,n){if(t&&n){var r=n._id,s=t._boundsCache=t._boundsCache||{ids:{},list:[]};s.ids[r]||(s.list.push(n),s.ids[r]=n)}},_clearBoundsCache:function(t){var n=t._boundsCache;if(n){t._bounds=t._position=t._boundsCache=T;for(var r=0,s=n.list,a=s.length;r<a;r++){var o=s[r];o!==t&&(o._bounds=o._position=T,o._boundsCache&&Ct._clearBoundsCache(o))}}},_getBounds:function(t,n,r){var s=1/0,a=-s,o=s,l=a,f=!1;r=r||{};for(var h=0,c=t.length;h<c;h++){var p=t[h];if(p._visible&&!p.isEmpty(!0)){var w=p._getCachedBounds(n&&n.appended(p._matrix),r,!0),v=w.rect;s=Math.min(v.x,s),o=Math.min(v.y,o),a=Math.max(v.x+v.width,a),l=Math.max(v.y+v.height,l),w.nonscaling&&(f=!0)}}return{rect:isFinite(s)?new xt(s,o,a-s,l-o):new xt,nonscaling:f}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var n=this.getRotation();if(n!=null&&t!=null){var r=this._decomposed;this.rotate(t-n),r&&(r.rotation=t,this._decomposed=r)}},getScaling:function(){var t=this._decompose(),n=t&&t.scaling;return new Ot(n?n.x:1,n?n.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),n=k.read(arguments,0,{clone:!0,readNull:!0});if(t&&n&&!t.equals(n)){var r=this.getRotation(),s=this._decomposed,a=new Ht,o=J.isZero;if(o(t.x)||o(t.y))a.translate(s.translation),r&&a.rotate(r),a.scale(n.x,n.y),this._matrix.set(a);else{var l=this.getPosition(!0);a.translate(l),r&&a.rotate(r),a.scale(n.x/t.x,n.y/t.y),r&&a.rotate(-r),a.translate(l.negate()),this.transform(a)}s&&(s.scaling=n,this._decomposed=s)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var n=this._globalMatrix;if(n)for(var r=this._parent,s=[];r;){if(!r._globalMatrix){n=null;for(var a=0,o=s.length;a<o;a++)s[a]._globalMatrix=null;break}s.push(r),r=r._parent}if(!n){n=this._globalMatrix=this._matrix.clone();var r=this._parent;r&&n.prepend(r.getGlobalMatrix(!0))}return t?n:n.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,n){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var r=this._children,s=0,a=r&&r.length;s<a;s++)r[s]._setProject(t);n=!0}n&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(n){t.base.call(this,n);for(var r=this._children,s=0,a=r&&r.length;s<a;s++)r[s]._installEvents(n)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof ee)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return z.equals(this._children,t._children)},clone:function(t){var n=new this.constructor(Ct.NO_INSERT),r=this._children,s=z.pick(t?t.insert:T,t===T||t===!0),a=z.pick(t?t.deep:T,!0);r&&n.copyAttributes(this),(!r||a)&&n.copyContent(this),r||n.copyAttributes(this),s&&n.insertAbove(this);var o=this._name,l=this._parent;if(o&&l){for(var r=l._children,f=o,h=1;r[o];)o=f+" "+h++;o!==f&&n.setName(o)}return n},copyContent:function(t){for(var n=t._children,r=0,s=n&&n.length;r<s;r++)this.addChild(n[r].clone(!1),!0)},copyAttributes:function(t,n){this.setStyle(t._style);for(var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],s=0,a=r.length;s<a;s++){var o=r[s];t.hasOwnProperty(o)&&(this[o]=t[o])}n||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var l=t._data,f=t._name;this._data=l?z.clone(l):null,f&&this.setName(f)},rasterize:function(t,n){var r,s,a;z.isPlainObject(t)?(r=t.resolution,s=t.insert,a=t.raster):(r=t,s=n),a||(a=new ve(Ct.NO_INSERT));var o=this.getStrokeBounds(),l=(r||this.getView().getResolution())/72,f=o.getTopLeft().floor(),h=o.getBottomRight().ceil(),c=new vt(h.subtract(f)),p=c.multiply(l);if(a.setSize(p,!0),!p.isZero()){var w=a.getContext(!0),v=new Ht().scale(l).translate(f.negate());w.save(),v.applyToContext(w),this.draw(w,new z({matrices:[v]})),w.restore()}return a._matrix.set(new Ht().translate(f.add(c.divide(2))).scale(1/l)),(s===T||s)&&a.insertAbove(this),a},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(k.read(arguments)))},_contains:function(t){var n=this._children;if(n){for(var r=n.length-1;r>=0;r--)if(n[r].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return xt.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new ne.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,n){return t instanceof Ct?this._asPathItem().getIntersections(t._asPathItem(),null,n,!0).length>0:!1}},new function(){function t(){var s=arguments;return this._hitTest(k.read(s),pe.getOptions(s))}function n(){var s=arguments,a=k.read(s),o=pe.getOptions(s),l=[];return this._hitTest(a,new z({all:l},o)),l}function r(s,a,o,l){var f=this._children;if(f)for(var h=f.length-1;h>=0;h--){var c=f[h],p=c!==l&&c._hitTest(s,a,o);if(p&&!a.all)return p}return null}return Mt.inject({hitTest:t,hitTestAll:n,_hitTest:r}),{hitTest:t,hitTestAll:n,_hitTestChildren:r}},{_hitTest:function(t,n,r){if(this._locked||!this._visible||this._guide&&!n.guides||this.isEmpty())return null;var s=this._matrix,a=r?r.appended(s):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(n.tolerance,1e-12),l=n._tolerancePadding=new vt(ne._getStrokePadding(o,s._shiftless().invert()));if(t=s._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(l.multiply(2))._containsPoint(t))return null;var f=!(n.guides&&!this._guide||n.selected&&!this.isSelected()||n.type&&n.type!==z.hyphenate(this._class)||n.class&&!(this instanceof n.class)),h=n.match,c=this,p,w;function v(_){return _&&h&&!h(_)&&(_=null),_&&n.all&&n.all.push(_),_}function g(_,x){var C=x?p["get"+x]():c.getPosition();if(t.subtract(C).divide(l).length<=1)return new pe(_,c,{name:x?z.hyphenate(x):_,point:C})}var I=n.position,y=n.center,A=n.bounds;if(f&&this._parent&&(I||y||A)){if((y||A)&&(p=this.getInternalBounds()),w=I&&g("position")||y&&g("center","Center"),!w&&A)for(var m=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!w;b++)w=g("bounds",m[b]);w=v(w)}return w||(w=this._hitTestChildren(t,n,a)||f&&v(this._hitTestSelf(t,n,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null),w&&w.point&&(w.point=s.transform(w.point)),w},_hitTestSelf:function(t,n){if(n.fill&&this.hasFill()&&this._contains(t))return new pe("fill",this)},matches:function(t,n){function r(l,f){for(var h in l)if(l.hasOwnProperty(h)){var c=l[h],p=f[h];if(z.isPlainObject(c)&&z.isPlainObject(p)){if(!r(c,p))return!1}else if(!z.equals(c,p))return!1}return!0}var s=typeof t;if(s==="object"){for(var a in t)if(t.hasOwnProperty(a)&&!this.matches(a,t[a]))return!1;return!0}else{if(s==="function")return t(this);if(t==="match")return n(this);var o=/^(empty|editable)$/.test(t)?this["is"+z.capitalize(t)]():t==="type"?z.hyphenate(this._class):this[t];if(t==="class"){if(typeof n=="function")return this instanceof n;o=this._class}if(typeof n=="function")return!!n(o);if(n){if(n.test)return n.test(o);if(z.isPlainObject(n))return r(n,o)}return z.equals(o,n)}},getItems:function(t){return Ct._getItems(this,t,this._matrix)},getItem:function(t){return Ct._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(n,r,s,a,o){if(!a){var l=typeof r=="object"&&r,f=l&&l.overlapping,h=l&&l.inside,c=f||h,v=c&&xt.read([c]);a={items:[],recursive:l&&l.recursive!==!1,inside:!!h,overlapping:!!f,rect:v,path:f&&new ne.Rectangle({rectangle:v,insert:!1})},l&&(r=z.filter({},r,{recursive:!0,inside:!0,overlapping:!0}))}var p=n._children,w=a.items,v=a.rect;s=v&&(s||new Ht);for(var g=0,I=p&&p.length;g<I;g++){var y=p[g],A=s&&s.appended(y._matrix),m=!0;if(v){var c=y.getBounds(A);if(!v.intersects(c))continue;v.contains(c)||a.overlapping&&(c.contains(v)||a.path.intersects(y,A))||(m=!1)}if(m&&y.matches(r)&&(w.push(y),o)||(a.recursive!==!1&&t(y,r,A,a,o),o&&w.length>0))break}return w}}},{importJSON:function(t){var n=z.importJSON(t,this);return n!==this?this.addChild(n):n},addChild:function(t){return this.insertChild(T,t)},insertChild:function(t,n){var r=n?this.insertChildren(t,[n]):null;return r&&r[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,n){var r=this._children;if(r&&n&&n.length>0){n=z.slice(n);for(var s={},a=n.length-1;a>=0;a--){var o=n[a],l=o&&o._id;!o||s[l]?n.splice(a,1):(o._remove(!1,!0),s[l]=!0)}z.splice(r,n,t,0);for(var f=this._project,h=f._changes,a=0,c=n.length;a<c;a++){var o=n[a],p=o._name;o._parent=this,o._setProject(f,!0),p&&o.setName(p),h&&o._changed(5)}this._changed(11)}else n=null;return n},_insertItem:"#insertChild",_insertAt:function(t,n){var r=t&&t._getOwner(),s=t!==this&&r?this:null;return s&&(s._remove(!1,!0),r._insertItem(t._index+n,s)),s},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(T,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(T,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var n=this._children;if(n&&n.length===1){var r=n[0].reduce(t);return this._parent?(r.insertAbove(this),this.remove()):r.remove(),r}return this},_removeNamed:function(){var t=this._getOwner();if(t){var n=t._children,r=t._namedChildren,s=this._name,a=r[s],o=a?a.indexOf(this):-1;o!==-1&&(n[s]==this&&delete n[s],a.splice(o,1),a.length?n[s]=a[0]:delete r[s])}},_remove:function(t,n){var r=this._getOwner(),s=this._project,a=this._index;return this._style&&this._style._dispose(),r?(this._name&&this._removeNamed(),a!=null&&(s._activeLayer===this&&(s._activeLayer=this.getNextSibling()||this.getPreviousSibling()),z.splice(r._children,null,a,1)),this._installEvents(!1),t&&s._changes&&this._changed(5),n&&r._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var n=t&&t.insertBelow(this);return n&&this.remove(),n},removeChildren:function(t,n){if(!this._children)return null;t=t||0,n=z.pick(n,this._children.length);for(var r=z.splice(this._children,null,t,n-t),s=r.length-1;s>=0;s--)r[s]._remove(!0,!1);return r.length>0&&this._changed(11),r},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,n=this._children.length;t<n;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var n=this._children,r=n?n.length:0;if(t){for(var s=0;s<r;s++)if(!n[s].isEmpty(t))return!1;return!0}return!r},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function n(l){var f=[];do f.unshift(l);while(l=l._parent);return f}for(var r=n(this),s=n(t),a=0,o=Math.min(r.length,s.length);a<o;a++)if(r[a]!=s[a])return r[a]._index<s[a]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return this._getOrder(t)===1},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var n=this;n=n._parent;)if(n===t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var n=this._parent;n;){if(n._parent&&/^(Group|Layer|CompoundPath)$/.test(n._class)&&t.isDescendant(n))return!0;n=n._parent}return!1}},z.each(["rotate","scale","shear","skew"],function(t){var n=t==="rotate";this[t]=function(){var r=arguments,s=(n?z:k).read(r),a=k.read(r,0,{readNull:!0});return this.transform(new Ht()[t](s,a||this.getPosition(!0)))}},{translate:function(){var t=new Ht;return this.transform(t.translate.apply(t,arguments))},transform:function(t,n,r){var s=this._matrix,a=t&&!t.isIdentity(),o=r&&this._canApplyMatrix||this._applyMatrix&&(a||!s.isIdentity()||n&&this._children);if(!a&&!o)return this;if(a){!t.isInvertible()&&s.isInvertible()&&(s._backup=s.getValues()),s.prepend(t,!0);var l=this._style,f=l.getFillColor(!0),h=l.getStrokeColor(!0);f&&f.transform(t),h&&h.transform(t)}if(o&&(o=this._transformContent(s,n,r))){var c=this._pivot;c&&s._transformPoint(c,c,!0),s.reset(!0),r&&this._canApplyMatrix&&(this._applyMatrix=!0)}var p=this._bounds,w=this._position;(a||o)&&this._changed(25);var v=a&&p&&t.decompose();if(v&&v.skewing.isZero()&&v.rotation%90===0){for(var g in p){var I=p[g];if(I.nonscaling)delete p[g];else if(o||!I.internal){var y=I.rect;t._transformBounds(y,y)}}this._bounds=p;var A=p[this._getBoundsCacheKey(this._boundsOptions||{})];A&&(this._position=this._getPositionFromBounds(A.rect))}else a&&w&&this._pivot&&(this._position=t._transformPoint(w,w));return this},_transformContent:function(t,n,r){var s=this._children;if(s){for(var a=0,o=s.length;a<o;a++)s[a].transform(t,n,r);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(k.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(k.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(k.read(arguments))},localToParent:function(){return this._matrix._transformPoint(k.read(arguments))},fitBounds:function(t,n){t=xt.read(arguments);var r=this.getBounds(),s=r.height/r.width,a=t.height/t.width,o=(n?s>a:s<a)?t.width/r.width:t.height/r.height,l=new xt(new k,new vt(r.width*o,r.height*o));l.setCenter(t.getCenter()),this.setBounds(l)}}),{_setStyles:function(t,n,r){var s=this._style,a=this._matrix;if(s.hasFill()&&(t.fillStyle=s.getFillColor().toCanvasStyle(t,a)),s.hasStroke()){t.strokeStyle=s.getStrokeColor().toCanvasStyle(t,a),t.lineWidth=s.getStrokeWidth();var o=s.getStrokeJoin(),l=s.getStrokeCap(),f=s.getMiterLimit();if(o&&(t.lineJoin=o),l&&(t.lineCap=l),f&&(t.miterLimit=f),Xt.support.nativeDash){var h=s.getDashArray(),c=s.getDashOffset();h&&h.length&&("setLineDash"in t?(t.setLineDash(h),t.lineDashOffset=c):(t.mozDash=h,t.mozDashOffset=c))}}if(s.hasShadow()){var p=n.pixelRatio||1,w=r._shiftless().prepend(new Ht().scale(p,p)),v=w.transform(new k(s.getShadowBlur(),0)),g=w.transform(this.getShadowOffset());t.shadowColor=s.getShadowColor().toCanvasStyle(t),t.shadowBlur=v.getLength(),t.shadowOffsetX=g.x,t.shadowOffsetY=g.y}},draw:function(t,n,r){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var s=n.matrices,a=n.viewMatrix,o=this._matrix,l=s[s.length-1].appended(o);if(l.isInvertible()){a=a?a.appended(l):l,s.push(l),n.updateMatrix&&(this._globalMatrix=l);var f=this._blendMode,h=J.clamp(this._opacity,0,1),c=f==="normal",p=ei.nativeModes[f],w=c&&h===1||n.dontStart||n.clip||(p||c&&h<1)&&this._canComposite(),v=n.pixelRatio||1,g,I,y;if(!w){var A=this.getStrokeBounds(a);if(!A.width||!A.height){s.pop();return}y=n.offset,I=n.offset=A.getTopLeft().floor(),g=t,t=oe.getContext(A.getSize().ceil().add(1).multiply(v)),v!==1&&t.scale(v,v)}t.save();var m=r?r.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&a,b=!w&&n.clipItem,_=!m||b;if(w?(t.globalAlpha=h,p&&(t.globalCompositeOperation=f)):_&&t.translate(-I.x,-I.y),_&&(w?o:a).applyToContext(t),b&&n.clipItem.draw(t,n.extend({clip:!0})),m){t.setTransform(v,0,0,v,0,0);var x=n.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,n,a,m),t.restore(),s.pop(),n.clip&&!n.dontFinish&&t.clip(this.getFillRule()),w||(ei.process(f,t,g,h,I.subtract(y).multiply(v)),oe.release(t),n.offset=y)}}},_isUpdated:function(t){var n=this._parent;if(n instanceof De)return n._isUpdated(t);var r=this._updateVersion===t;return!r&&n&&n._visible&&n._isUpdated(t)&&(this._updateVersion=t,r=!0),r},_drawSelection:function(t,n,r,s,a){var o=this._selection,l=o&1,f=o&2||l&&this._selectBounds,h=o&4;if(this._drawSelected||(l=!1),(l||f||h)&&this._isUpdated(a)){var c,p=this.getSelectedColor(!0)||(c=this.getLayer())&&c.getSelectedColor(!0),w=n.appended(this.getGlobalMatrix(!0)),v=r/2;if(t.strokeStyle=t.fillStyle=p?p.toCanvasStyle(t):"#009dec",l&&this._drawSelected(t,w,s),h){var g=this.getPosition(!0),I=this._parent,y=I?I.localToGlobal(g):g,A=y.x,m=y.y;t.beginPath(),t.arc(A,m,v,0,Math.PI*2,!0),t.stroke();for(var b=[[0,-1],[1,0],[0,1],[-1,0]],_=v,x=r+1,C=0;C<4;C++){var O=b[C],S=O[0],R=O[1];t.moveTo(A+S*_,m+R*_),t.lineTo(A+S*x,m+R*x),t.stroke()}}if(f){var F=w._transformCorners(this.getInternalBounds());t.beginPath();for(var C=0;C<8;C++)t[C?"lineTo":"moveTo"](F[C],F[++C]);t.closePath(),t.stroke();for(var C=0;C<8;C++)t.fillRect(F[C]-v,F[++C]-v,r,r)}}},_canComposite:function(){return!1}},z.each(["down","drag","up","move"],function(t){this["removeOn"+z.capitalize(t)]=function(){var n={};return n[t]=!0,this.removeOn(n)}},{removeOn:function(t){for(var n in t)if(t[n]){var r="mouse"+n,s=this._project,a=s._removeSets=s._removeSets||{};a[r]=a[r]||{},a[r][this._id]=this}return this}}),{tween:function(t,n,r){r||(r=n,n=t,t=null,r||(r=n,n=null));var s=r&&r.easing,a=r&&r.start,o=r!=null&&(typeof r=="number"?r:r.duration),l=new sa(this,t,n,o,s,a);function f(h){l._handleFrame(h.time*1e3),l.running||this.off("frame",f)}return o&&this.on("frame",f),l},tweenTo:function(t,n){return this.tween(null,t,n)},tweenFrom:function(t,n){return this.tween(t,null,n)}}),Zt=Ct.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(n){this._children=[],this._namedChildren={},this._initialize(n)||this.addChildren(Array.isArray(n)?n:arguments)},_changed:function t(n){t.base.call(this,n),n&2050&&(this._clipItem=T)},_getClipItem:function(){var t=this._clipItem;if(t===T){t=null;for(var n=this._children,r=0,s=n.length;r<s;r++)if(n[r]._clipMask){t=n[r];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var n=this.getFirstChild();n&&n.setClipMask(t)},_getBounds:function t(n,r){var s=this._getClipItem();return s?s._getCachedBounds(s._matrix.prepended(n),z.set({},r,{stroke:!1})):t.base.call(this,n,r)},_hitTestChildren:function t(n,r,s){var a=this._getClipItem();return(!a||a.contains(n))&&t.base.call(this,n,r,s,a)},_draw:function(t,n){var r=n.clip,s=!r&&this._getClipItem();n=n.extend({clipItem:s,clip:!1}),r?(t.beginPath(),n.dontStart=n.dontFinish=!0):s&&s.draw(t,n.extend({clip:!0}));for(var a=this._children,o=0,l=a.length;o<l;o++){var f=a[o];f!==s&&f.draw(t,n)}}}),ee=Zt.extend({_class:"Layer",initialize:function(){Zt.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function t(){return this._parent?t.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Qt=Ct.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(n,r){this._initialize(n,r)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&z.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new Gt(t.width,t.height,this,"setSize")},setSize:function(){var t=vt.read(arguments);if(!this._size)this._size=t.clone();else if(!this._size.equals(t)){var n=this._type,r=t.width,s=t.height;n==="rectangle"?this._radius.set(vt.min(this._radius,t.divide(2).abs())):n==="circle"?(r=s=(r+s)/2,this._radius=r/2):n==="ellipse"&&this._radius._set(r/2,s/2),this._size._set(r,s),this._changed(9)}},getRadius:function(){var t=this._radius;return this._type==="circle"?t:new Gt(t.width,t.height,this,"setRadius")},setRadius:function(t){var n=this._type;if(n==="circle"){if(t===this._radius)return;var r=t*2;this._radius=t,this._size._set(r,r)}else if(t=vt.read(arguments),!this._radius)this._radius=t.clone();else{if(this._radius.equals(t))return;if(this._radius.set(t),n==="rectangle"){var r=vt.max(this._size,t.multiply(2));this._size.set(r)}else n==="ellipse"&&this._size._set(t.width*2,t.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var n=new ne[z.capitalize(this._type)]({center:new k,size:this._size,radius:this._radius,insert:!1});return n.copyAttributes(this),Xt.settings.applyMatrix&&n.setApplyMatrix(!0),(t===T||t)&&n.insertAbove(this),n},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,n,r,s){var a=this._style,o=a.hasFill(),l=a.hasStroke(),f=n.dontFinish||n.clip,h=!s;if(o||l||f){var c=this._type,p=this._radius,w=c==="circle";if(n.dontStart||t.beginPath(),h&&w)t.arc(0,0,p,0,Math.PI*2,!0);else{var v=w?p:p.width,g=w?p:p.height,I=this._size,y=I.width,A=I.height;if(h&&c==="rectangle"&&v===0&&g===0)t.rect(-y/2,-A/2,y,A);else{var m=y/2,b=A/2,_=1-.5522847498307936,x=v*_,C=g*_,O=[-m,-b+g,-m,-b+C,-m+x,-b,-m+v,-b,m-v,-b,m-x,-b,m,-b+C,m,-b+g,m,b-g,m,b-C,m-x,b,m-v,b,-m+v,b,-m+x,b,-m,b-C,-m,b-g];s&&s.transform(O,O,32),t.moveTo(O[0],O[1]),t.bezierCurveTo(O[2],O[3],O[4],O[5],O[6],O[7]),m!==v&&t.lineTo(O[8],O[9]),t.bezierCurveTo(O[10],O[11],O[12],O[13],O[14],O[15]),b!==g&&t.lineTo(O[16],O[17]),t.bezierCurveTo(O[18],O[19],O[20],O[21],O[22],O[23]),m!==v&&t.lineTo(O[24],O[25]),t.bezierCurveTo(O[26],O[27],O[28],O[29],O[30],O[31])}}t.closePath()}!f&&(o||l)&&(this._setStyles(t,n,r),o&&(t.fill(a.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),l&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,n){var r=new xt(this._size).setCenter(0,0),s=this._style,a=n.stroke&&s.hasStroke()&&s.getStrokeWidth();return t&&(r=t._transformBounds(r)),a?r.expand(ne._getStrokePadding(a,this._getStrokeMatrix(t,n))):r}},new function(){function t(r,s,a){var o=r._radius;if(!o.isZero())for(var l=r._size.divide(2),f=1;f<=4;f++){var h=new k(f>1&&f<4?-1:1,f>2?-1:1),c=h.multiply(l),p=c.subtract(h.multiply(o)),w=new xt(a?c.add(h.multiply(a)):c,p);if(w.contains(s))return{point:p,quadrant:f}}}function n(r,s,a,o){var l=r.divide(s);return(!o||l.isInQuadrant(o))&&l.subtract(l.normalize()).multiply(s).divide(a).length<=1}return{_contains:function r(s){if(this._type==="rectangle"){var a=t(this,s);return a?s.subtract(a.point).divide(this._radius).getLength()<=1:r.base.call(this,s)}else return s.divide(this.size).getLength()<=.5},_hitTestSelf:function r(s,a,o,l){var f=!1,h=this._style,c=a.stroke&&h.hasStroke(),p=a.fill&&h.hasFill();if(c||p){var w=this._type,v=this._radius,g=c?h.getStrokeWidth()/2:0,I=a._tolerancePadding.add(ne._getStrokePadding(g,!h.getStrokeScaling()&&l));if(w==="rectangle"){var y=I.multiply(2),A=t(this,s,y);if(A)f=n(s.subtract(A.point),v,I,A.quadrant);else{var m=new xt(this._size).setCenter(0,0),b=m.expand(y),_=m.expand(y.negate());f=b._containsPoint(s)&&!_._containsPoint(s)}}else f=n(s,v,I)}return f?new pe(c?"stroke":"fill",this):r.base.apply(this,arguments)}}},{statics:new function(){function t(n,r,s,a,o){var l=z.create(Qt.prototype);return l._type=n,l._size=s,l._radius=a,l._initialize(z.getNamed(o),r),l}return{Circle:function(){var n=arguments,r=k.readNamed(n,"center"),s=z.readNamed(n,"radius");return t("circle",r,new vt(s*2),s,n)},Rectangle:function(){var n=arguments,r=xt.readNamed(n,"rectangle"),s=vt.min(vt.readNamed(n,"radius"),r.getSize(!0).divide(2));return t("rectangle",r.getCenter(!0),r.getSize(!0),s,n)},Ellipse:function(){var n=arguments,r=Qt._readEllipse(n),s=r.radius;return t("ellipse",r.center,s.multiply(2),s,n)},_readEllipse:function(n){var r,s;if(z.hasNamed(n,"radius"))r=k.readNamed(n,"center"),s=vt.readNamed(n,"radius");else{var a=xt.readNamed(n,"rectangle");r=a.getCenter(!0),s=a.getSize(!0).divide(2)}return{center:r,radius:s}}}}}),ve=Ct.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(n,r){if(!this._initialize(n,r!==T&&k.read(arguments))){var s,a=typeof n,o=a==="string"?ct.getElementById(n):a==="object"?n:null;if(o&&o!==Ct.NO_INSERT){if(o.getContext||o.naturalHeight!=null)s=o;else if(o){var l=vt.read(arguments);l.isZero()||(s=oe.getCanvas(l))}}s?this.setImage(s):this.setSource(n)}this._size||(this._size=new vt,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var n=t._image,r=t._canvas;if(n)this._setImage(n);else if(r){var s=oe.getCanvas(t._size);s.getContext("2d").drawImage(r,0,0),this._setImage(s)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new Gt(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,n){var r=vt.read(arguments);if(r.equals(this._size))n&&this.clear();else if(r.width>0&&r.height>0){var s=!n&&this.getElement();this._setImage(oe.getCanvas(r)),s&&this.getContext(!0).drawImage(s,0,0,r.width,r.height)}else this._canvas&&oe.release(this._canvas),this._size=r.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||t.width===0&&t.height===0},getResolution:function(){var t=this._matrix,n=new k(0,0).transform(t),r=new k(1,0).transform(t).subtract(n),s=new k(0,1).transform(t).subtract(n);return new vt(72/r.getLength(),72/s.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var n=this;function r(s){var a=n.getView(),o=s&&s.type||"load";a&&n.responds(o)&&(Xt=a._scope,n.emit(o,new Ni(s)))}this._setImage(t),this._loaded?setTimeout(r,0):t&&ze.add(t,{load:function(s){n._setImage(t),r(s)},error:r})},_setImage:function(t){this._canvas&&oe.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new vt(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=oe.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch{oe.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var n=new mt.Image,r=this._crossOrigin;r&&(n.crossOrigin=r),t&&(n.src=t),this.setImage(n)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var n=this._image;n&&(n.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=typeof t=="string"?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=xt.read(arguments),n=oe.getContext(t.getSize());return n.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),n.canvas},getSubRaster:function(){var t=xt.read(arguments),n=new ve(Ct.NO_INSERT);return n._setImage(this.getSubCanvas(t)),n.translate(t.getCenter().subtract(this.getSize().divide(2))),n._matrix.prepend(this._matrix),n.insertAbove(this),n},toDataURL:function(){var t=this._image,n=t&&t.src;if(/^data:/.test(n))return n;var r=this.getCanvas();return r?r.toDataURL.apply(r,arguments):null},drawImage:function(t){var n=k.read(arguments,1);this.getContext(!0).drawImage(t,n.x,n.y)},getAverageColor:function(t){var n,r;if(t?t instanceof xe?(r=t,n=t.getBounds()):typeof t=="object"&&("width"in t?n=new xt(t):"x"in t&&(n=new xt(t.x-.5,t.y-.5,1,1))):n=this.getBounds(),!n)return null;var s=32,a=Math.min(n.width,s),o=Math.min(n.height,s),l=ve._sampleContext;l?l.clearRect(0,0,s+1,s+1):l=ve._sampleContext=oe.getContext(new vt(s)),l.save();var f=new Ht().scale(a/n.width,o/n.height).translate(-n.x,-n.y);f.applyToContext(l),r&&r.draw(l,new z({clip:!0,matrices:[f]})),this._matrix.applyToContext(l);var h=this.getElement(),c=this._size;h&&l.drawImage(h,-c.width/2,-c.height/2),l.restore();for(var p=l.getImageData(.5,.5,Math.ceil(a),Math.ceil(o)).data,w=[0,0,0],v=0,g=0,I=p.length;g<I;g+=4){var y=p[g+3];v+=y,y/=255,w[0]+=p[g]*y,w[1]+=p[g+1]*y,w[2]+=p[g+2]*y}for(var g=0;g<3;g++)w[g]/=v;return v?be.read(w):null},getPixel:function(){var t=k.read(arguments),n=this.getContext().getImageData(t.x,t.y,1,1).data;return new be("rgb",[n[0]/255,n[1]/255,n[2]/255],n[3]/255)},setPixel:function(){var t=arguments,n=k.read(t),r=be.read(t),s=r._convert("rgb"),a=r._alpha,o=this.getContext(!0),l=o.createImageData(1,1),f=l.data;f[0]=s[0]*255,f[1]=s[1]*255,f[2]=s[2]*255,f[3]=a!=null?a*255:255,o.putImageData(l,n.x,n.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=vt.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=xt.read(arguments);return t.isEmpty()&&(t=new xt(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var n=k.read(arguments,1);this.getContext(!0).putImageData(t,n.x,n.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,n){var r=new xt(this._size).setCenter(0,0);return t?t._transformBounds(r):r},_hitTestSelf:function(t){if(this._contains(t)){var n=this;return new pe("pixel",n,{offset:t.add(n._size.divide(2)).round(),color:{get:function(){return n.getPixel(this.offset)}}})}},_draw:function(t,n,r){var s=this.getElement();if(s&&s.width>0&&s.height>0){t.globalAlpha=J.clamp(this._opacity,0,1),this._setStyles(t,n,r);var a=this._smoothing,o=a==="off";me.setPrefixed(t,o?"imageSmoothingEnabled":"imageSmoothingQuality",o?!1:a),t.drawImage(s,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ce=Ct.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(n,r){this._initialize(n,r!==T&&k.read(arguments,1))||this.setDefinition(n instanceof Ie?n:new Ie(n))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,n){var r=this._definition._item;return r._getCachedBounds(r._matrix.prepended(t),n)},_hitTestSelf:function(t,n,r){var s=n.extend({all:!1}),a=this._definition._item._hitTest(t,s,r);return a&&(a.item=this),a},_draw:function(t,n){this._definition._item.draw(t,n)}}),Ie=z.extend({_class:"SymbolDefinition",initialize:function(n,r){this._id=ut.get(),this.project=Xt.project,n&&this.setItem(n,r)},_serialize:function(t,n){return n.add(this,function(){return z.serialize([this._class,this._item],t,!1,n)})},_changed:function(t){t&8&&Ct._clearBoundsCache(this),t&1&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,n){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),n||t.setPosition(new k),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new ce(this,t)},clone:function(){return new Ie(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),pe=z.extend({_class:"HitResult",initialize:function(n,r,s){this.type=n,this.item=r,s&&this.inject(s)},statics:{getOptions:function(t){var n=t&&z.read(t);return new z({type:null,tolerance:Xt.settings.hitTolerance,fill:!n,stroke:!n,segments:!n,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},n)}}}),Lt=z.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(n,r,s,a,o,l){var f=arguments.length,h,c,p,w;f>0&&(n==null||typeof n=="object"?f===1&&n&&"point"in n?(h=n.point,c=n.handleIn,p=n.handleOut,w=n.selection):(h=n,c=r,p=s,w=a):(h=[n,r],c=s!==T?[s,a]:null,p=o!==T?[o,l]:null)),new pn(h,this,"_point"),new pn(c,this,"_handleIn"),new pn(p,this,"_handleOut"),w&&this.setSelection(w)},_serialize:function(t,n){var r=this._point,s=this._selection,a=s||this.hasHandles()?[r,this._handleIn,this._handleOut]:r;return s&&a.push(s),z.serialize(a,t,!0,n)},_changed:function(t){var n=this._path;if(n){var r=n._curves,s=this._index,a;r&&((!t||t===this._point||t===this._handleIn)&&(a=s>0?r[s-1]:n._closed?r[r.length-1]:null)&&a._changed(),(!t||t===this._point||t===this._handleOut)&&(a=r[s])&&a._changed()),n._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(k.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(k.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(k.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,n=this._handleOut;return!t.isZero()&&!n.isZero()&&t.isCollinear(n)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var n=this._selection,r=this._path;this._selection=t=t||0,r&&t!==n&&(r._updateSelection(this,n,t),r._changed(257))},_changeSelection:function(t,n){var r=this._selection;this.setSelection(n?r|t:r&~t)},isSelected:function(){return!!(this._selection&7)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==T?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,n=this._index;return t?(n>0&&!t._closed&&n===t._segments.length-1&&n--,t.getCurves()[n]||null):null},getLocation:function(){var t=this.getCurve();return t?new Re(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,n,r){var s=t||{},a=s.type,o=s.factor,l=this.getPrevious(),f=this.getNext(),h=(l||this)._point,c=this._point,p=(f||this)._point,w=h.getDistance(c),v=c.getDistance(p);if(!a||a==="catmull-rom"){var g=o===T?.5:o,I=Math.pow(w,g),y=I*I,A=Math.pow(v,g),m=A*A;if(!n&&l){var b=2*m+3*A*I+y,_=3*A*(A+I);this.setHandleIn(_!==0?new k((m*h._x+b*c._x-y*p._x)/_-c._x,(m*h._y+b*c._y-y*p._y)/_-c._y):new k)}if(!r&&f){var b=2*y+3*I*A+m,_=3*I*(I+A);this.setHandleOut(_!==0?new k((y*p._x+b*c._x-m*h._x)/_-c._x,(y*p._y+b*c._y-m*h._y)/_-c._y):new k)}}else if(a==="geometric"){if(l&&f){var x=h.subtract(p),C=o===T?.4:o,O=C*w/(w+v);n||this.setHandleIn(x.multiply(O)),r||this.setHandleOut(x.multiply(O-C))}}else throw new Error("Smoothing method '"+a+"' not supported.")},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,n=this._handleOut,r=t.clone();t.set(n),n.set(r)},reversed:function(){return new Lt(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Lt(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,n,r){var s=1-r,a=r,o=t._point,l=n._point,f=t._handleIn,h=n._handleIn,c=n._handleOut,p=t._handleOut;this._point._set(s*o._x+a*l._x,s*o._y+a*l._y,!0),this._handleIn._set(s*f._x+a*h._x,s*f._y+a*h._y,!0),this._handleOut._set(s*p._x+a*c._x,s*p._y+a*c._y,!0),this._changed()},_transformCoordinates:function(t,n,r){var s=this._point,a=!r||!this._handleIn.isZero()?this._handleIn:null,o=!r||!this._handleOut.isZero()?this._handleOut:null,l=s._x,f=s._y,h=2;return n[0]=l,n[1]=f,a&&(n[h++]=a._x+l,n[h++]=a._y+f),o&&(n[h++]=o._x+l,n[h++]=o._y+f),t&&(t._transformCoordinates(n,n,h/2),l=n[0],f=n[1],r?(s._x=l,s._y=f,h=2,a&&(a._x=n[h++]-l,a._y=n[h++]-f),o&&(o._x=n[h++]-l,o._y=n[h++]-f)):(a||(n[h++]=l,n[h++]=f),o||(n[h++]=l,n[h++]=f))),n}}),pn=k.extend({initialize:function(n,r,s){var a,o,l;if(!n)a=o=0;else if((a=n[0])!==T)o=n[1];else{var f=n;(a=f.x)===T&&(f=k.read(arguments),a=f.x),o=f.y,l=f.selected}this._x=a,this._y=o,this._owner=r,r[s]=this,l&&this.setSelected(!0)},_set:function(t,n){return this._x=t,this._y=n,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=J.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),gt=z.extend({_class:"Curve",beans:!0,initialize:function(n,r,s,a,o,l,f,h){var c=arguments.length,p,w,v,g,I,y;c===3?(this._path=n,p=r,w=s):c?c===1?"segment1"in n?(p=new Lt(n.segment1),w=new Lt(n.segment2)):"point1"in n?(v=n.point1,I=n.handle1,y=n.handle2,g=n.point2):Array.isArray(n)&&(v=[n[0],n[1]],g=[n[6],n[7]],I=[n[2]-n[0],n[3]-n[1]],y=[n[4]-n[6],n[5]-n[7]]):c===2?(p=new Lt(n),w=new Lt(r)):c===4?(v=n,I=r,y=s,g=a):c===8&&(v=[n,r],g=[f,h],I=[s-n,a-r],y=[o-f,l-h]):(p=new Lt,w=new Lt),this._segment1=p||new Lt(v,null,I),this._segment2=w||new Lt(g,y,null)},_serialize:function(t,n){return z.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,n)},_changed:function(){this._length=this._bounds=T},clone:function(){return new gt(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return gt.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var n=this._segment2,r=n._handleOut;t=n.remove(),t&&this._segment1._handleOut.set(r)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(k.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(k.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(k.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(k.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return gt.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),n=[],r=0;r<8;r+=2)n.push(new k(t[r],t[r+1]));return n}},{getLength:function(){return this._length==null&&(this._length=gt.getLength(this.getValues(),0,1)),this._length},getArea:function(){return gt.getArea(this.getValues())},getLine:function(){return new bt(this._segment1._point,this._segment2._point)},getPart:function(t,n){return new gt(gt.getPart(this.getValues(),t,n))},getPartLength:function(t,n){return gt.getLength(this.getValues(),t,n)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,n){var r=1e-8,s=1-r,a=null;if(t>=r&&t<=s){var o=gt.subdivide(this.getValues(),t),l=o[0],f=o[1],h=n||this.hasHandles(),c=this._segment1,p=this._segment2,w=this._path;h&&(c._handleOut._set(l[2]-l[0],l[3]-l[1]),p._handleIn._set(f[4]-f[6],f[5]-f[7]));var v=l[6],g=l[7],I=new Lt(new k(v,g),h&&new k(l[4]-v,l[5]-g),h&&new k(f[2]-v,f[3]-g));w?(w.insert(c._index+1,I),a=this.getNext()):(this._segment2=I,this._changed(),a=new gt(I,p))}return a},splitAt:function(t){var n=this._path;return n?n.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,n){return this.divideAtTime(t===T?.5:n?t:this.getTimeAt(t))},split:function(t,n){return this.splitAtTime(t===T?.5:n?t:this.getTimeAt(t))},reversed:function(){return new gt(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,n,r,s){var a=t._point,o=t._handleOut,l=n._handleIn,f=n._point,h=a.x,c=a.y,p=f.x,w=f.y,v=s?[h,c,h,c,p,w,p,w]:[h,c,h+o._x,c+o._y,p+l._x,w+l._y,p,w];return r&&r._transformCoordinates(v,v,4),v},subdivide:function(t,n){var r=t[0],s=t[1],a=t[2],o=t[3],l=t[4],f=t[5],h=t[6],c=t[7];n===T&&(n=.5);var p=1-n,w=p*r+n*a,v=p*s+n*o,g=p*a+n*l,I=p*o+n*f,y=p*l+n*h,A=p*f+n*c,m=p*w+n*g,b=p*v+n*I,_=p*g+n*y,x=p*I+n*A,C=p*m+n*_,O=p*b+n*x;return[[r,s,w,v,m,b,C,O],[C,O,_,x,y,A,h,c]]},getMonoCurves:function(t,n){var r=[],s=n?0:1,a=t[s+0],o=t[s+2],l=t[s+4],f=t[s+6];if(a>=o==o>=l&&o>=l==l>=f||gt.isStraight(t))r.push(t);else{var h=3*(o-l)-a+f,c=2*(a+l)-4*o,p=o-a,w=1e-8,v=1-w,g=[],I=J.solveQuadratic(h,c,p,g,w,v);if(!I)r.push(t);else{g.sort();var y=g[0],A=gt.subdivide(t,y);r.push(A[0]),I>1&&(y=(g[1]-y)/(1-y),A=gt.subdivide(A[1],y),r.push(A[0])),r.push(A[1])}}return r},solveCubic:function(t,n,r,s,a,o){var l=t[n],f=t[n+2],h=t[n+4],c=t[n+6],p=0;if(!(l<r&&c<r&&f<r&&h<r||l>r&&c>r&&f>r&&h>r)){var w=3*(f-l),v=3*(h-f)-w,g=c-l-w-v;p=J.solveCubic(g,v,w,l-r,s,a,o)}return p},getTimeOf:function(t,n){var r=new k(t[0],t[1]),s=new k(t[6],t[7]),a=1e-12,o=1e-7,l=n.isClose(r,a)?0:n.isClose(s,a)?1:null;if(l===null)for(var f=[n.x,n.y],h=[],c=0;c<2;c++)for(var p=gt.solveCubic(t,c,f[c],h,0,1),w=0;w<p;w++){var v=h[w];if(n.isClose(gt.getPoint(t,v),o))return v}return n.isClose(r,o)?0:n.isClose(s,o)?1:null},getNearestTime:function(t,n){if(gt.isStraight(t)){var r=t[0],s=t[1],a=t[6],o=t[7],l=a-r,f=o-s,h=l*l+f*f;if(h===0)return 0;var c=((n.x-r)*l+(n.y-s)*f)/h;return c<1e-12?0:c>.999999999999?1:gt.getTimeOf(t,new k(r+c*l,s+c*f))}var p=100,w=1/0,v=0;function g(A){if(A>=0&&A<=1){var m=n.getDistance(gt.getPoint(t,A),!0);if(m<w)return w=m,v=A,!0}}for(var I=0;I<=p;I++)g(I/p);for(var y=1/(p*2);y>1e-8;)!g(v-y)&&!g(v+y)&&(y/=2);return v},getPart:function(t,n,r){var s=n>r;if(s){var a=n;n=r,r=a}return n>0&&(t=gt.subdivide(t,n)[1]),r<1&&(t=gt.subdivide(t,(r-n)/(1-n))[0]),s?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,n){var r=t[0],s=t[1],a=t[2],o=t[3],l=t[4],f=t[5],h=t[6],c=t[7],p=3*a-2*r-h,w=3*o-2*s-c,v=3*l-2*h-r,g=3*f-2*c-s;return Math.max(p*p,v*v)+Math.max(w*w,g*g)<=16*n*n},getArea:function(t){var n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],f=t[6],h=t[7];return 3*((h-r)*(s+o)-(f-n)*(a+l)+a*(n-o)-s*(r-l)+h*(o+n/3)-f*(l+r/3))/20},getBounds:function(t){for(var n=t.slice(0,2),r=n.slice(),s=[0,0],a=0;a<2;a++)gt._addBounds(t[a],t[a+2],t[a+4],t[a+6],a,0,n,r,s);return new xt(n[0],n[1],r[0]-n[0],r[1]-n[1])},_addBounds:function(t,n,r,s,a,o,l,f,h){function c(C,O){var S=C-O,R=C+O;S<l[a]&&(l[a]=S),R>f[a]&&(f[a]=R)}o/=2;var p=l[a]+o,w=f[a]-o;if(t<p||n<p||r<p||s<p||t>w||n>w||r>w||s>w)if(n<t!=n<s&&r<t!=r<s)c(t,0),c(s,0);else{var v=3*(n-r)-t+s,g=2*(t+r)-4*n,I=n-t,y=J.solveQuadratic(v,g,I,h),A=1e-8,m=1-A;c(s,0);for(var b=0;b<y;b++){var _=h[b],x=1-_;A<=_&&_<=m&&c(x*x*x*t+3*x*x*_*n+3*x*_*_*r+_*_*_*s,o)}}}}},z.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var n=this._bounds[t];return n||(n=this._bounds[t]=ne[t]([this._segment1,this._segment2],!1,this._path)),n.clone()}},{}),z.each({isStraight:function(t,n,r,s){if(n.isZero()&&r.isZero())return!0;var a=s.subtract(t);if(a.isZero())return!1;if(a.isCollinear(n)&&a.isCollinear(r)){var o=new bt(t,s),l=1e-7;if(o.getDistance(t.add(n))<l&&o.getDistance(s.add(r))<l){var f=a.dot(a),h=a.dot(n)/f,c=a.dot(r)/f;return h>=0&&h<=1&&c<=0&&c>=-1}}return!1},isLinear:function(t,n,r,s){var a=s.subtract(t).divide(3);return n.equals(a)&&r.negate().equals(a)}},function(t,n){this[n]=function(r){var s=this._segment1,a=this._segment2;return t(s._point,s._handleOut,a._handleIn,a._point,r)},this.statics[n]=function(r,s){var a=r[0],o=r[1],l=r[6],f=r[7];return t(new k(a,o),new k(r[2]-a,r[3]-o),new k(r[4]-l,r[5]-f),new k(l,f),s)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,n){return this.getLocationAtTime(n?t:this.getTimeAt(t))},getLocationAtTime:function(t){return t!=null&&t>=0&&t<=1?new Re(this,t):null},getTimeAt:function(t,n){return gt.getTimeAt(this.getValues(),t,n)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=k.read(arguments);return t.isZero()?[]:gt.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(k.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return gt.getTimeOf(this.getValues(),k.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=k.read(arguments),n=this.getValues(),r=gt.getNearestTime(n,t),s=gt.getPoint(n,r);return new Re(this,r,s,null,t.getDistance(s))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return z.each(t,function(n){this[n+"At"]=function(r,s){var a=this.getValues();return gt[n](a,s?r:gt.getTimeAt(a,r))},this[n+"AtTime"]=function(r){return gt[n](this.getValues(),r)}},{statics:{_evaluateMethods:t}})},new function(){function t(s){var a=s[0],o=s[1],l=s[2],f=s[3],h=s[4],c=s[5],p=s[6],w=s[7],v=9*(l-h)+3*(p-a),g=6*(a+h)-12*l,I=3*(l-a),y=9*(f-c)+3*(w-o),A=6*(o+c)-12*f,m=3*(f-o);return function(b){var _=(v*b+g)*b+I,x=(y*b+A)*b+m;return Math.sqrt(_*_+x*x)}}function n(s,a){return Math.max(2,Math.min(16,Math.ceil(Math.abs(a-s)*32)))}function r(s,a,o,l){if(a==null||a<0||a>1)return null;var f=s[0],h=s[1],c=s[2],p=s[3],w=s[4],v=s[5],g=s[6],I=s[7],y=J.isZero;y(c-f)&&y(p-h)&&(c=f,p=h),y(w-g)&&y(v-I)&&(w=g,v=I);var A=3*(c-f),m=3*(w-c)-A,b=g-f-A-m,_=3*(p-h),x=3*(v-p)-_,C=I-h-_-x,O,S;if(o===0)O=a===0?f:a===1?g:((b*a+m)*a+A)*a+f,S=a===0?h:a===1?I:((C*a+x)*a+_)*a+h;else{var R=1e-8,F=1-R;if(a<R?(O=A,S=_):a>F?(O=3*(g-w),S=3*(I-v)):(O=(3*b*a+2*m)*a+A,S=(3*C*a+2*x)*a+_),l){O===0&&S===0&&(a<R||a>F)&&(O=w-c,S=v-p);var B=Math.sqrt(O*O+S*S);B&&(O/=B,S/=B)}if(o===3){var w=6*b*a+2*m,v=6*C*a+2*x,W=Math.pow(O*O+S*S,3/2);O=W!==0?(O*v-S*w)/W:0,S=0}}return o===2?new k(S,-O):new k(O,S)}return{statics:{classify:function(s){var a=s[0],o=s[1],l=s[2],f=s[3],h=s[4],c=s[5],p=s[6],w=s[7],v=a*(w-c)+o*(h-p)+p*c-w*h,g=l*(o-w)+f*(p-a)+a*w-o*p,I=h*(f-o)+c*(a-l)+l*o-f*a,y=3*I,A=y-g,m=A-g+v,b=Math.sqrt(m*m+A*A+y*y),_=b!==0?1/b:0,x=J.isZero,C="serpentine";m*=_,A*=_,y*=_;function O(B,W,N){var U=W!==T,H=U&&W>0&&W<1,G=U&&N>0&&N<1;return U&&(!(H||G)||B==="loop"&&!(H&&G))&&(B="arch",H=G=!1),{type:B,roots:H||G?H&&G?W<N?[W,N]:[N,W]:[H?W:N]:null}}if(x(m))return x(A)?O(x(y)?"line":"quadratic"):O(C,y/(3*A));var S=3*A*A-4*m*y;if(x(S))return O("cusp",A/(2*m));var R=S>0?Math.sqrt(S/3):Math.sqrt(-S),F=2*m;return O(S>0?C:"loop",(A+R)/F,(A-R)/F)},getLength:function(s,a,o,l){if(a===T&&(a=0),o===T&&(o=1),gt.isStraight(s)){var f=s;o<1&&(f=gt.subdivide(f,o)[0],a/=o),a>0&&(f=gt.subdivide(f,a)[1]);var h=f[6]-f[0],c=f[7]-f[1];return Math.sqrt(h*h+c*c)}return J.integrate(l||t(s),a,o,n(a,o))},getTimeAt:function(s,a,o){if(o===T&&(o=a<0?1:0),a===0)return o;var l=Math.abs,f=1e-12,h=a>0,c=h?o:0,p=h?1:o,w=t(s),v=gt.getLength(s,c,p,w),g=l(a)-v;if(l(g)<f)return h?p:c;if(g>f)return null;var I=a/v,y=0;function A(m){return y+=J.integrate(w,o,m,n(o,m)),o=m,y-a}return J.findRoot(A,w,o+I,c,p,32,1e-12)},getPoint:function(s,a){return r(s,a,0,!1)},getTangent:function(s,a){return r(s,a,1,!0)},getWeightedTangent:function(s,a){return r(s,a,1,!1)},getNormal:function(s,a){return r(s,a,2,!0)},getWeightedNormal:function(s,a){return r(s,a,2,!1)},getCurvature:function(s,a){return r(s,a,3,!1).x},getPeaks:function(s){var a=s[0],o=s[1],l=s[2],f=s[3],h=s[4],c=s[5],p=s[6],w=s[7],v=-a+3*l-3*h+p,g=3*a-6*l+3*h,I=-3*a+3*l,y=-o+3*f-3*c+w,A=3*o-6*f+3*c,m=-3*o+3*f,b=1e-8,_=1-b,x=[];return J.solveCubic(9*(v*v+y*y),9*(v*g+A*y),2*(g*g+A*A)+3*(I*v+m*y),I*g+A*m,x,b,_),x.sort()}}}},new function(){function t(g,I,y,A,m,b,_){var x=!_&&y.getPrevious()===m,C=!_&&y!==m&&y.getNext()===m,O=1e-8,S=1-O;if(A!==null&&A>=(x?O:0)&&A<=(C?S:1)&&b!==null&&b>=(C?O:0)&&b<=(x?S:1)){var R=new Re(y,A,null,_),F=new Re(m,b,null,_);R._intersection=F,F._intersection=R,(!I||I(R))&&Re.insert(g,R,!0)}}function n(g,I,y,A,m,b,_,x,C,O,S,R,F){if(++C>=4096||++x>=40)return C;var B=1e-9,W=I[0],N=I[1],U=I[6],H=I[7],G=bt.getSignedDistance,Z=G(W,N,U,H,I[2],I[3]),$=G(W,N,U,H,I[4],I[5]),ot=Z*$>0?3/4:4/9,_t=ot*Math.min(0,Z,$),pt=ot*Math.max(0,Z,$),It=G(W,N,U,H,g[0],g[1]),et=G(W,N,U,H,g[2],g[3]),rt=G(W,N,U,H,g[4],g[5]),yt=G(W,N,U,H,g[6],g[7]),Tt=r(It,et,rt,yt),Pt=Tt[0],zt=Tt[1],kt,Bt;if(Z===0&&$===0&&It===0&&et===0&&rt===0&&yt===0||(kt=s(Pt,zt,_t,pt))==null||(Bt=s(Pt.reverse(),zt.reverse(),_t,pt))==null)return C;var Kt=O+(S-O)*kt,Ut=O+(S-O)*Bt;if(Math.max(F-R,Ut-Kt)<B){var ke=(Kt+Ut)/2,Oe=(R+F)/2;t(m,b,_?A:y,_?Oe:ke,_?y:A,_?ke:Oe)}else{g=gt.getPart(g,kt,Bt);var qe=F-R;if(Bt-kt>.8)if(Ut-Kt>qe){var Ae=gt.subdivide(g,.5),ke=(Kt+Ut)/2;C=n(I,Ae[0],A,y,m,b,!_,x,C,R,F,Kt,ke),C=n(I,Ae[1],A,y,m,b,!_,x,C,R,F,ke,Ut)}else{var Ae=gt.subdivide(I,.5),Oe=(R+F)/2;C=n(Ae[0],g,A,y,m,b,!_,x,C,R,Oe,Kt,Ut),C=n(Ae[1],g,A,y,m,b,!_,x,C,Oe,F,Kt,Ut)}else qe===0||qe>=B?C=n(I,g,A,y,m,b,!_,x,C,R,F,Kt,Ut):C=n(g,I,y,A,m,b,_,x,C,Kt,Ut,R,F)}return C}function r(g,I,y,A){var m=[0,g],b=[1/3,I],_=[2/3,y],x=[1,A],C=I-(2*g+A)/3,O=y-(g+2*A)/3,S;if(C*O<0)S=[[m,b,x],[m,_,x]];else{var R=C/O;S=[R>=2?[m,b,x]:R<=.5?[m,_,x]:[m,b,_,x],[m,x]]}return(C||O)<0?S.reverse():S}function s(g,I,y,A){return g[0][1]<y?a(g,!0,y):I[0][1]>A?a(I,!1,A):g[0][0]}function a(g,I,y){for(var A=g[0][0],m=g[0][1],b=1,_=g.length;b<_;b++){var x=g[b][0],C=g[b][1];if(I?C>=y:C<=y)return C===y?x:A+(y-m)*(x-A)/(C-m);A=x,m=C}return null}function o(g,I,y,A,m){var b=J.isZero;if(b(A)&&b(m)){var _=gt.getTimeOf(g,new k(I,y));return _===null?[]:[_]}for(var x=Math.atan2(-m,A),C=Math.sin(x),O=Math.cos(x),S=[],R=[],F=0;F<8;F+=2){var B=g[F]-I,W=g[F+1]-y;S.push(B*O-W*C,B*C+W*O)}return gt.solveCubic(S,1,0,R,0,1),R}function l(g,I,y,A,m,b,_){for(var x=I[0],C=I[1],O=I[6],S=I[7],R=o(g,x,C,O-x,S-C),F=0,B=R.length;F<B;F++){var W=R[F],N=gt.getPoint(g,W),U=gt.getTimeOf(I,N);U!==null&&t(m,b,_?A:y,_?U:W,_?y:A,_?W:U)}}function f(g,I,y,A,m,b){var _=bt.intersect(g[0],g[1],g[6],g[7],I[0],I[1],I[6],I[7]);_&&t(m,b,y,gt.getTimeOf(g,_),A,gt.getTimeOf(I,_))}function h(g,I,y,A,m,b){var _=1e-12,x=Math.min,C=Math.max;if(C(g[0],g[2],g[4],g[6])+_>x(I[0],I[2],I[4],I[6])&&x(g[0],g[2],g[4],g[6])-_<C(I[0],I[2],I[4],I[6])&&C(g[1],g[3],g[5],g[7])+_>x(I[1],I[3],I[5],I[7])&&x(g[1],g[3],g[5],g[7])-_<C(I[1],I[3],I[5],I[7])){var O=w(g,I);if(O)for(var S=0;S<2;S++){var R=O[S];t(m,b,y,R[0],A,R[1],!0)}else{var F=gt.isStraight(g),B=gt.isStraight(I),W=F&&B,N=F&&!B,U=m.length;if((W?f:F||B?l:n)(N?I:g,N?g:I,N?A:y,N?y:A,m,b,N,0,0,0,1,0,1),!W||m.length===U)for(var S=0;S<4;S++){var H=S>>1,G=S&1,Z=H*6,$=G*6,ot=new k(g[Z],g[Z+1]),_t=new k(I[$],I[$+1]);ot.isClose(_t,_)&&t(m,b,y,H,A,G)}}}return m}function c(g,I,y,A){var m=gt.classify(g);if(m.type==="loop"){var b=m.roots;t(y,A,I,b[0],I,b[1])}return y}function p(g,I,y,A,m,b){var _=1e-7,x=!I;x&&(I=g);for(var C=g.length,O=I.length,S=new Array(C),R=x?S:new Array(O),F=[],B=0;B<C;B++)S[B]=g[B].getValues(A);if(!x)for(var B=0;B<O;B++)R[B]=I[B].getValues(m);for(var W=it.findCurveBoundsCollisions(S,R,_),N=0;N<C;N++){var U=g[N],H=S[N];x&&c(H,U,F,y);var G=W[N];if(G)for(var Z=0;Z<G.length;Z++){if(b&&F.length)return F;var $=G[Z];if(!x||$>N){var ot=I[$],_t=R[$];h(H,_t,U,ot,F,y)}}}return F}function w(g,I){function y(yt){var Tt=yt[6]-yt[0],Pt=yt[7]-yt[1];return Tt*Tt+Pt*Pt}var A=Math.abs,m=bt.getDistance,b=1e-8,_=1e-7,x=gt.isStraight(g),C=gt.isStraight(I),O=x&&C,S=y(g)<y(I),R=S?I:g,F=S?g:I,B=R[0],W=R[1],N=R[6]-B,U=R[7]-W;if(m(B,W,N,U,F[0],F[1],!0)<_&&m(B,W,N,U,F[6],F[7],!0)<_)!O&&m(B,W,N,U,R[2],R[3],!0)<_&&m(B,W,N,U,R[4],R[5],!0)<_&&m(B,W,N,U,F[2],F[3],!0)<_&&m(B,W,N,U,F[4],F[5],!0)<_&&(x=C=O=!0);else if(O)return null;if(x^C)return null;for(var H=[g,I],G=[],Z=0;Z<4&&G.length<2;Z++){var $=Z&1,ot=$^1,_t=Z>>1,pt=gt.getTimeOf(H[$],new k(H[ot][_t?6:0],H[ot][_t?7:1]));if(pt!=null){var It=$?[_t,pt]:[pt,_t];(!G.length||A(It[0]-G[0][0])>b&&A(It[1]-G[0][1])>b)&&G.push(It)}if(Z>2&&!G.length)break}if(G.length!==2)G=null;else if(!O){var et=gt.getPart(g,G[0][0],G[1][0]),rt=gt.getPart(I,G[0][1],G[1][1]);(A(rt[2]-et[2])>_||A(rt[3]-et[3])>_||A(rt[4]-et[4])>_||A(rt[5]-et[5])>_)&&(G=null)}return G}function v(g,I){var y=g[0],A=g[1],m=g[2],b=g[3],_=g[4],x=g[5],C=g[6],O=g[7],S=I.normalize(),R=S.x,F=S.y,B=3*C-9*_+9*m-3*y,W=3*O-9*x+9*b-3*A,N=6*_-12*m+6*y,U=6*x-12*b+6*A,H=3*m-3*y,G=3*b-3*A,Z=2*B*F-2*W*R,$=[];if(Math.abs(Z)<J.CURVETIME_EPSILON){var ot=B*G-W*H,Z=B*U-W*N;if(Z!=0){var _t=-ot/Z;_t>=0&&_t<=1&&$.push(_t)}}else{var pt=(N*N-4*B*H)*F*F+(-2*N*U+4*W*H+4*B*G)*R*F+(U*U-4*W*G)*R*R,It=N*F-U*R;if(pt>=0&&Z!=0){var et=Math.sqrt(pt),rt=-(It+et)/Z,yt=(-It+et)/Z;rt>=0&&rt<=1&&$.push(rt),yt>=0&&yt<=1&&$.push(yt)}}return $}return{getIntersections:function(g){var I=this.getValues(),y=g&&g!==this&&g.getValues();return y?h(I,y,this,g,[]):c(I,this,[])},statics:{getOverlaps:w,getIntersections:p,getCurveLineIntersections:o,getTimesWithTangent:v}}}),Re=z.extend({_class:"CurveLocation",initialize:function(n,r,s,a,o){if(r>=.99999999){var l=n.getNext();l&&(r=0,n=l)}this._setCurve(n),this._time=r,this._point=s||n.getPointAtTime(r),this._overlap=a,this._distance=o,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var n=t.getCurve();n?this._setCurve(n):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var n=this.getCurve(),r=this.getTime();r===0?t=n._segment1:r===1?t=n._segment2:r!=null&&(t=n.getPartLength(0,r)<n.getPartLength(r,1)?n._segment1:n._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,n=this;t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function r(s){var a=s&&s.getCurve();if(a&&(n._time=a.getTimeOf(n._point))!=null)return n._setCurve(a),a}return this._curve||r(this._segment)||r(this._segment1)||r(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),n=this._time;return t&&n==null?this._time=t.getTimeOf(this._point):n},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(t==null){t=0;var n=this.getPath(),r=this.getIndex();if(n&&r!=null)for(var s=n.getCurves(),a=0;a<r;a++)t+=s[a].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(t==null){var n=this.getCurve(),r=this.getTime();this._curveOffset=t=r!=null&&n&&n.getPartLength(0,r)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),n=t&&t.divideAtTime(this.getTime());return n&&this._setSegment(n._segment1),n},split:function(){var t=this.getCurve(),n=t._path,r=t&&t.splitAtTime(this.getTime());return r&&this._setSegment(n.getLastSegment()),r},equals:function(t,n){var r=this===t;if(!r&&t instanceof Re){var s=this.getCurve(),a=t.getCurve(),o=s._path,l=a._path;if(o===l){var f=Math.abs,h=1e-7,c=f(this.getOffset()-t.getOffset()),p=!n&&this._intersection,w=!n&&t._intersection;r=(c<h||o&&f(o.getLength()-c)<h)&&(!p&&!w||p&&w&&p.equals(w,!0))}}return r},toString:function(){var t=[],n=this.getPoint(),r=ft.instance;n&&t.push("point: "+n);var s=this.getIndex();s!=null&&t.push("index: "+s);var a=this.getTime();return a!=null&&t.push("time: "+r.number(a)),this._distance!=null&&t.push("distance: "+r.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var n=this.getCurve(),r=t.getCurve();return!(n.isStraight()&&r.isStraight()&&n.getLine().intersect(r.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var n=this.getTime(),r=t.getTime(),s=1e-8,a=1-s,o=n>=s&&n<=a,l=r>=s&&r<=a;if(o&&l)return!this.isTouching();var f=this.getCurve(),h=f&&n<s?f.getPrevious():f,c=t.getCurve(),p=c&&r<s?c.getPrevious():c;if(n>a&&(f=f.getNext()),r>a&&(c=c.getNext()),!h||!f||!p||!c)return!1;var w=[];function v(R,F){var B=R.getValues(),W=gt.classify(B).roots||gt.getPeaks(B),N=W.length,U=gt.getLength(B,F&&N?W[N-1]:0,!F&&N?W[0]:1);w.push(N?U:U/32)}function g(R,F,B){return F<B?R>F&&R<B:R>F||R<B}o||(v(h,!0),v(f,!1)),l||(v(p,!0),v(c,!1));var I=this.getPoint(),y=Math.min.apply(Math,w),A=o?f.getTangentAtTime(n):f.getPointAt(y).subtract(I),m=o?A.negate():h.getPointAt(-y).subtract(I),b=l?c.getTangentAtTime(r):c.getPointAt(y).subtract(I),_=l?b.negate():p.getPointAt(-y).subtract(I),x=m.getAngle(),C=A.getAngle(),O=_.getAngle(),S=b.getAngle();return!!(o?g(x,O,S)^g(C,O,S)&&g(x,S,O)^g(C,S,O):g(O,x,C)^g(S,x,C)&&g(O,C,x)^g(S,C,x))},hasOverlap:function(){return!!this._overlap}},z.each(gt._evaluateMethods,function(t){var n=t+"At";this[t]=function(){var r=this.getCurve(),s=this.getTime();return s!=null&&r&&r[n](s,!0)}},{preserve:!0}),new function(){function t(n,r,s){var a=n.length,o=0,l=a-1;function f(I,y){for(var A=I+y;A>=-1&&A<=a;A+=y){var m=n[(A%a+a)%a];if(!r.getPoint().isClose(m.getPoint(),1e-7))break;if(r.equals(m))return m}return null}for(;o<=l;){var h=o+l>>>1,c=n[h],p;if(s&&(p=r.equals(c)?c:f(h,-1)||f(h,1)))return r._overlap&&(p._overlap=p._intersection._overlap=!0),p;var w=r.getPath(),v=c.getPath(),g=w!==v?w._id-v._id:r.getIndex()+r.getTime()-(c.getIndex()+c.getTime());g<0?l=h-1:o=h+1}return n.splice(o,0,r),r}return{statics:{insert:t,expand:function(n){for(var r=n.slice(),s=n.length-1;s>=0;s--)t(r,n[s]._intersection,!1);return r}}}}),xe=Ct.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var n,r,s;if(z.isPlainObject(t)?(r=t.segments,n=t.pathData):Array.isArray(t)?r=t:typeof t=="string"&&(n=t),r){var a=r[0];s=a&&Array.isArray(a[0])}else n&&(s=(n.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(n));var o=s?De:ne;return new o(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var n=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),r,s=!1,a,o,l=new k,f=new k;function h(_,x){var C=+r[_];return s&&(C+=l[x]),C}function c(_){return new k(h(_,"x"),h(_+1,"y"))}this.clear();for(var p=0,w=n&&n.length;p<w;p++){var v=n[p],g=v[0],I=g.toLowerCase();r=v.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var y=r&&r.length;switch(s=g===I,a==="z"&&!/[mz]/.test(I)&&this.moveTo(l),I){case"m":case"l":for(var A=I==="m",m=0;m<y;m+=2)this[A?"moveTo":"lineTo"](l=c(m)),A&&(f=l,A=!1);o=l;break;case"h":case"v":var b=I==="h"?"x":"y";l=l.clone();for(var m=0;m<y;m++)l[b]=h(m,b),this.lineTo(l);o=l;break;case"c":for(var m=0;m<y;m+=6)this.cubicCurveTo(c(m),o=c(m+2),l=c(m+4));break;case"s":for(var m=0;m<y;m+=4)this.cubicCurveTo(/[cs]/.test(a)?l.multiply(2).subtract(o):l,o=c(m),l=c(m+2)),a=I;break;case"q":for(var m=0;m<y;m+=4)this.quadraticCurveTo(o=c(m),l=c(m+2));break;case"t":for(var m=0;m<y;m+=2)this.quadraticCurveTo(o=/[qt]/.test(a)?l.multiply(2).subtract(o):l,l=c(m)),a=I;break;case"a":for(var m=0;m<y;m+=7)this.arcTo(l=c(m+5),new vt(+r[m],+r[m+1]),+r[m+2],+r[m+4],+r[m+3]);break;case"z":this.closePath(1e-12),l=f;break}a=I}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var n=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return n.onPath||!!(this.getFillRule()==="evenodd"?n.windingL&1||n.windingR&1:n.winding)},getIntersections:function(t,n,r,s){var a=this===t||!t,o=this._matrix._orNullIfIdentity(),l=a?o:(r||t._matrix)._orNullIfIdentity();return a||this.getBounds(o).intersects(t.getBounds(l),1e-12)?gt.getIntersections(this.getCurves(),!a&&t.getCurves(),n,o,l,s):[]},getCrossings:function(t){return this.getIntersections(t,function(n){return n.isCrossing()})},getNearestLocation:function(){for(var t=k.read(arguments),n=this.getCurves(),r=1/0,s=null,a=0,o=n.length;a<o;a++){var l=n[a].getNearestLocation(t);l._distance<r&&(r=l._distance,s=l)}return s},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,n,r){var s=!this._children,a=s?"_segments":"_children",o=t[a],l=n[a],f=this[a];if(!o||!l||o.length!==l.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+n);var h=f.length,c=l.length;if(h<c)for(var p=s?Lt:ne,w=h;w<c;w++)this.add(new p);else h>c&&this[s?"removeSegments":"removeChildren"](c,h);for(var w=0;w<c;w++)f[w].interpolate(o[w],l[w],r);s&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var n=!1;if(t){var r=this._children||[this],s=t._children?t._children.slice():[t],a=r.length,o=s.length,l=[],f=0;n=!0;for(var h=it.findItemBoundsCollisions(r,s,J.GEOMETRIC_EPSILON),c=a-1;c>=0&&n;c--){var p=r[c];n=!1;var w=h[c];if(w)for(var v=w.length-1;v>=0&&!n;v--)p.compare(s[w[v]])&&(l[w[v]]||(l[w[v]]=!0,f++),n=!0)}n=n&&f===o}return n}}),ne=xe.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(n){this._closed=!1,this._segments=[],this._version=0;var r=arguments,s=Array.isArray(n)?typeof n[0]=="object"?n:r:n&&n.size===T&&(n.x!==T||n.point!==T)?r:null;s&&s.length>0?this.setSegments(s):(this._curves=T,this._segmentSelection=0,!s&&typeof n=="string"&&(this.setPathData(n),n=null)),this._initialize(!s&&n)},_equals:function(t){return this._closed===t._closed&&z.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(n){if(t.base.call(this,n),n&8){if(this._length=this._area=T,n&32)this._version++;else if(this._curves)for(var r=0,s=this._curves.length;r<s;r++)this._curves[r]._changed()}else n&64&&(this._bounds=T)},getStyle:function(){var t=this._parent;return(t instanceof De?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var n=this.isFullySelected(),r=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=T,r){var s=t[r-1];typeof s=="boolean"&&(this.setClosed(s),r--),this._add(Lt.readList(t,0,{},r))}n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,n=this._segments;if(!t){var r=this._countCurves();t=this._curves=new Array(r);for(var s=0;s<r;s++)t[s]=new gt(this,n[s],n[s+1]||n[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var n=this._curves.length=this._countCurves();t&&(this._curves[n-1]=new gt(this,this._segments[n-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,n){var r=this._segments,s=r.length,a=new ft(n),o=new Array(6),l=!0,f,h,c,p,w,v,g,I,y=[];function A(b,_){if(b._transformCoordinates(t,o),f=o[0],h=o[1],l)y.push("M"+a.pair(f,h)),l=!1;else if(w=o[2],v=o[3],w===f&&v===h&&g===c&&I===p){if(!_){var x=f-c,C=h-p;y.push(x===0?"v"+a.number(C):C===0?"h"+a.number(x):"l"+a.pair(x,C))}}else y.push("c"+a.pair(g-c,I-p)+" "+a.pair(w-c,v-p)+" "+a.pair(f-c,h-p));c=f,p=h,g=o[4],I=o[5]}if(!s)return"";for(var m=0;m<s;m++)A(r[m]);return this._closed&&s>0&&(A(r[0],!0),y.push("z")),y.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var n=this._segments,r=new Array(6),s=0,a=n.length;s<a;s++)n[s]._transformCoordinates(t,r,!0);return!0},_add:function(t,l){for(var r=this._segments,s=this._curves,a=t.length,o=l==null,l=o?r.length:l,f=0;f<a;f++){var h=t[f];h._path&&(h=t[f]=h.clone()),h._path=this,h._index=l+f,h._selection&&this._updateSelection(h,0,h._selection)}if(o)z.push(r,t);else{r.splice.apply(r,[l,0].concat(t));for(var f=l+a,c=r.length;f<c;f++)r[f]._index=f}if(s){var p=this._countCurves(),w=l>0&&l+a-1===p?l-1:l,v=w,g=Math.min(w+a,p);t._curves&&(s.splice.apply(s,[w,0].concat(t._curves)),v+=t._curves.length);for(var f=v;f<g;f++)s.splice(f,0,new gt(this,null,null));this._adjustCurves(w,g)}return this._changed(41),t},_adjustCurves:function(t,n){for(var r=this._segments,s=this._curves,a,o=t;o<n;o++)a=s[o],a._path=this,a._segment1=r[o],a._segment2=r[o+1]||r[0],a._changed();(a=s[this._closed&&!t?r.length-1:t-1])&&(a._segment2=r[t]||r[0],a._changed()),(a=s[n])&&(a._segment1=r[n],a._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var n=arguments;return n.length>1&&typeof t!="number"?this._add(Lt.readList(n)):this._add([Lt.read(n)])[0]},insert:function(t,n){var r=arguments;return r.length>2&&typeof n!="number"?this._add(Lt.readList(r,1),t):this._add([Lt.read(r,1)],t)[0]},addSegment:function(){return this._add([Lt.read(arguments)])[0]},insertSegment:function(t){return this._add([Lt.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(Lt.readList(t))},insertSegments:function(t,n){return this._add(Lt.readList(n),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,n,r){t=t||0,n=z.pick(n,this._segments.length);var s=this._segments,a=this._curves,o=s.length,l=s.splice(t,n-t),f=l.length;if(!f)return l;for(var h=0;h<f;h++){var c=l[h];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}for(var h=t,p=s.length;h<p;h++)s[h]._index=h;if(a){for(var w=t>0&&n===o+(this._closed?1:0)?t-1:t,a=a.splice(w,f),h=a.length-1;h>=0;h--)a[h]._path=null;r&&(l._curves=a.slice(1)),this._adjustCurves(w,w)}return this._changed(41),l},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,n=0,r=t.length;n<r;n++)if(t[n].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,n=0,r=t.length;n<r;n++)t[n].clearHandles()},getLength:function(){if(this._length==null){for(var t=this.getCurves(),n=0,r=0,s=t.length;r<s;r++)n+=t[r].getLength();this._length=n}return this._length},getArea:function(){var t=this._area;if(t==null){var n=this._segments,r=this._closed;t=0;for(var s=0,a=n.length;s<a;s++){var o=s+1===a;t+=gt.getArea(gt.getValues(n[s],n[o?0:s+1],null,o&&!r))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===t*7},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(n){n&1||this._selectSegments(!1),t.base.call(this,n)},_selectSegments:function(t){var n=this._segments,r=n.length,s=t?7:0;this._segmentSelection=s*r;for(var a=0;a<r;a++)n[a]._selection=s},_updateSelection:function(t,n,r){t._selection=r;var s=this._segmentSelection+=r-n;s>0&&this.setSelected(!0)},divideAt:function(t){var n=this.getLocationAt(t),r;return n&&(r=n.getCurve().divideAt(n.getCurveOffset()))?r._segment1:null},splitAt:function(t){var n=this.getLocationAt(t),r=n&&n.index,s=n&&n.time,a=1e-8,o=1-a;s>o&&(r++,s=0);var l=this.getCurves();if(r>=0&&r<l.length){s>=a&&l[r++].divideAtTime(s);var f=this.removeSegments(r,this._segments.length,!0),h;return this._closed?(this.setClosed(!1),h=this):(h=new ne(Ct.NO_INSERT),h.insertAbove(this),h.copyAttributes(this)),h._add(f,0),this.addSegment(f[0]),h}return null},split:function(t,n){var r,s=n===T?t:(r=this.getCurves()[t])&&r.getLocationAtTime(n);return s!=null?this.splitAt(s):null},join:function(t,n){var r=n||0;if(t&&t!==this){var s=t._segments,a=this.getLastSegment(),o=t.getLastSegment();if(!o)return this;a&&a._point.isClose(o._point,r)&&t.reverse();var l=t.getFirstSegment();if(a&&a._point.isClose(l._point,r))a.setHandleOut(l._handleOut),this._add(s.slice(1));else{var f=this.getFirstSegment();f&&f._point.isClose(l._point,r)&&t.reverse(),o=t.getLastSegment(),f&&f._point.isClose(o._point,r)?(f.setHandleIn(o._handleIn),this._add(s.slice(0,s.length-1),0)):this._add(s.slice())}t._closed&&this._add([s[0]]),t.remove()}var h=this.getFirstSegment(),c=this.getLastSegment();return h!==c&&h._point.isClose(c._point,r)&&(h.setHandleIn(c._handleIn),c.remove(),this.setClosed(!0)),this},reduce:function(t){for(var n=this.getCurves(),r=t&&t.simplify,s=r?1e-7:0,a=n.length-1;a>=0;a--){var o=n[a];!o.hasHandles()&&(!o.hasLength(s)||r&&o.isCollinear(o.getNext()))&&o.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,n=this._segments.length;t<n;t++){var r=this._segments[t],s=r._handleIn;r._handleIn=r._handleOut,r._handleOut=s,r._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var n=new Ke(this,t||.25,256,!0),r=n.parts,s=r.length,a=[],o=0;o<s;o++)a.push(new Lt(r[o].curve.slice(0,2)));!this._closed&&s>0&&a.push(new Lt(r[s-1].curve.slice(6))),this.setSegments(a)},simplify:function(t){var n=new ir(this).fit(t||2.5);return n&&this.setSegments(n),!!n},smooth:function(t){var n=this,r=t||{},s=r.type||"asymmetric",a=this._segments,o=a.length,l=this._closed;function f(Pt,zt){var kt=Pt&&Pt.index;if(kt!=null){var Bt=Pt.path;if(Bt&&Bt!==n)throw new Error(Pt._class+" "+kt+" of "+Bt+" is not part of "+n);zt&&Pt instanceof gt&&kt++}else kt=typeof Pt=="number"?Pt:zt;return Math.min(kt<0&&l?kt%o:kt<0?kt+o:kt,o-1)}var h=l&&r.from===T&&r.to===T,c=f(r.from,0),p=f(r.to,o-1);if(c>p)if(l)c-=o;else{var w=c;c=p,p=w}if(/^(?:asymmetric|continuous)$/.test(s)){var v=s==="asymmetric",g=Math.min,I=p-c+1,y=I-1,A=h?g(I,4):1,m=A,b=A,_=[];if(l||(m=g(1,c),b=g(1,o-p-1)),y+=m+b,y<=1)return;for(var x=0,C=c-m;x<=y;x++,C++)_[x]=a[(C<0?C+o:C)%o]._point;for(var O=_[0]._x+2*_[1]._x,S=_[0]._y+2*_[1]._y,R=2,F=y-1,B=[O],W=[S],N=[R],U=[],H=[],x=1;x<y;x++){var G=x<F,Z=G||v?1:2,$=G?4:v?2:7,ot=G?4:v?3:8,_t=G?2:v?0:1,pt=Z/R;R=N[x]=$-pt,O=B[x]=ot*_[x]._x+_t*_[x+1]._x-pt*O,S=W[x]=ot*_[x]._y+_t*_[x+1]._y-pt*S}U[F]=B[F]/N[F],H[F]=W[F]/N[F];for(var x=y-2;x>=0;x--)U[x]=(B[x]-U[x+1])/N[x],H[x]=(W[x]-H[x+1])/N[x];U[y]=(3*_[y]._x-U[F])/2,H[y]=(3*_[y]._y-H[F])/2;for(var x=m,It=y-b,C=c;x<=It;x++,C++){var et=a[C<0?C+o:C],rt=et._point,yt=U[x]-rt._x,Tt=H[x]-rt._y;(h||x<It)&&et.setHandleOut(yt,Tt),(h||x>m)&&et.setHandleIn(-yt,-Tt)}}else for(var x=c;x<=p;x++)a[x<0?x+o:x].smooth(r,!h&&x===c,!h&&x===p)},toShape:function(t){if(!this._closed)return null;var n=this._segments,r,s,a,o;function l(v,g){var I=n[v],y=I.getNext(),A=n[g],m=A.getNext();return I._handleOut.isZero()&&y._handleIn.isZero()&&A._handleOut.isZero()&&m._handleIn.isZero()&&y._point.subtract(I._point).isCollinear(m._point.subtract(A._point))}function f(v){var g=n[v],I=g.getPrevious(),y=g.getNext();return I._handleOut.isZero()&&g._handleIn.isZero()&&g._handleOut.isZero()&&y._handleIn.isZero()&&g._point.subtract(I._point).isOrthogonal(y._point.subtract(g._point))}function h(v){var g=n[v],I=g.getNext(),y=g._handleOut,A=I._handleIn,m=.5522847498307936;if(y.isOrthogonal(A)){var b=g._point,_=I._point,x=new bt(b,y,!0).intersect(new bt(_,A,!0),!0);return x&&J.isZero(y.getLength()/x.subtract(b).getLength()-m)&&J.isZero(A.getLength()/x.subtract(_).getLength()-m)}return!1}function c(v,g){return n[v]._point.getDistance(n[g]._point)}if(!this.hasHandles()&&n.length===4&&l(0,2)&&l(1,3)&&f(1)?(r=Qt.Rectangle,s=new vt(c(0,3),c(0,1)),o=n[1]._point.add(n[2]._point).divide(2)):n.length===8&&h(0)&&h(2)&&h(4)&&h(6)&&l(1,5)&&l(3,7)?(r=Qt.Rectangle,s=new vt(c(1,6),c(0,3)),a=s.subtract(new vt(c(0,7),c(1,2))).divide(2),o=n[3]._point.add(n[4]._point).divide(2)):n.length===4&&h(0)&&h(1)&&h(2)&&h(3)&&(J.isZero(c(0,2)-c(1,3))?(r=Qt.Circle,a=c(0,2)/2):(r=Qt.Ellipse,a=new vt(c(2,0)/2,c(3,1)/2)),o=n[1]._point),r){var p=this.getPosition(!0),w=new r({center:p,size:s,radius:a,insert:!1});return w.copyAttributes(this,!0),w._matrix.prepend(this._matrix),w.rotate(o.subtract(p).getAngle()+90),(t===T||t)&&w.insertAbove(this),w}return null},toPath:"#clone",compare:function t(n){if(!n||n instanceof De)return t.base.call(this,n);var r=this.getCurves(),s=n.getCurves(),a=r.length,o=s.length;if(!a||!o)return a==o;for(var l=r[0].getValues(),f=[],h=0,c,p=0,w,v=0;v<o;v++){var A=s[v].getValues();f.push(A);var g=gt.getOverlaps(l,A);if(g){c=!v&&g[0][0]>0?o-1:v,w=g[0][1];break}}for(var I=Math.abs,y=1e-8,A=f[c],m;l&&A;){var g=gt.getOverlaps(l,A);if(g){var b=g[0][0];if(I(b-p)<y){p=g[1][0],p===1&&(l=++h<a?r[h].getValues():null,p=0);var _=g[0][1];if(I(_-w)<y){if(m||(m=[c,_]),w=g[1][1],w===1&&(++c>=o&&(c=0),A=f[c]||s[c].getValues(),w=0),!l)return m[0]===c&&m[1]===w;continue}}}break}return!1},_hitTestSelf:function(t,n,r,s){var a=this,o=this.getStyle(),l=this._segments,f=l.length,h=this._closed,c=n._tolerancePadding,p=c,w,v,g,I,y,A,m=n.stroke&&o.hasStroke(),b=n.fill&&o.hasFill(),_=n.curves,x=m?o.getStrokeWidth()/2:b&&n.tolerance>0||_?0:null;x!==null&&(x>0?(w=o.getStrokeJoin(),v=o.getStrokeCap(),g=o.getMiterLimit(),p=p.add(ne._getStrokePadding(x,s))):w=v="round");function C(U,H){return t.subtract(U).divide(H).length<=1}function O(U,H,G){if(!n.selected||H.isSelected()){var Z=U._point;if(H!==Z&&(H=H.add(Z)),C(H,p))return new pe(G,a,{segment:U,point:H})}}function S(U,H){return(H||n.segments)&&O(U,U._point,"segment")||!H&&n.handles&&(O(U,U._handleIn,"handle-in")||O(U,U._handleOut,"handle-out"))}function R(U){I.add(U)}function F(U){var H=h||U._index>0&&U._index<f-1;if((H?w:v)==="round")return C(U._point,p);if(I=new ne({internal:!0,closed:!0}),H?U.isSmooth()||ne._addBevelJoin(U,w,x,g,null,s,R,!0):v==="square"&&ne._addSquareCap(U,v,x,null,s,R,!0),!I.isEmpty()){var G;return I.contains(t)||(G=I.getNearestLocation(t))&&C(G.getPoint(),c)}}if(n.ends&&!n.segments&&!h){if(A=S(l[0],!0)||S(l[f-1],!0))return A}else if(n.segments||n.handles){for(var B=0;B<f;B++)if(A=S(l[B]))return A}if(x!==null){if(y=this.getNearestLocation(t),y){var W=y.getTime();W===0||W===1&&f>1?F(y.getSegment())||(y=null):C(y.getPoint(),p)||(y=null)}if(!y&&w==="miter"&&f>1)for(var B=0;B<f;B++){var N=l[B];if(t.getDistance(N._point)<=g*x&&F(N)){y=N.getLocation();break}}}return!y&&b&&this._contains(t)||y&&!m&&!_?new pe("fill",this):y?new pe(m?"stroke":"curve",this,{location:y,point:y.getPoint()}):null}},z.each(gt._evaluateMethods,function(t){this[t+"At"]=function(n){var r=this.getLocationAt(n);return r&&r[t]()}},{beans:!1,getLocationOf:function(){for(var t=k.read(arguments),n=this.getCurves(),r=0,s=n.length;r<s;r++){var a=n[r].getLocationOf(t);if(a)return a}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if(typeof t=="number"){for(var n=this.getCurves(),r=0,s=0,a=n.length;s<a;s++){var o=r,l=n[s];if(r+=l.getLength(),r>t)return l.getLocationAt(t-o)}if(n.length>0&&t<=this.getLength())return new Re(n[n.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=k.read(arguments);if(t.isZero())return[];for(var n=[],r=0,s=this.getCurves(),a=0,o=s.length;a<o;a++){for(var l=s[a],f=l.getTimesWithTangent(t),h=0,c=f.length;h<c;h++){var p=r+l.getOffsetAtTime(f[h]);n.indexOf(p)<0&&n.push(p)}r+=l.length}return n}}),new function(){function t(r,s,a,o){if(o<=0)return;var l=o/2,f=o-2,h=l-1,c=new Array(6),p,w;function v(b){var _=c[b],x=c[b+1];(p!=_||w!=x)&&(r.beginPath(),r.moveTo(p,w),r.lineTo(_,x),r.stroke(),r.beginPath(),r.arc(_,x,l,0,Math.PI*2,!0),r.fill())}for(var g=0,I=s.length;g<I;g++){var y=s[g],A=y._selection;if(y._transformCoordinates(a,c),p=c[0],w=c[1],A&2&&v(2),A&4&&v(4),r.fillRect(p-l,w-l,o,o),f>0&&!(A&1)){var m=r.fillStyle;r.fillStyle="#ffffff",r.fillRect(p-h,w-h,f,f),r.fillStyle=m}}}function n(r,s,a){var o=s._segments,l=o.length,f=new Array(6),h=!0,c,p,w,v,g,I,y,A;function m(_){if(a)_._transformCoordinates(a,f),c=f[0],p=f[1];else{var x=_._point;c=x._x,p=x._y}if(h)r.moveTo(c,p),h=!1;else{if(a)g=f[2],I=f[3];else{var C=_._handleIn;g=c+C._x,I=p+C._y}g===c&&I===p&&y===w&&A===v?r.lineTo(c,p):r.bezierCurveTo(y,A,g,I,c,p)}if(w=c,v=p,a)y=f[4],A=f[5];else{var C=_._handleOut;y=w+C._x,A=v+C._y}}for(var b=0;b<l;b++)m(o[b]);s._closed&&l>0&&m(o[0])}return{_draw:function(r,s,a,o){var l=s.dontStart,f=s.dontFinish||s.clip,h=this.getStyle(),c=h.hasFill(),p=h.hasStroke(),w=h.getDashArray(),v=!Xt.support.nativeDash&&p&&w&&w.length;l||r.beginPath(),(c||p&&!v||f)&&(n(r,this,o),this._closed&&r.closePath());function g(_){return w[(_%v+v)%v]}if(!f&&(c||p)&&(this._setStyles(r,s,a),c&&(r.fill(h.getFillRule()),r.shadowColor="rgba(0,0,0,0)"),p)){if(v){l||r.beginPath();for(var I=new Ke(this,.25,32,!1,o),y=I.length,A=-h.getDashOffset(),m,b=0;A>0;)A-=g(b--)+g(b--);for(;A<y;)m=A+g(b++),(A>0||m>0)&&I.drawPart(r,Math.max(A,0),Math.max(m,0)),A=m+g(b++)}r.stroke()}},_drawSelected:function(r,s){r.beginPath(),n(r,this,s),r.stroke(),t(r,this._segments,s,Xt.settings.handleSize)}}},new function(){function t(n){var r=n._segments;if(!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return{moveTo:function(){var n=this._segments;n.length===1&&this.removeSegment(0),n.length||this._add([new Lt(k.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Lt(k.read(arguments))])},cubicCurveTo:function(){var n=arguments,r=k.read(n),s=k.read(n),a=k.read(n),o=t(this);o.setHandleOut(r.subtract(o._point)),this._add([new Lt(a,s.subtract(a))])},quadraticCurveTo:function(){var n=arguments,r=k.read(n),s=k.read(n),a=t(this)._point;this.cubicCurveTo(r.add(a.subtract(r).multiply(1/3)),r.add(s.subtract(r).multiply(1/3)),s)},curveTo:function(){var n=arguments,r=k.read(n),s=k.read(n),a=z.pick(z.read(n),.5),o=1-a,l=t(this)._point,f=r.subtract(l.multiply(o*o)).subtract(s.multiply(a*a)).divide(2*a*o);if(f.isNaN())throw new Error("Cannot put a curve through points with parameter = "+a);this.quadraticCurveTo(f,s)},arcTo:function(){var n=arguments,r=Math.abs,s=Math.sqrt,a=t(this),o=a._point,l=k.read(n),f,h=z.peek(n),c=z.pick(h,!0),p,w,v,g;if(typeof c=="boolean")var I=o.add(l).divide(2),f=I.add(I.subtract(o).rotate(c?-90:90));else if(z.remain(n)<=2)f=l,l=k.read(n);else if(!o.equals(l)){var y=vt.read(n),A=J.isZero;if(A(y.width)||A(y.height))return this.lineTo(l);var m=z.read(n),c=!!z.read(n),b=!!z.read(n),I=o.add(l).divide(2),_=o.subtract(I).rotate(-m),x=_.x,C=_.y,O=r(y.width),S=r(y.height),R=O*O,F=S*S,B=x*x,W=C*C,N=s(B/R+W/F);if(N>1&&(O*=N,S*=N,R=O*O,F=S*S),N=(R*F-R*W-F*B)/(R*W+F*B),r(N)<1e-12&&(N=0),N<0)throw new Error("Cannot create an arc with the given arguments");p=new k(O*C/S,-S*x/O).multiply((b===c?-1:1)*s(N)).rotate(m).add(I),g=new Ht().translate(p).rotate(m).scale(O,S),v=g._inverseTransform(o),w=v.getDirectedAngle(g._inverseTransform(l)),!c&&w>0?w-=360:c&&w<0&&(w+=360)}if(f){var U=new bt(o.add(f).divide(2),f.subtract(o).rotate(90),!0),H=new bt(f.add(l).divide(2),l.subtract(f).rotate(90),!0),G=new bt(o,l),Z=G.getSide(f);if(p=U.intersect(H,!0),!p){if(!Z)return this.lineTo(l);throw new Error("Cannot create an arc with the given arguments")}v=o.subtract(p),w=v.getDirectedAngle(l.subtract(p));var $=G.getSide(p,!0);$===0?w=Z*r(w):Z===$&&(w+=w<0?360:-360)}if(w){for(var ot=1e-5,_t=r(w),pt=_t>=360?4:Math.ceil((_t-ot)/90),It=w/pt,et=It*Math.PI/360,rt=4/3*Math.sin(et)/(1+Math.cos(et)),yt=[],Tt=0;Tt<=pt;Tt++){var _=l,Pt=null;if(Tt<pt&&(Pt=v.rotate(90).multiply(rt),g?(_=g._transformPoint(v),Pt=g._transformPoint(v.add(Pt)).subtract(_)):_=p.add(v)),!Tt)a.setHandleOut(Pt);else{var zt=v.rotate(-90).multiply(rt);g&&(zt=g._transformPoint(v.add(zt)).subtract(_)),yt.push(new Lt(_,zt,Pt))}v=v.rotate(It)}this._add(yt)}},lineBy:function(){var n=k.read(arguments),r=t(this)._point;this.lineTo(r.add(n))},curveBy:function(){var n=arguments,r=k.read(n),s=k.read(n),a=z.read(n),o=t(this)._point;this.curveTo(o.add(r),o.add(s),a)},cubicCurveBy:function(){var n=arguments,r=k.read(n),s=k.read(n),a=k.read(n),o=t(this)._point;this.cubicCurveTo(o.add(r),o.add(s),o.add(a))},quadraticCurveBy:function(){var n=arguments,r=k.read(n),s=k.read(n),a=t(this)._point;this.quadraticCurveTo(a.add(r),a.add(s))},arcBy:function(){var n=arguments,r=t(this)._point,s=r.add(k.read(n)),a=z.pick(z.peek(n),!0);typeof a=="boolean"?this.arcTo(s,a):this.arcTo(s,r.add(k.read(n)))},closePath:function(n){this.setClosed(!0),this.join(this,n)}}},{_getBounds:function(t,n){var r=n.handle?"getHandleBounds":n.stroke?"getStrokeBounds":"getBounds";return ne[r](this._segments,this._closed,this,t,n)},statics:{getBounds:function(t,n,r,s,a,o){var l=t[0];if(!l)return new xt;var f=new Array(6),h=l._transformCoordinates(s,new Array(6)),c=h.slice(0,2),p=c.slice(),w=new Array(2);function v(y){y._transformCoordinates(s,f);for(var A=0;A<2;A++)gt._addBounds(h[A],h[A+4],f[A+2],f[A],A,o?o[A]:0,c,p,w);var m=h;h=f,f=m}for(var g=1,I=t.length;g<I;g++)v(t[g]);return n&&v(l),new xt(c[0],c[1],p[0]-c[0],p[1]-c[1])},getStrokeBounds:function(t,n,r,s,a){var o=r.getStyle(),l=o.hasStroke(),f=o.getStrokeWidth(),h=l&&r._getStrokeMatrix(s,a),c=l&&ne._getStrokePadding(f,h),p=ne.getBounds(t,n,r,s,a,c);if(!l)return p;var w=f/2,v=o.getStrokeJoin(),g=o.getStrokeCap(),I=o.getMiterLimit(),y=new xt(new vt(c));function A(O){p=p.include(O)}function m(O){p=p.unite(y.setCenter(O._point.transform(s)))}function b(O,S){S==="round"||O.isSmooth()?m(O):ne._addBevelJoin(O,S,w,I,s,h,A)}function _(O,S){S==="round"?m(O):ne._addSquareCap(O,S,w,s,h,A)}var x=t.length-(n?0:1);if(x>0){for(var C=1;C<x;C++)b(t[C],v);n?b(t[0],v):(_(t[0],g),_(t[t.length-1],g))}return p},_getStrokePadding:function(t,n){if(!n)return[t,t];var r=new k(t,0).transform(n),s=new k(0,t).transform(n),a=r.getAngleInRadians(),o=r.getLength(),l=s.getLength(),f=Math.sin(a),h=Math.cos(a),c=Math.tan(a),p=Math.atan2(l*c,o),w=Math.atan2(l,c*o);return[Math.abs(o*Math.cos(p)*h+l*Math.sin(p)*f),Math.abs(l*Math.sin(w)*h+o*Math.cos(w)*f)]},_addBevelJoin:function(t,n,r,s,a,o,l,f){var h=t.getCurve(),c=h.getPrevious(),p=h.getPoint1().transform(a),w=c.getNormalAtTime(1).multiply(r).transform(o),v=h.getNormalAtTime(0).multiply(r).transform(o),g=w.getDirectedAngle(v);if((g<0||g>=180)&&(w=w.negate(),v=v.negate()),f&&l(p),l(p.add(w)),n==="miter"){var I=new bt(p.add(w),new k(-w.y,w.x),!0).intersect(new bt(p.add(v),new k(-v.y,v.x),!0),!0);I&&p.getDistance(I)<=s*r&&l(I)}l(p.add(v))},_addSquareCap:function(t,n,r,s,a,o,l){var f=t._point.transform(s),h=t.getLocation(),c=h.getNormal().multiply(h.getTime()===0?r:-r).transform(a);n==="square"&&(l&&(o(f.subtract(c)),o(f.add(c))),f=f.add(c.rotate(-90))),o(f.add(c)),o(f.subtract(c))},getHandleBounds:function(t,n,r,s,a){var o=r.getStyle(),l=a.stroke&&o.hasStroke(),f,h;if(l){var c=r._getStrokeMatrix(s,a),p=o.getStrokeWidth()/2,w=p;o.getStrokeJoin()==="miter"&&(w=p*o.getMiterLimit()),o.getStrokeCap()==="square"&&(w=Math.max(w,p*Math.SQRT2)),f=ne._getStrokePadding(p,c),h=ne._getStrokePadding(w,c)}for(var v=new Array(6),g=1/0,I=-g,y=g,A=I,m=0,b=t.length;m<b;m++){var _=t[m];_._transformCoordinates(s,v);for(var x=0;x<6;x+=2){var C=x?f:h,O=C?C[0]:0,S=C?C[1]:0,R=v[x],F=v[x+1],B=R-O,W=R+O,N=F-S,U=F+S;B<g&&(g=B),W>I&&(I=W),N<y&&(y=N),U>A&&(A=U)}}return new xt(g,y,I-g,A-y)}}});ne.inject({statics:new function(){var t=.5522847498307936,n=[new Lt([-1,0],[0,t],[0,-t]),new Lt([0,-1],[-t,0],[t,0]),new Lt([1,0],[0,-t],[0,t]),new Lt([0,1],[t,0],[-t,0])];function r(a,o,l){var f=z.getNamed(l),h=new ne(f&&(f.insert==!0?Ct.INSERT:f.insert==!1?Ct.NO_INSERT:null));return h._add(a),h._closed=o,h.set(f,Ct.INSERT)}function s(a,o,l){for(var f=new Array(4),h=0;h<4;h++){var c=n[h];f[h]=new Lt(c._point.multiply(o).add(a),c._handleIn.multiply(o),c._handleOut.multiply(o))}return r(f,!0,l)}return{Line:function(){var a=arguments;return r([new Lt(k.readNamed(a,"from")),new Lt(k.readNamed(a,"to"))],!1,a)},Circle:function(){var a=arguments,o=k.readNamed(a,"center"),l=z.readNamed(a,"radius");return s(o,new vt(l),a)},Rectangle:function(){var a=arguments,o=xt.readNamed(a,"rectangle"),l=vt.readNamed(a,"radius",0,{readNull:!0}),f=o.getBottomLeft(!0),h=o.getTopLeft(!0),c=o.getTopRight(!0),p=o.getBottomRight(!0),w;if(!l||l.isZero())w=[new Lt(f),new Lt(h),new Lt(c),new Lt(p)];else{l=vt.min(l,o.getSize(!0).divide(2));var v=l.width,g=l.height,I=v*t,y=g*t;w=[new Lt(f.add(v,0),null,[-I,0]),new Lt(f.subtract(0,g),[0,y]),new Lt(h.add(0,g),null,[0,-y]),new Lt(h.add(v,0),[-I,0],null),new Lt(c.subtract(v,0),null,[I,0]),new Lt(c.add(0,g),[0,-y],null),new Lt(p.subtract(0,g),null,[0,y]),new Lt(p.subtract(v,0),[I,0])]}return r(w,!0,a)},RoundRectangle:"#Rectangle",Ellipse:function(){var a=arguments,o=Qt._readEllipse(a);return s(o.center,o.radius,a)},Oval:"#Ellipse",Arc:function(){var a=arguments,o=k.readNamed(a,"from"),l=k.readNamed(a,"through"),f=k.readNamed(a,"to"),h=z.getNamed(a),c=new ne(h&&h.insert==!1&&Ct.NO_INSERT);return c.moveTo(o),c.arcTo(l,f),c.set(h)},RegularPolygon:function(){for(var a=arguments,o=k.readNamed(a,"center"),l=z.readNamed(a,"sides"),f=z.readNamed(a,"radius"),h=360/l,c=l%3===0,p=new k(0,c?-f:f),w=c?-1:.5,v=new Array(l),g=0;g<l;g++)v[g]=new Lt(o.add(p.rotate((g+w)*h)));return r(v,!0,a)},Star:function(){for(var a=arguments,o=k.readNamed(a,"center"),l=z.readNamed(a,"points")*2,f=z.readNamed(a,"radius1"),h=z.readNamed(a,"radius2"),c=360/l,p=new k(0,-1),w=new Array(l),v=0;v<l;v++)w[v]=new Lt(o.add(p.rotate(c*v).multiply(v%2?h:f)));return r(w,!0,a)}}}});var De=xe.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(n){this._children=[],this._namedChildren={},this._initialize(n)||(typeof n=="string"?this.setPathData(n):this.addChildren(Array.isArray(n)?n:arguments))},insertChildren:function t(n,r){var s=r,a=s[0];a&&typeof a[0]=="number"&&(s=[s]);for(var o=r.length-1;o>=0;o--){var l=s[o];s===r&&!(l instanceof ne)&&(s=z.slice(s)),Array.isArray(l)?s[o]=new ne({segments:l,insert:!1}):l instanceof De&&(s.splice.apply(s,[o,1].concat(l.removeChildren())),l.remove())}return t.base.call(this,n,s)},reduce:function t(n){for(var r=this._children,s=r.length-1;s>=0;s--){var a=r[s].reduce(n);a.isEmpty()&&a.remove()}if(!r.length){var a=new ne(Ct.NO_INSERT);return a.copyAttributes(this),a.insertAbove(this),this.remove(),a}return t.base.call(this)},isClosed:function(){for(var t=this._children,n=0,r=t.length;n<r;n++)if(!t[n]._closed)return!1;return!0},setClosed:function(t){for(var n=this._children,r=0,s=n.length;r<s;r++)n[r].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,n=[],r=0,s=t.length;r<s;r++)z.push(n,t[r].getCurves());return n},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,n=0,r=0,s=t.length;r<s;r++)n+=t[r].getArea();return n},getLength:function(){for(var t=this._children,n=0,r=0,s=t.length;r<s;r++)n+=t[r].getLength();return n},getPathData:function(t,n){for(var r=this._children,s=[],a=0,o=r.length;a<o;a++){var l=r[a],f=l._matrix;s.push(l.getPathData(t&&!f.isIdentity()?t.appended(f):t,n))}return s.join("")},_hitTestChildren:function t(n,r,s){return t.base.call(this,n,r.class===ne||r.type==="path"?r:z.set({},r,{fill:!1}),s)},_draw:function(t,n,r,s){var a=this._children;if(a.length){n=n.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var o=0,l=a.length;o<l;o++)a[o].draw(t,n,s);if(!n.clip){this._setStyles(t,n,r);var f=this._style;f.hasFill()&&(t.fill(f.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),f.hasStroke()&&t.stroke()}}},_drawSelected:function(t,n,r){for(var s=this._children,a=0,o=s.length;a<o;a++){var l=s[a],f=l._matrix;r[l._id]||l._drawSelected(t,f.isIdentity()?n:n.appended(f))}}},new function(){function t(n,r){var s=n._children;if(r&&!s.length)throw new Error("Use a moveTo() command first");return s[s.length-1]}return z.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(n){this[n]=function(){var r=t(this,!0);r[n].apply(r,arguments)}},{moveTo:function(){var n=t(this),r=n&&n.isEmpty()?n:new ne(Ct.NO_INSERT);r!==n&&this.addChild(r),r.moveTo.apply(r,arguments)},moveBy:function(){var n=t(this,!0),r=n&&n.getLastSegment(),s=k.read(arguments);this.moveTo(r?s.add(r._point):s)},closePath:function(n){t(this,!0).closePath(n)}})},z.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(n){for(var r=this._children,s,a=0,o=r.length;a<o;a++)s=r[a][t](n)||s;return s}},{}));xe.inject(new function(){var t=Math.min,n=Math.max,r=Math.abs,s={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function a(m){return m._children||[m]}function o(m,b){var _=m.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(b){for(var x=a(_),C=0,O=x.length;C<O;C++){var m=x[C];!m._closed&&!m.isEmpty()&&(m.closePath(1e-12),m.getFirstSegment().setHandleIn(0,0),m.getLastSegment().setHandleOut(0,0))}_=_.resolveCrossings().reorient(_.getFillRule()==="nonzero",!0)}return _}function l(m,b,_,x,C){var O=new De(Ct.NO_INSERT);return O.addChildren(m,!0),O=O.reduce({simplify:b}),C&&C.insert==!1||O.insertAbove(x&&_.isSibling(x)&&_.getIndex()<x.getIndex()?x:_),O.copyAttributes(_,!0),O}function f(m){return m.hasOverlap()||m.isCrossing()}function h(m,b,_,x){if(x&&(x.trace==!1||x.stroke)&&/^(subtract|intersect)$/.test(_))return c(m,b,_);var C=o(m,!0),O=b&&m!==b&&o(b,!0),S=s[_];S[_]=!0,O&&(S.subtract||S.exclude)^(O.isClockwise()^C.isClockwise())&&O.reverse();var R=g(Re.expand(C.getIntersections(O,f))),F=a(C),B=O&&a(O),W=[],N=[],U;function H(Pt){for(var zt=0,kt=Pt.length;zt<kt;zt++){var Bt=Pt[zt];z.push(W,Bt._segments),z.push(N,Bt.getCurves()),Bt._overlapsOnly=!0}}function G(Pt){for(var zt=[],kt=0,Bt=Pt&&Pt.length;kt<Bt;kt++)zt.push(N[Pt[kt]]);return zt}if(R.length){H(F),B&&H(B);for(var Z=new Array(N.length),$=0,ot=N.length;$<ot;$++)Z[$]=N[$].getValues();for(var _t=it.findCurveBoundsCollisions(Z,Z,0,!0),pt={},$=0;$<N.length;$++){var It=N[$],et=It._path._id,rt=pt[et]=pt[et]||{};rt[It.getIndex()]={hor:G(_t[$].hor),ver:G(_t[$].ver)}}for(var $=0,ot=R.length;$<ot;$++)y(R[$]._segment,C,O,pt,S);for(var $=0,ot=W.length;$<ot;$++){var yt=W[$],Tt=yt._intersection;yt._winding||y(yt,C,O,pt,S),Tt&&Tt._overlap||(yt._path._overlapsOnly=!1)}U=A(W,S)}else U=v(B?F.concat(B):F.slice(),function(Pt){return!!S[Pt]});return l(U,!0,m,b,x)}function c(m,b,_){var x=o(m),C=o(b),O=x.getIntersections(C,f),S=_==="subtract",R=_==="divide",F={},B=[];function W(H){if(!F[H._id]&&(R||C.contains(H.getPointAt(H.getLength()/2))^S))return B.unshift(H),F[H._id]=!0}for(var N=O.length-1;N>=0;N--){var U=O[N].split();U&&(W(U)&&U.getFirstSegment().setHandleIn(0,0),x.getLastSegment().setHandleOut(0,0))}return W(x),l(B,!1,m,b)}function p(m,b){for(var _=m;_;){if(_===b)return;_=_._previous}for(;m._next&&m._next!==b;)m=m._next;if(!m._next){for(;b._previous;)b=b._previous;m._next=b,b._previous=m}}function w(m){for(var b=m.length-1;b>=0;b--)m[b].clearHandles()}function v(m,b,_){var x=m&&m.length;if(x){var C=z.each(m,function(_t,pt){this[_t._id]={container:null,winding:_t.isClockwise()?1:-1,index:pt}},{}),O=m.slice().sort(function(_t,pt){return r(pt.getArea())-r(_t.getArea())}),S=O[0],R=it.findItemBoundsCollisions(O,null,J.GEOMETRIC_EPSILON);_==null&&(_=S.isClockwise());for(var F=0;F<x;F++){var B=O[F],W=C[B._id],N=0,U=R[F];if(U){for(var H=null,G=U.length-1;G>=0;G--)if(U[G]<F){H=H||B.getInteriorPoint();var Z=O[U[G]];if(Z.contains(H)){var $=C[Z._id];N=$.winding,W.winding+=N,W.container=$.exclude?$.container:Z;break}}}if(b(W.winding)===b(N))W.exclude=!0,m[W.index]=null;else{var ot=W.container;B.setClockwise(ot?!ot.isClockwise():_)}}}return m}function g(m,b,_){var x=b&&[],C=1e-8,O=1-C,S=!1,R=_||[],F=_&&{},B,W,N;function U(zt){return zt._path._id+"."+zt._segment1._index}for(var H=(_&&_.length)-1;H>=0;H--){var G=_[H];G._path&&(F[U(G)]=!0)}for(var H=m.length-1;H>=0;H--){var Z=m[H],$=Z._time,ot=$,_t=b&&!b(Z),G=Z._curve,pt;if(G&&(G!==W?(S=!G.hasHandles()||F&&F[U(G)],B=[],N=null,W=G):N>=C&&($/=N)),_t){B&&B.push(Z);continue}else b&&x.unshift(Z);if(N=ot,$<C)pt=G._segment1;else if($>O)pt=G._segment2;else{var It=G.divideAtTime($,!0);S&&R.push(G,It),pt=It._segment1;for(var et=B.length-1;et>=0;et--){var rt=B[et];rt._time=(rt._time-$)/(1-$)}}Z._setSegment(pt);var yt=pt._intersection,Tt=Z._intersection;if(yt){p(yt,Tt);for(var Pt=yt;Pt;)p(Pt._intersection,yt),Pt=Pt._next}else pt._intersection=Tt}return _||w(R),x||m}function I(m,b,_,x,C){var O=Array.isArray(b)?b:b[_?"hor":"ver"],S=_?1:0,R=S^1,F=[m.x,m.y],B=F[S],W=F[R],N=1e-9,U=1e-6,H=B-N,G=B+N,Z=0,$=0,ot=0,_t=0,pt=!1,It=!1,et=1,rt=[],yt,Tt;function Pt(fe){var Pe=fe[R+0],Ye=fe[R+6];if(!(W<t(Pe,Ye)||W>n(Pe,Ye))){var Ne=fe[S+0],nn=fe[S+2],kn=fe[S+4],fn=fe[S+6];if(Pe===Ye){(Ne<G&&fn>H||fn<G&&Ne>H)&&(pt=!0);return}var rn=W===Pe?0:W===Ye||H>n(Ne,nn,kn,fn)||G<t(Ne,nn,kn,fn)?1:gt.solveCubic(fe,R,W,rt,0,1)>0?rt[0]:1,Je=rn===0?Ne:rn===1?fn:gt.getPoint(fe,rn)[_?"y":"x"],Qe=Pe>Ye?1:-1,wn=yt[R]>yt[R+6]?1:-1,ln=yt[S+6];return W!==Pe?(Je<H?ot+=Qe:Je>G?_t+=Qe:pt=!0,Je>B-U&&Je<B+U&&(et/=2)):(Qe!==wn?Ne<H?ot+=Qe:Ne>G&&(_t+=Qe):Ne!=ln&&(ln<G&&Je>G?(_t+=Qe,pt=!0):ln>H&&Je<H&&(ot+=Qe,pt=!0)),et/=4),yt=fe,!C&&Je>H&&Je<G&&gt.getTangent(fe,rn)[_?"x":"y"]===0&&I(m,b,!_,x,!0)}}function zt(fe){var Pe=fe[R+0],Ye=fe[R+2],Ne=fe[R+4],nn=fe[R+6];if(W<=n(Pe,Ye,Ne,nn)&&W>=t(Pe,Ye,Ne,nn)){for(var kn=fe[S+0],fn=fe[S+2],rn=fe[S+4],Je=fe[S+6],Qe=H>n(kn,fn,rn,Je)||G<t(kn,fn,rn,Je)?[fe]:gt.getMonoCurves(fe,_),wn,ln=0,ar=Qe.length;ln<ar;ln++)if(wn=Pt(Qe[ln]))return wn}}for(var kt=0,Bt=O.length;kt<Bt;kt++){var Kt=O[kt],Ut=Kt._path,ke=Kt.getValues(),Oe;if((!kt||O[kt-1]._path!==Ut)&&(yt=null,Ut._closed||(Tt=gt.getValues(Ut.getLastCurve().getSegment2(),Kt.getSegment1(),null,!x),Tt[R]!==Tt[R+6]&&(yt=Tt)),!yt)){yt=ke;for(var qe=Ut.getLastCurve();qe&&qe!==Kt;){var Ae=qe.getValues();if(Ae[R]!==Ae[R+6]){yt=Ae;break}qe=qe.getPrevious()}}if(Oe=zt(ke))return Oe;if(kt+1===Bt||O[kt+1]._path!==Ut){if(Tt&&(Oe=zt(Tt)))return Oe;pt&&!ot&&!_t&&(ot=_t=Ut.isClockwise(x)^_?1:-1),Z+=ot,$+=_t,ot=_t=0,pt&&(It=!0,pt=!1),Tt=null}}return Z=r(Z),$=r($),{winding:n(Z,$),windingL:Z,windingR:$,quality:et,onPath:It}}function y(m,b,_,x,C){var O=[],S=m,R=0,N;do{var F=m.getCurve();if(F){var B=F.getLength();O.push({segment:m,curve:F,length:B}),R+=B}m=m.getNext()}while(m&&!m._intersection&&m!==S);for(var W=[.5,.25,.75],N={winding:0,quality:-1},U=.001,H=1-U,G=0;G<W.length&&N.quality<.5;G++)for(var B=R*W[G],Z=0,$=O.length;Z<$;Z++){var ot=O[Z],_t=ot.length;if(B<=_t){var F=ot.curve,pt=F._path,It=pt._parent,et=It instanceof De?It:pt,rt=J.clamp(F.getTimeAt(B),U,H),yt=F.getPointAtTime(rt),Tt=r(F.getTangentAtTime(rt).y)<Math.SQRT1_2,Pt=null;if(C.subtract&&_){var zt=et===b?_:b,kt=zt._getWinding(yt,Tt,!0);if(et===b&&kt.winding||et===_&&!kt.winding){if(kt.quality<1)continue;Pt={winding:0,quality:1}}}Pt=Pt||I(yt,x[pt._id][F.getIndex()],Tt,!0),Pt.quality>N.quality&&(N=Pt);break}B-=_t}for(var Z=O.length-1;Z>=0;Z--)O[Z].segment._winding=N}function A(m,b){var _=[],x;function C(Bt){var Kt;return!!(Bt&&!Bt._visited&&(!b||b[(Kt=Bt._winding||{}).winding]&&!(b.unite&&Kt.winding===2&&Kt.windingL&&Kt.windingR)))}function O(Bt){if(Bt){for(var Kt=0,Ut=x.length;Kt<Ut;Kt++)if(Bt===x[Kt])return!0}return!1}function S(Bt){for(var Kt=Bt._segments,Ut=0,ke=Kt.length;Ut<ke;Ut++)Kt[Ut]._visited=!0}function R(Bt,Kt){var Ut=Bt._intersection,ke=Ut,Oe=[];Kt&&(x=[Bt]);function qe(Ae,fe){for(;Ae&&Ae!==fe;){var Pe=Ae._segment,Ye=Pe&&Pe._path;if(Ye){var Ne=Pe.getNext()||Ye.getFirstSegment(),nn=Ne._intersection;Pe!==Bt&&(O(Pe)||O(Ne)||Ne&&C(Pe)&&(C(Ne)||nn&&C(nn._segment)))&&Oe.push(Pe),Kt&&x.push(Pe)}Ae=Ae._next}}if(Ut){for(qe(Ut);Ut&&Ut._previous;)Ut=Ut._previous;qe(Ut,ke)}return Oe}m.sort(function(Bt,Kt){var Ut=Bt._intersection,ke=Kt._intersection,Oe=!!(Ut&&Ut._overlap),qe=!!(ke&&ke._overlap),Ae=Bt._path,fe=Kt._path;return Oe^qe?Oe?1:-1:!Ut^!ke?Ut?1:-1:Ae!==fe?Ae._id-fe._id:Bt._index-Kt._index});for(var F=0,B=m.length;F<B;F++){var W=m[F],N=C(W),U=null,H=!1,G=!0,Z=[],$,ot,_t;if(N&&W._path._overlapsOnly){var pt=W._path,It=W._intersection._segment._path;pt.compare(It)&&(pt.getArea()&&_.push(pt.clone(!1)),S(pt),S(It),N=!1)}for(;N;){var et=!U,rt=R(W,et),yt=rt.shift(),H=!et&&(O(W)||O(yt)),Tt=!H&&yt;if(et&&(U=new ne(Ct.NO_INSERT),$=null),H){(W.isFirst()||W.isLast())&&(G=W._path._closed),W._visited=!0;break}if(Tt&&$&&(Z.push($),$=null),$||(Tt&&rt.push(W),$={start:U._segments.length,crossings:rt,visited:ot=[],handleIn:_t}),Tt&&(W=yt),!C(W)){U.removeSegments($.start);for(var Pt=0,zt=ot.length;Pt<zt;Pt++)ot[Pt]._visited=!1;ot.length=0;do W=$&&$.crossings.shift(),(!W||!W._path)&&(W=null,$=Z.pop(),$&&(ot=$.visited,_t=$.handleIn));while($&&!C(W));if(!W)break}var kt=W.getNext();U.add(new Lt(W._point,_t,kt&&W._handleOut)),W._visited=!0,ot.push(W),W=kt||W._path.getFirstSegment(),_t=kt&&kt._handleIn}H&&(G&&(U.getFirstSegment().setHandleIn(_t),U.setClosed(G)),U.getArea()!==0&&_.push(U))}return _}return{_getWinding:function(m,b,_){return I(m,this.getCurves(),b,_)},unite:function(m,b){return h(this,m,"unite",b)},intersect:function(m,b){return h(this,m,"intersect",b)},subtract:function(m,b){return h(this,m,"subtract",b)},exclude:function(m,b){return h(this,m,"exclude",b)},divide:function(m,b){return b&&(b.trace==!1||b.stroke)?c(this,m,"divide"):l([this.subtract(m,b),this.intersect(m,b)],!0,this,m,b)},resolveCrossings:function(){var m=this._children,b=m||[this];function _($,ot){var _t=$&&$._intersection;return _t&&_t._overlap&&_t._path===ot}var x=!1,C=!1,O=this.getIntersections(null,function($){return $.hasOverlap()&&(x=!0)||$.isCrossing()&&(C=!0)}),S=x&&C&&[];if(O=Re.expand(O),x)for(var R=g(O,function($){return $.hasOverlap()},S),F=R.length-1;F>=0;F--){var B=R[F],W=B._path,N=B._segment,U=N.getPrevious(),H=N.getNext();_(U,W)&&_(H,W)&&(N.remove(),U._handleOut._set(0,0),H._handleIn._set(0,0),U!==N&&!U.getCurve().hasLength()&&(H._handleIn.set(U._handleIn),U.remove()))}C&&(g(O,x&&function($){var ot=$.getCurve(),_t=$.getSegment(),pt=$._intersection,It=pt._curve,et=pt._segment;if(ot&&It&&ot._path&&It._path)return!0;_t&&(_t._intersection=null),et&&(et._intersection=null)},S),S&&w(S),b=A(z.each(b,function($){z.push(this,$._segments)},[])));var G=b.length,Z;return G>1&&m?(b!==m&&this.setChildren(b),Z=this):G===1&&!m&&(b[0]!==this&&this.setSegments(b[0].removeSegments()),Z=this),Z||(Z=new De(Ct.NO_INSERT),Z.addChildren(b),Z=Z.reduce(),Z.copyAttributes(this),this.replaceWith(Z)),Z},reorient:function(m,b){var _=this._children;return _&&_.length?this.setChildren(v(this.removeChildren(),function(x){return!!(m?x:x&1)},b)):b!==T&&this.setClockwise(b),this},getInteriorPoint:function(){var m=this.getBounds(),b=m.getCenter(!0);if(!this.contains(b)){for(var _=this.getCurves(),x=b.y,C=[],O=[],S=0,R=_.length;S<R;S++){var F=_[S].getValues(),B=F[1],W=F[3],N=F[5],U=F[7];if(x>=t(B,W,N,U)&&x<=n(B,W,N,U))for(var H=gt.getMonoCurves(F),G=0,Z=H.length;G<Z;G++){var $=H[G],ot=$[1],_t=$[7];if(ot!==_t&&(x>=ot&&x<=_t||x>=_t&&x<=ot)){var pt=x===ot?$[0]:x===_t?$[6]:gt.solveCubic($,1,x,O,0,1)===1?gt.getPoint($,O[0]).x:($[0]+$[6])/2;C.push(pt)}}}C.length>1&&(C.sort(function(It,et){return It-et}),b.x=(C[0]+C[1])/2)}return b}}});var Ke=z.extend({_class:"PathFlattener",initialize:function(t,n,r,s,a){var o=[],l=[],f=0,h=1/(r||32),c=t._segments,p=c[0],w;function v(A,m){var b=gt.getValues(A,m,a);o.push(b),g(b,A._index,0,1)}function g(A,m,b,_){if(_-b>h&&!(s&&gt.isStraight(A))&&!gt.isFlatEnough(A,n||.25)){var x=gt.subdivide(A,.5),C=(b+_)/2;g(x[0],m,b,C),g(x[1],m,C,_)}else{var O=A[6]-A[0],S=A[7]-A[1],R=Math.sqrt(O*O+S*S);R>0&&(f+=R,l.push({offset:f,curve:A,index:m,time:_}))}}for(var I=1,y=c.length;I<y;I++)w=c[I],v(p,w),p=w;t._closed&&v(w||p,c[0]),this.curves=o,this.parts=l,this.length=f,this.index=0},_get:function(t){for(var n=this.parts,r=n.length,s,a=this.index;s=a,!(!a||n[--a].offset<t););for(;s<r;s++){var o=n[s];if(o.offset>=t){this.index=s;var l=n[s-1],f=l&&l.index===o.index?l.time:0,h=l?l.offset:0;return{index:o.index,time:f+(o.time-f)*(t-h)/(o.offset-h)}}}return{index:n[r-1].index,time:1}},drawPart:function(t,n,r){for(var s=this._get(n),a=this._get(r),o=s.index,l=a.index;o<=l;o++){var f=gt.getPart(this.curves[o],o===s.index?s.time:0,o===a.index?a.time:1);o===s.index&&t.moveTo(f[0],f[1]),t.bezierCurveTo.apply(t,f.slice(2))}}},z.each(gt._evaluateMethods,function(t){this[t+"At"]=function(n){var r=this._get(n);return gt[t](this.curves[r.index],r.time)}},{})),ir=z.extend({initialize:function(t){for(var n=this.points=[],r=t._segments,s=t._closed,a=0,o,l=r.length;a<l;a++){var f=r[a].point;(!o||!o.equals(f))&&n.push(o=f.clone())}s&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=s},fit:function(t){var n=this.points,r=n.length,s=null;return r>0&&(s=[new Lt(n[0])],r>1&&(this.fitCubic(s,t,0,r-1,n[1].subtract(n[0]),n[r-2].subtract(n[r-1])),this.closed&&(s.shift(),s.pop()))),s},fitCubic:function(t,n,r,s,a,o){var l=this.points;if(s-r===1){var f=l[r],h=l[s],c=f.getDistance(h)/3;this.addCurve(t,[f,f.add(a.normalize(c)),h.add(o.normalize(c)),h]);return}for(var p=this.chordLengthParameterize(r,s),w=Math.max(n,n*n),v,g=!0,I=0;I<=4;I++){var y=this.generateBezier(r,s,p,a,o),A=this.findMaxError(r,s,y,p);if(A.error<n&&g){this.addCurve(t,y);return}if(v=A.index,A.error>=w)break;g=this.reparameterize(r,s,p,y),w=A.error}var m=l[v-1].subtract(l[v+1]);this.fitCubic(t,n,r,v,a,m),this.fitCubic(t,n,v,s,m.negate(),o)},addCurve:function(t,n){var r=t[t.length-1];r.setHandleOut(n[1].subtract(n[0])),t.push(new Lt(n[3],n[2].subtract(n[3])))},generateBezier:function(t,n,r,s,a){for(var o=1e-12,l=Math.abs,f=this.points,h=f[t],c=f[n],p=[[0,0],[0,0]],w=[0,0],v=0,g=n-t+1;v<g;v++){var I=r[v],y=1-I,A=3*I*y,m=y*y*y,b=A*y,_=A*I,x=I*I*I,C=s.normalize(b),O=a.normalize(_),S=f[t+v].subtract(h.multiply(m+b)).subtract(c.multiply(_+x));p[0][0]+=C.dot(C),p[0][1]+=C.dot(O),p[1][0]=p[0][1],p[1][1]+=O.dot(O),w[0]+=C.dot(S),w[1]+=O.dot(S)}var R=p[0][0]*p[1][1]-p[1][0]*p[0][1],F,B;if(l(R)>o){var W=p[0][0]*w[1]-p[1][0]*w[0],N=w[0]*p[1][1]-w[1]*p[0][1];F=N/R,B=W/R}else{var U=p[0][0]+p[0][1],H=p[1][0]+p[1][1];F=B=l(U)>o?w[0]/U:l(H)>o?w[1]/H:0}var G=c.getDistance(h),Z=o*G,$,ot;if(F<Z||B<Z)F=B=G/3;else{var _t=c.subtract(h);$=s.normalize(F),ot=a.normalize(B),$.dot(_t)-ot.dot(_t)>G*G&&(F=B=G/3,$=ot=null)}return[h,h.add($||s.normalize(F)),c.add(ot||a.normalize(B)),c]},reparameterize:function(t,n,r,s){for(var a=t;a<=n;a++)r[a-t]=this.findRoot(s,this.points[a],r[a-t]);for(var a=1,o=r.length;a<o;a++)if(r[a]<=r[a-1])return!1;return!0},findRoot:function(t,n,r){for(var s=[],a=[],o=0;o<=2;o++)s[o]=t[o+1].subtract(t[o]).multiply(3);for(var o=0;o<=1;o++)a[o]=s[o+1].subtract(s[o]).multiply(2);var l=this.evaluate(3,t,r),f=this.evaluate(2,s,r),h=this.evaluate(1,a,r),c=l.subtract(n),p=f.dot(f)+c.dot(h);return J.isMachineZero(p)?r:r-c.dot(f)/p},evaluate:function(t,n,r){for(var s=n.slice(),a=1;a<=t;a++)for(var o=0;o<=t-a;o++)s[o]=s[o].multiply(1-r).add(s[o+1].multiply(r));return s[0]},chordLengthParameterize:function(t,n){for(var r=[0],s=t+1;s<=n;s++)r[s-t]=r[s-t-1]+this.points[s].getDistance(this.points[s-1]);for(var s=1,a=n-t;s<=a;s++)r[s]/=r[a];return r},findMaxError:function(t,n,r,s){for(var a=Math.floor((n-t+1)/2),o=0,l=t+1;l<n;l++){var f=this.evaluate(3,r,s[l-t]),h=f.subtract(this.points[l]),c=h.x*h.x+h.y*h.y;c>=o&&(o=c,a=l)}return{error:o,index:a}}}),rr=Ct.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(n){this._content="",this._lines=[];var r=n&&z.isPlainObject(n)&&n.x===T&&n.y===T;this._initialize(r&&n,!r&&k.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),ia=rr.extend({_class:"PointText",initialize:function(){rr.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new Ot(t.x,t.y,this,"setPoint")},setPoint:function(){var t=k.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,n,r){if(this._content){this._setStyles(t,n,r);var s=this._lines,a=this._style,o=a.hasFill(),l=a.hasStroke(),f=a.getLeading(),h=t.shadowColor;t.font=a.getFontStyle(),t.textAlign=a.getJustification();for(var c=0,p=s.length;c<p;c++){t.shadowColor=h;var w=s[c];o&&(t.fillText(w,0,0),t.shadowColor="rgba(0,0,0,0)"),l&&t.strokeText(w,0,0),t.translate(0,f)}}},_getBounds:function(t,n){var r=this._style,s=this._lines,a=s.length,o=r.getJustification(),l=r.getLeading(),f=this.getView().getTextWidth(r.getFontStyle(),s),h=0;o!=="left"&&(h-=f/(o==="center"?2:1));var c=new xt(h,a?-.75*l:0,f,a*l);return t?t._transformBounds(c,c):c}}),be=z.extend(new function(){var t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={transparent:[0,0,0,0]},s;function a(f){var h=f.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||f.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),c="rgb",p;if(h){var w=h[4]?4:3;p=new Array(w);for(var v=0;v<w;v++){var g=h[v+1];p[v]=parseInt(g.length==1?g+g:g,16)/255}}else if(h=f.match(/^(rgb|hsl)a?\((.*)\)$/)){c=h[1],p=h[2].trim().split(/[,\s]+/g);for(var I=c==="hsl",v=0,y=Math.min(p.length,4);v<y;v++){var A=p[v],g=parseFloat(A);if(I)if(v===0){var m=A.match(/([a-z]*)$/)[1];g*={turn:360,rad:180/Math.PI,grad:.9}[m]||1}else v<3&&(g/=100);else v<3&&(g/=/%$/.test(A)?100:255);p[v]=g}}else{var b=r[f];if(!b)if(wt){s||(s=oe.getContext(1,1,{willReadFrequently:!0}),s.globalCompositeOperation="copy"),s.fillStyle="rgba(0,0,0,0)",s.fillStyle=f,s.fillRect(0,0,1,1);var _=s.getImageData(0,0,1,1).data;b=r[f]=[_[0]/255,_[1]/255,_[2]/255]}else b=[0,0,0];p=b.slice()}return[c,p]}var o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],l={"rgb-hsb":function(f,h,c){var p=Math.max(f,h,c),w=Math.min(f,h,c),v=p-w,g=v===0?0:(p==f?(h-c)/v+(h<c?6:0):p==h?(c-f)/v+2:(f-h)/v+4)*60;return[g,p===0?0:v/p,p]},"hsb-rgb":function(f,h,c){f=(f/60%6+6)%6;var w=Math.floor(f),p=f-w,w=o[w],v=[c,c*(1-h),c*(1-h*p),c*(1-h*(1-p))];return[v[w[0]],v[w[1]],v[w[2]]]},"rgb-hsl":function(f,h,c){var p=Math.max(f,h,c),w=Math.min(f,h,c),v=p-w,g=v===0,I=g?0:(p==f?(h-c)/v+(h<c?6:0):p==h?(c-f)/v+2:(f-h)/v+4)*60,y=(p+w)/2,A=g?0:y<.5?v/(p+w):v/(2-p-w);return[I,A,y]},"hsl-rgb":function(f,h,c){if(f=(f/360%1+1)%1,h===0)return[c,c,c];for(var p=[f+1/3,f,f-1/3],w=c<.5?c*(1+h):c+h-c*h,v=2*c-w,g=[],I=0;I<3;I++){var y=p[I];y<0&&(y+=1),y>1&&(y-=1),g[I]=6*y<1?v+(w-v)*6*y:2*y<1?w:3*y<2?v+(w-v)*(2/3-y)*6:v}return g},"rgb-gray":function(f,h,c){return[f*.2989+h*.587+c*.114]},"gray-rgb":function(f){return[f,f,f]},"gray-hsb":function(f){return[0,0,f]},"gray-hsl":function(f){return[0,0,f]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return z.each(t,function(f,h){n[h]=[],z.each(f,function(c,p){var w=z.capitalize(c),v=/^(hue|saturation)$/.test(c),g=n[h][p]=h==="gradient"?c==="gradient"?function(I){var y=this._components[0];return I=jn.read(Array.isArray(I)?I:arguments,0,{readNull:!0}),y!==I&&(y&&y._removeOwner(this),I&&I._addOwner(this)),I}:function(){return k.read(arguments,0,{readNull:c==="highlight",clone:!0})}:function(I){return I==null||isNaN(I)?0:+I};this["get"+w]=function(){return this._type===h||v&&/^hs[bl]$/.test(this._type)?this._components[p]:this._convert(h)[p]},this["set"+w]=function(I){this._type!==h&&!(v&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(h),this._properties=t[h],this._type=h),this._components[p]=g.call(this,I),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function f(h){var c=arguments,p=this.__read,w=0,v,g,I,y;Array.isArray(h)&&(c=h,h=c[0]);var A=h!=null&&typeof h;if(A==="string"&&h in t&&(v=h,h=c[1],Array.isArray(h)?(g=h,I=c[2]):(p&&(w=1),c=z.slice(c,1),A=typeof h)),!g){if(y=A==="number"?c:A==="object"&&h.length!=null?h:null,y){v||(v=y.length>=3?"rgb":"gray");var m=t[v].length;I=y[m],p&&(w+=y===arguments?m+(I!=null?1:0):1),y.length>m&&(y=z.slice(y,0,m))}else if(A==="string"){var b=a(h);v=b[0],g=b[1],g.length===4&&(I=g[3],g.length--)}else if(A==="object")if(h.constructor===f){if(v=h._type,g=h._components.slice(),I=h._alpha,v==="gradient")for(var _=1,x=g.length;_<x;_++){var C=g[_];C&&(g[_]=C.clone())}}else if(h.constructor===jn)v="gradient",y=c;else{v="hue"in h?"lightness"in h?"hsl":"hsb":"gradient"in h||"stops"in h||"radial"in h?"gradient":"gray"in h?"gray":"rgb";var O=t[v],S=n[v];this._components=g=[];for(var _=0,x=O.length;_<x;_++){var R=h[O[_]];R==null&&!_&&v==="gradient"&&"stops"in h&&(R={stops:h.stops,radial:h.radial}),R=S[_].call(this,R),R!=null&&(g[_]=R)}I=h.alpha}p&&v&&(w=1)}if(this._type=v||"rgb",!g){this._components=g=[];for(var S=n[this._type],_=0,x=S.length;_<x;_++){var R=S[_].call(this,y&&y[_]);R!=null&&(g[_]=R)}}return this._components=g,this._properties=t[this._type],this._alpha=I,p&&(this.__read=w),this},set:"#initialize",_serialize:function(f,h){var c=this.getComponents();return z.serialize(/^(gray|rgb)$/.test(this._type)?c:[this._type].concat(c),f,!0,h)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(f){var h;return this._type===f?this._components.slice():(h=l[this._type+"-"+f])?h.apply(this,this._components):l["rgb-"+f].apply(this,l[this._type+"-rgb"].apply(this,this._components))},convert:function(f){return new be(f,this._convert(f),this._alpha)},getType:function(){return this._type},setType:function(f){this._components=this._convert(f),this._properties=t[f],this._type=f},getComponents:function(){var f=this._components.slice();return this._alpha!=null&&f.push(this._alpha),f},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(f){this._alpha=f==null?null:Math.min(Math.max(f,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(f){var h=z.isPlainValue(f,!0)?be.read(arguments):f;return h===this||h&&this._class===h._class&&this._type===h._type&&this.getAlpha()===h.getAlpha()&&z.equals(this._components,h._components)||!1},toString:function(){for(var f=this._properties,h=[],c=this._type==="gradient",p=ft.instance,w=0,v=f.length;w<v;w++){var g=this._components[w];g!=null&&h.push(f[w]+": "+(c?g:p.number(g)))}return this._alpha!=null&&h.push("alpha: "+p.number(this._alpha)),"{ "+h.join(", ")+" }"},toCSS:function(f){var h=this._convert("rgb"),c=f||this._alpha==null?1:this._alpha;function p(w){return Math.round((w<0?0:w>1?1:w)*255)}return h=[p(h[0]),p(h[1]),p(h[2])],c<1&&h.push(c<0?0:c),f?"#"+((1<<24)+(h[0]<<16)+(h[1]<<8)+h[2]).toString(16).slice(1):(h.length==4?"rgba(":"rgb(")+h.join(",")+")"},toCanvasStyle:function(f,h){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var c=this._components,p=c[0],w=p._stops,v=c[1],g=c[2],I=c[3],y=h&&h.inverted(),A;if(y&&(v=y._transformPoint(v),g=y._transformPoint(g),I&&(I=y._transformPoint(I))),p._radial){var m=g.getDistance(v);if(I){var b=I.subtract(v);b.getLength()>m&&(I=v.add(b.normalize(m-.1)))}var _=I||v;A=f.createRadialGradient(_.x,_.y,0,v.x,v.y,m)}else A=f.createLinearGradient(v.x,v.y,g.x,g.y);for(var x=0,C=w.length;x<C;x++){var O=w[x],S=O._offset;A.addColorStop(S??x/(C-1),O._color.toCanvasStyle())}return this._canvasStyle=A},transform:function(f){if(this._type==="gradient"){for(var h=this._components,c=1,p=h.length;c<p;c++){var w=h[c];f._transformPoint(w,w,!0)}this._changed()}},statics:{_types:t,random:function(){var f=Math.random;return new be(f(),f(),f())},_setOwner:function(f,h,c){return f&&(f._owner&&h&&f._owner!==h&&(f=f.clone()),!f._owner^!h&&(f._owner=h||null,f._setter=c||null)),f}}})},new function(){var t={add:function(n,r){return n+r},subtract:function(n,r){return n-r},multiply:function(n,r){return n*r},divide:function(n,r){return n/r}};return z.each(t,function(n,r){this[r]=function(s){s=be.read(arguments);for(var a=this._type,o=this._components,l=s._convert(a),f=0,h=o.length;f<h;f++)l[f]=n(o[f],l[f]);return new be(a,l,this._alpha!=null?n(this._alpha,s.getAlpha()):null)}},{})}),jn=z.extend({_class:"Gradient",initialize:function(n,r){this._id=ut.get(),n&&z.isPlainObject(n)&&(this.set(n),n=r=null),this._stops==null&&this.setStops(n||["white","black"]),this._radial==null&&this.setRadial(typeof r=="string"&&r==="radial"||r||!1)},_serialize:function(t,n){return n.add(this,function(){return z.serialize([this._stops,this._radial],t,!0,n)})},_changed:function(){for(var t=0,n=this._owners&&this._owners.length;t<n;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var n=this._owners?this._owners.indexOf(t):-1;n!=-1&&(this._owners.splice(n,1),this._owners.length||(this._owners=T))},clone:function(){for(var t=[],n=0,r=this._stops.length;n<r;n++)t[n]=this._stops[n].clone();return new jn(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var n=this._stops;if(n)for(var r=0,s=n.length;r<s;r++)n[r]._owner=T;n=this._stops=Er.readList(t,0,{clone:!0});for(var r=0,s=n.length;r<s;r++)n[r]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var n=this._stops,r=t._stops,s=n.length;if(s===r.length){for(var a=0;a<s;a++)if(!n[a].equals(r[a]))return!1;return!0}}return!1}}),Er=z.extend({_class:"GradientStop",initialize:function(n,r){var s=n,a=r;typeof n=="object"&&r===T&&(Array.isArray(n)&&typeof n[0]!="number"?(s=n[0],a=n[1]):("color"in n||"offset"in n||"rampPoint"in n)&&(s=n.color,a=n.offset||n.rampPoint||0)),this.setColor(s),this.setOffset(a)},clone:function(){return new Er(this._color.clone(),this._offset)},_serialize:function(t,n){var r=this._color,s=this._offset;return z.serialize(s==null?[r]:[r,s],t,!0,n)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){be._setOwner(this._color,null),this._color=be._setOwner(be.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),ti=z.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new k,selectedColor:null},n=z.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),r=z.set({},n,{fillColor:new be}),s={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},o={_class:"Style",beans:!0,initialize:function(f,h,c){this._values={},this._owner=h,this._project=h&&h._project||c||Xt.project,this._defaults=!h||h instanceof Zt?n:h instanceof rr?r:t,f&&this.set(f)}};return z.each(n,function(l,f){var h=/Color$/.test(f),c=f==="shadowOffset",p=z.capitalize(f),w=s[f],v="set"+p,g="get"+p;o[v]=function(I){var y=this._owner,A=y&&y._children,m=A&&A.length>0&&!(y instanceof De);if(m)for(var b=0,_=A.length;b<_;b++)A[b]._style[v](I);if((f==="selectedColor"||!m)&&f in this._defaults){var x=this._values[f];x!==I&&(h&&(x&&(be._setOwner(x,null),x._canvasStyle=null),I&&I.constructor===be&&(I=be._setOwner(I,y,m&&v))),this._values[f]=I,y&&y._changed(w||129))}},o[g]=function(I){var y=this._owner,A=y&&y._children,m=A&&A.length>0&&!(y instanceof De),b;if(m&&!I)for(var _=0,x=A.length;_<x;_++){var C=A[_]._style[g]();if(!_)b=C;else if(!z.equals(b,C))return T}else if(f in this._defaults){var b=this._values[f];if(b===T)b=this._defaults[f],b&&b.clone&&(b=b.clone());else{var O=h?be:c?k:null;O&&!(b&&b.constructor===O)&&(this._values[f]=b=O.read([b],0,{readNull:!0,clone:!0}))}}return b&&h&&(b=be._setOwner(b,y,m&&v)),b},a[g]=function(I){return this._style[g](I)},a[v]=function(I){this._style[v](I)}}),z.each({Font:"FontFamily",WindingRule:"FillRule"},function(l,f){var h="get"+f,c="set"+f;o[h]=a[h]="#get"+l,o[c]=a[c]="#set"+l}),Ct.inject(a),o},{set:function(t){var n=t instanceof ti,r=n?t._values:t;if(r){for(var s in r)if(s in this._defaults){var a=r[s];this[s]=a&&n&&a.clone?a.clone():a}}},equals:function(t){function n(r,s,a){var o=r._values,l=s._values,f=s._defaults;for(var h in o){var c=o[h],p=l[h];if(!(a&&h in l)&&!z.equals(c,p===T?f[h]:p))return!1}return!0}return t===this||t&&this._class===t._class&&n(this,t)&&n(t,this,!0)||!1},_dispose:function(){var t;t=this.getFillColor(),t&&(t._canvasStyle=null),t=this.getStrokeColor(),t&&(t._canvasStyle=null),t=this.getShadowColor(),t&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var n=t.base.call(this),r=this.getFontSize();return/pt|em|%|px/.test(r)&&(r=this.getView().getPixelSize(r)),n??r*1.2}}),me=new function(){function t(n,r,s,a){for(var o=["","webkit","moz","Moz","ms","o"],l=r[0].toUpperCase()+r.substring(1),f=0;f<6;f++){var h=o[f],c=h?h+l:r;if(c in n){if(s)n[c]=a;else return n[c];break}}}return{getStyles:function(n){var r=n&&n.nodeType!==9?n.ownerDocument:n,s=r&&r.defaultView;return s&&s.getComputedStyle(n,"")},getBounds:function(n,r){var s=n.ownerDocument,a=s.body,o=s.documentElement,l;try{l=n.getBoundingClientRect()}catch{l={left:0,top:0,width:0,height:0}}var f=l.left-(o.clientLeft||a.clientLeft||0),h=l.top-(o.clientTop||a.clientTop||0);if(!r){var c=s.defaultView;f+=c.pageXOffset||o.scrollLeft||a.scrollLeft,h+=c.pageYOffset||o.scrollTop||a.scrollTop}return new xt(f,h,l.width,l.height)},getViewportBounds:function(n){var r=n.ownerDocument,s=r.defaultView,a=r.documentElement;return new xt(0,0,s.innerWidth||a.clientWidth,s.innerHeight||a.clientHeight)},getOffset:function(n,r){return me.getBounds(n,r).getPoint()},getSize:function(n){return me.getBounds(n,!0).getSize()},isInvisible:function(n){return me.getSize(n).equals(new vt(0,0))},isInView:function(n){return!me.isInvisible(n)&&me.getViewportBounds(n).intersects(me.getBounds(n,!0))},isInserted:function(n){return ct.body.contains(n)},getPrefixed:function(n,r){return n&&t(n,r)},setPrefixed:function(n,r,s){if(typeof r=="object")for(var a in r)t(n,a,!0,r[a]);else t(n,r,!0,s)}}},ze={add:function(t,n){if(t)for(var r in n)for(var s=n[r],a=r.split(/[\s,]+/g),o=0,l=a.length;o<l;o++){var f=a[o],h=t===ct&&(f==="touchstart"||f==="touchmove")?{passive:!1}:!1;t.addEventListener(f,s,h)}},remove:function(t,n){if(t)for(var r in n)for(var s=n[r],a=r.split(/[\s,]+/g),o=0,l=a.length;o<l;o++)t.removeEventListener(a[o],s,!1)},getPoint:function(t){var n=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new k(n.pageX||n.clientX+ct.documentElement.scrollLeft,n.pageY||n.clientY+ct.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,n){return ze.getPoint(t).subtract(me.getOffset(n||ze.getTarget(t)))}};ze.requestAnimationFrame=new function(){var t=me.getPrefixed(wt,"requestAnimationFrame"),n=!1,r=[],s;function a(){var o=r;r=[];for(var l=0,f=o.length;l<f;l++)o[l]();n=t&&r.length,n&&t(a)}return function(o){r.push(o),t?n||(t(a),n=!0):s||(s=setInterval(a,1e3/60))}};var we=z.extend(Et,{_class:"View",initialize:function t(n,r){function s(w){return r[w]||parseInt(r.getAttribute(w),10)}function a(){var w=me.getSize(r);return w.isNaN()||w.isZero()?new vt(s("width"),s("height")):w}var o;if(wt&&r){this._id=r.getAttribute("id"),this._id==null&&r.setAttribute("id",this._id="paper-view-"+t._id++),ze.add(r,this._viewEvents);var l="none";if(me.setPrefixed(r.style,{userDrag:l,userSelect:l,touchCallout:l,contentZooming:l,tapHighlightColor:"rgba(0,0,0,0)"}),lt.hasAttribute(r,"resize")){var f=this;ze.add(wt,this._windowEvents={resize:function(){f.setViewSize(a())}})}if(o=a(),lt.hasAttribute(r,"stats")&&typeof Stats<"u"){this._stats=new Stats;var h=this._stats.domElement,c=h.style,p=me.getOffset(r);c.position="absolute",c.left=p.x+"px",c.top=p.y+"px",ct.body.appendChild(h)}}else o=new vt(r),r=null;this._project=n,this._scope=n._scope,this._element=r,this._pixelRatio||(this._pixelRatio=wt&&wt.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new Ht)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Xt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;we._focused===this&&(we._focused=null),we._views.splice(we._views.indexOf(this),1),delete we._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),ze.remove(this._element,this._viewEvents),ze.remove(wt,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:z.each(Ct._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;ze.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var n=t._element;(!me.getPrefixed(ct,"hidden")||lt.getAttribute(n,"keepalive")==="true")&&me.isInView(n)&&t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Xt=this._scope;var t=Date.now()/1e3,n=this._last?t-this._last:0;this._last=t,this.emit("frame",new z({delta:n,time:this._time+=n,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,n){var r=this._frameItems;n?(r[t._id]={item:t,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete r[t._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var n in this._frameItems){var r=this._frameItems[n];r.item.emit("frame",new z(t,{time:r.time+=t.delta,count:r.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=T},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var t=this._viewSize;return new Gt(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=vt.read(arguments),n=t.subtract(this._viewSize);n.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:n}),this._autoUpdate&&this.update())},_setElementSize:function(t,n){var r=this._element;r&&(r.width!==t&&(r.width=t),r.height!==n&&(r.height=n))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new xt(new k,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return me.isInView(this._element)},isInserted:function(){return me.isInserted(this._element)},getPixelSize:function(t){var n=this._element,r;if(n){var s=n.parentNode,a=ct.createElement("div");a.style.fontSize=t,s.appendChild(a),r=parseFloat(me.getStyles(a).fontSize),s.removeChild(a)}else r=parseFloat(r);return r},getTextWidth:function(t,n){return 0}},z.each(["rotate","scale","shear","skew"],function(t){var n=t==="rotate";this[t]=function(){var r=arguments,s=(n?z:k).read(r),a=k.read(r,0,{readNull:!0});return this.transform(new Ht()[t](s,a||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new Ht;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=k.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform(new Ht().scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var n=this.getRotation();n!=null&&t!=null&&this.rotate(t-n)},getScaling:function(){var t=this._decompose().scaling;return new Ot(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),n=k.read(arguments,0,{clone:!0,readNull:!0});t&&n&&this.scale(n.x/t.x,n.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(k.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(k.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(k.read(arguments))},getEventPoint:function(t){return this.viewToProject(ze.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,n){ct&&typeof n=="string"&&(n=ct.getElementById(n));var r=wt?sr:we;return new r(t,n)}}},new function(){if(!wt)return;var t,n,r=!1,s=!1;function a(N){var U=ze.getTarget(N);return U.getAttribute&&we._viewsById[U.getAttribute("id")]}function o(){var N=we._focused;if(!N||!N.isVisible()){for(var U=0,H=we._views.length;U<H;U++)if((N=we._views[U]).isVisible()){we._focused=n=N;break}}}function l(N,U,H){N._handleMouseEvent("mousemove",U,H)}var f=wt.navigator,h,c,p;f.pointerEnabled||f.msPointerEnabled?(h="pointerdown MSPointerDown",c="pointermove MSPointerMove",p="pointerup pointercancel MSPointerUp MSPointerCancel"):(h="touchstart",c="touchmove",p="touchend touchcancel","ontouchstart"in wt&&f.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(h+=" mousedown",c+=" mousemove",p+=" mouseup"));var w={},v={mouseout:function(N){var U=we._focused,H=ze.getRelatedTarget(N);if(U&&(!H||H.nodeName==="HTML")){var G=ze.getOffset(N,U._element),Z=G.x,$=Math.abs,ot=$(Z),_t=1<<25,pt=ot-_t;G.x=$(pt)<ot?pt*(Z<0?-1:1):Z,l(U,N,U.viewToProject(G))}},scroll:o};w[h]=function(N){var U=we._focused=a(N);r||(r=!0,U._handleMouseEvent("mousedown",N))},v[c]=function(N){var U=we._focused;if(!s){var H=a(N);H?U!==H&&(U&&l(U,N),t||(t=U),U=we._focused=n=H):n&&n===U&&(t&&!t.isInserted()&&(t=null),U=we._focused=t,t=null,o())}U&&l(U,N)},v[h]=function(){s=!0},v[p]=function(N){var U=we._focused;U&&r&&U._handleMouseEvent("mouseup",N),s=r=!1},ze.add(ct,v),ze.add(wt,{load:o});var g=!1,I=!1,y={doubleclick:"click",mousedrag:"mousemove"},A=!1,m,b,_,x,C,O,S,R;function F(N,U,H,G,Z,$,ot){var _t=!1,pt;function It(et,rt){if(et.responds(rt)){if(pt||(pt=new ra(rt,G,Z,U||et,$?Z.subtract($):null)),et.emit(rt,pt)&&(g=!0,pt.prevented&&(I=!0),pt.stopped))return _t=!0}else{var yt=y[rt];if(yt)return It(et,yt)}}for(;N&&N!==ot&&!It(N,H);)N=N._parent;return _t}function B(N,U,H,G,Z,$){return N._project.removeOn(H),I=g=!1,C&&F(C,null,H,G,Z,$)||U&&U!==C&&!U.isDescendant(C)&&F(U,null,H==="mousedrag"?"mousemove":H,G,Z,$,C)||F(N,C||U||N,H,G,Z,$)}var W={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:w,_handleMouseEvent:function(N,U,H){var G=this._itemEvents,Z=G.native[N],$=N==="mousemove",ot=this._scope.tool,_t=this;function pt(zt){return G.virtual[zt]||_t.responds(zt)||ot&&ot.responds(zt)}$&&r&&pt("mousedrag")&&(N="mousedrag"),H||(H=this.getEventPoint(U));var It=this.getBounds().contains(H),et=Z&&It&&_t._project.hitTest(H,{tolerance:0,fill:!0,stroke:!0}),rt=et&&et.item||null,yt=!1,Tt={};if(Tt[N.substr(5)]=!0,Z&&rt!==x&&(x&&F(x,null,"mouseleave",U,H),rt&&F(rt,null,"mouseenter",U,H),x=rt),A^It&&(F(this,null,It?"mouseenter":"mouseleave",U,H),yt=!0),(It||Tt.drag)&&!H.equals(b)&&(B(this,rt,$?N:"mousemove",U,H,b),yt=!0),A=It,Tt.down&&It||Tt.up&&m){if(B(this,rt,N,U,H,m),Tt.down){if(R=rt===O&&Date.now()-S<300,_=O=rt,!I&&rt){for(var Pt=rt;Pt&&!Pt.responds("mousedrag");)Pt=Pt._parent;Pt&&(C=rt)}m=H}else Tt.up&&(!I&&rt===_&&(S=Date.now(),B(this,rt,R?"doubleclick":"click",U,H,m),R=!1),_=C=null);A=!1,yt=!0}b=H,yt&&ot&&(g=ot._handleMouseEvent(N,U,H,Tt)||g),U.cancelable!==!1&&(g&&!Tt.move||Tt.down&&pt("mouseup"))&&U.preventDefault()},_handleKeyEvent:function(N,U,H,G){var Z=this._scope,$=Z.tool,ot;function _t(pt){pt.responds(N)&&(Xt=Z,pt.emit(N,ot=ot||new mn(N,U,H,G)))}this.isVisible()&&(_t(this),$&&$.responds(N)&&_t($))},_countItemEvent:function(N,U){var H=this._itemEvents,G=H.native,Z=H.virtual;for(var $ in W)G[$]=(G[$]||0)+(W[$][N]||0)*U;Z[N]=(Z[N]||0)+U},statics:{updateFocus:o,_resetState:function(){r=s=g=A=!1,t=n=m=b=_=x=C=O=S=R=null}}}}),sr=we.extend({_class:"CanvasView",initialize:function(n,r){if(!(r instanceof wt.HTMLCanvasElement)){var s=vt.read(arguments,1);if(s.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+z.slice(arguments,1));r=oe.getCanvas(s)}var a=this._context=r.getContext("2d");if(a.save(),this._pixelRatio=1,!/^off|false$/.test(lt.getAttribute(r,"hidpi"))){var o=wt.devicePixelRatio||1,l=me.getPrefixed(a,"backingStorePixelRatio")||1;this._pixelRatio=o/l}we.call(this,n,r),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(n,r){var s=this._pixelRatio;if(t.base.call(this,n*s,r*s),s!==1){var a=this._element,o=this._context;if(!lt.hasAttribute(a,"resize")){var l=a.style;l.width=n+"px",l.height=r+"px"}o.restore(),o.save(),o.scale(s,s)}},getContext:function(){return this._context},getPixelSize:function t(n){var r=Xt.agent,s;if(r&&r.firefox)s=t.base.call(this,n);else{var a=this._context,o=a.font;a.font=n+" serif",s=parseFloat(a.font),a.font=o}return s},getTextWidth:function(t,n){var r=this._context,s=r.font,a=0;r.font=t;for(var o=0,l=n.length;o<l;o++)a=Math.max(a,r.measureText(n[o]).width);return r.font=s,a},update:function(){if(!this._needsUpdate)return!1;var t=this._project,n=this._context,r=this._viewSize;return n.clearRect(0,0,r.width+1,r.height+1),t&&t.draw(n,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Ni=z.extend({_class:"Event",initialize:function(n){this.event=n,this.type=n&&n.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return bi.modifiers}}),mn=Ni.extend({_class:"KeyEvent",initialize:function(n,r,s,a){this.type=n,this.event=r,this.key=s,this.character=a},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),bi=new function(){var t={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},n={tab:"	",space:" ",enter:"\r"},r={},s={},a,o,l=new z({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var c=Xt&&Xt.agent;return c&&c.mac?this.meta:this.control}}});function f(c){var p=c.key||c.keyIdentifier;return p=/^U\+/.test(p)?String.fromCharCode(parseInt(p.substr(2),16)):/^Arrow[A-Z]/.test(p)?p.substr(5):p==="Unidentified"||p===T?String.fromCharCode(c.keyCode):p,t[p]||(p.length>1?z.hyphenate(p):p.toLowerCase())}function h(c,p,w,v){var g=we._focused,I;if(r[p]=c,c?s[p]=w:delete s[p],p.length>1&&(I=z.camelize(p))in l){l[I]=c;var y=Xt&&Xt.agent;if(I==="meta"&&y&&y.mac)if(c)a={};else{for(var A in a)A in s&&h(!1,A,a[A],v);a=null}}else c&&a&&(a[p]=w);g&&g._handleKeyEvent(c?"keydown":"keyup",v,p,w)}return ze.add(ct,{keydown:function(c){var p=f(c),w=Xt&&Xt.agent;p.length>1||w&&w.chrome&&(c.altKey||w.mac&&c.metaKey||!w.mac&&c.ctrlKey)?h(!0,p,n[p]||(p.length>1?"":p),c):o=p},keypress:function(c){if(o){var p=f(c),w=c.charCode,v=w>=32?String.fromCharCode(w):p.length>1?"":p;p!==o&&(p=v.toLowerCase()),h(!0,p,v,c),o=null}},keyup:function(c){var p=f(c);p in s&&h(!1,p,s[p],c)}}),ze.add(wt,{blur:function(c){for(var p in s)h(!1,p,s[p],c)}}),{modifiers:l,isDown:function(c){return!!r[c]}}},ra=Ni.extend({_class:"MouseEvent",initialize:function(n,r,s,a,o){this.type=n,this.event=r,this.point=s,this.target=a,this.delta=o},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),zn=Ni.extend({_class:"ToolEvent",_item:null,initialize:function(n,r,s){this.tool=n,this.type=r,this.event=s},_choosePoint:function(t,n){return t||(n?n.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var n=t.item,r=n._parent;/^(Group|CompoundPath)$/.test(r._class);)n=r,r=r._parent;this._item=n}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),os=K.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(n){K.call(this),this._moveCount=-1,this._downCount=-1,this.set(n)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,t!=null&&this._maxDistance!=null&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,this._minDistance!=null&&t!=null&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,n,r,s){Xt=this._scope,s.drag&&!this.responds(t)&&(t="mousemove");var a=s.move||s.drag,o=this.responds(t),l=this.minDistance,f=this.maxDistance,h=!1,c=this;function p(v,g){var I=r,y=a?c._point:c._downPoint||I;if(a){if(c._moveCount>=0&&I.equals(y))return!1;if(y&&(v!=null||g!=null)){var A=I.subtract(y),m=A.getLength();if(m<(v||0))return!1;g&&(I=y.add(A.normalize(Math.min(m,g))))}c._moveCount++}return c._point=I,c._lastPoint=y||I,s.down&&(c._moveCount=-1,c._downPoint=I,c._downCount++),!0}function w(){o&&(h=c.emit(t,new zn(c,t,n))||h)}if(s.down)p(),w();else if(s.up)p(null,f),w();else if(o)for(;p(l,f);)w();return h}}),sa=z.extend(Et,{_class:"Tween",statics:{easings:new z({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+2*(2-t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(n,r,s,a,o,l){this.object=n;var f=typeof o,h=f==="function";this.type=h?f:f==="string"?o:"linear",this.easing=h?o:t.easings[this.type],this.duration=a,this.running=!1,this._then=null,this._startTime=null;var c=r||s;this._keys=c?Object.keys(c):[],this._parsedKeys=this._parseKeys(this._keys),this._from=c&&this._getState(r),this._to=c&&this._getState(s),l!==!1&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var n=this.easing(t),r=this._keys,s=function(p){return typeof p=="function"?p(n,t):p},a=0,o=r&&r.length;a<o;a++){var l=r[a],f=s(this._from[l]),h=s(this._to[l]),c=f&&h&&f.__add&&h.__add?h.__subtract(f).__multiply(n).__add(f):(h-f)*n+f;this._setProperty(this._parsedKeys[l],c)}this.responds("update")&&this.emit("update",new z({progress:t,factor:n})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var n=this._startTime,r=n?(t-n)/this.duration:0;n||(this._startTime=t),this.update(r)},_getState:function(t){for(var n=this._keys,r={},s=0,a=n.length;s<a;s++){var o=n[s],l=this._parsedKeys[o],f=this._getProperty(l),h;if(t){var c=this._resolveValue(f,t[o]);this._setProperty(l,c),h=this._getProperty(l),h=h&&h.clone?h.clone():h,this._setProperty(l,f)}else h=f&&f.clone?f.clone():f;r[o]=h}return r},_resolveValue:function(t,n){if(n){if(Array.isArray(n)&&n.length===2){var r=n[0];return r&&r.match&&r.match(/^[+\-\*\/]=/)?this._calculate(t,r[0],n[1]):n}else if(typeof n=="string"){var s=n.match(/^[+\-*/]=(.*)/);if(s){var a=JSON.parse(s[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,n[0],a)}}}return n},_calculate:function(t,n,r){return Xt.PaperScript.calculateBinary(t,n,r)},_parseKeys:function(t){for(var n={},r=0,s=t.length;r<s;r++){var a=t[r],o=a.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");n[a]=o.split("/")}return n},_getProperty:function(t,n){for(var r=this.object,s=0,a=t.length-(n||0);s<a&&r;s++)r=r[t[s]];return r},_setProperty:function(t,n){var r=this._getProperty(t,1);r&&(r[t[t.length-1]]=n)}}),Si={request:function(t){var n=new mt.XMLHttpRequest;return n.open((t.method||"get").toUpperCase(),t.url,z.pick(t.async,!0)),t.mimeType&&n.overrideMimeType(t.mimeType),n.onload=function(){var r=n.status;r===0||r===200?t.onLoad&&t.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var r=n.status,s='Could not load "'+t.url+'" (Status: '+r+")";if(t.onError)t.onError(s,r);else throw new Error(s)},n.send(null)}},oe=z.exports.CanvasProvider={canvases:[],getCanvas:function(t,n,r){if(!wt)return null;var s,a=!0;typeof t=="object"&&(n=t.height,t=t.width),this.canvases.length?s=this.canvases.pop():(s=ct.createElement("canvas"),a=!1);var o=s.getContext("2d",r||{});if(!o)throw new Error("Canvas "+s+" is unable to provide a 2D context.");return s.width===t&&s.height===n?a&&o.clearRect(0,0,t+1,n+1):(s.width=t,s.height=n),o.save(),s},getContext:function(t,n,r){var s=this.getCanvas(t,n,r);return s?s.getContext("2d",r||{}):null},release:function(t){var n=t&&t.canvas?t.canvas:t;n&&n.getContext&&(n.getContext("2d").restore(),this.canvases.push(n))}},ei=new function(){var t=Math.min,n=Math.max,r=Math.abs,s,a,o,l,f,h,c,p,w,v,g;function I(C,O,S){return .2989*C+.587*O+.114*S}function y(C,O,S,B){var F=B-I(C,O,S);w=C+F,v=O+F,g=S+F;var B=I(w,v,g),W=t(w,v,g),N=n(w,v,g);if(W<0){var U=B-W;w=B+(w-B)*B/U,v=B+(v-B)*B/U,g=B+(g-B)*B/U}if(N>255){var H=255-B,G=N-B;w=B+(w-B)*H/G,v=B+(v-B)*H/G,g=B+(g-B)*H/G}}function A(C,O,S){return n(C,O,S)-t(C,O,S)}function m(C,O,S,R){var F=[C,O,S],B=n(C,O,S),W=t(C,O,S),N;W=W===C?0:W===O?1:2,B=B===C?0:B===O?1:2,N=t(W,B)===0?n(W,B)===1?2:1:0,F[B]>F[W]?(F[N]=(F[N]-F[W])*R/(F[B]-F[W]),F[B]=R):F[N]=F[B]=0,F[W]=0,w=F[0],v=F[1],g=F[2]}var b={multiply:function(){w=f*s/255,v=h*a/255,g=c*o/255},screen:function(){w=f+s-f*s/255,v=h+a-h*a/255,g=c+o-c*o/255},overlay:function(){w=f<128?2*f*s/255:255-2*(255-f)*(255-s)/255,v=h<128?2*h*a/255:255-2*(255-h)*(255-a)/255,g=c<128?2*c*o/255:255-2*(255-c)*(255-o)/255},"soft-light":function(){var C=s*f/255;w=C+f*(255-(255-f)*(255-s)/255-C)/255,C=a*h/255,v=C+h*(255-(255-h)*(255-a)/255-C)/255,C=o*c/255,g=C+c*(255-(255-c)*(255-o)/255-C)/255},"hard-light":function(){w=s<128?2*s*f/255:255-2*(255-s)*(255-f)/255,v=a<128?2*a*h/255:255-2*(255-a)*(255-h)/255,g=o<128?2*o*c/255:255-2*(255-o)*(255-c)/255},"color-dodge":function(){w=f===0?0:s===255?255:t(255,255*f/(255-s)),v=h===0?0:a===255?255:t(255,255*h/(255-a)),g=c===0?0:o===255?255:t(255,255*c/(255-o))},"color-burn":function(){w=f===255?255:s===0?0:n(0,255-(255-f)*255/s),v=h===255?255:a===0?0:n(0,255-(255-h)*255/a),g=c===255?255:o===0?0:n(0,255-(255-c)*255/o)},darken:function(){w=f<s?f:s,v=h<a?h:a,g=c<o?c:o},lighten:function(){w=f>s?f:s,v=h>a?h:a,g=c>o?c:o},difference:function(){w=f-s,w<0&&(w=-w),v=h-a,v<0&&(v=-v),g=c-o,g<0&&(g=-g)},exclusion:function(){w=f+s*(255-f-f)/255,v=h+a*(255-h-h)/255,g=c+o*(255-c-c)/255},hue:function(){m(s,a,o,A(f,h,c)),y(w,v,g,I(f,h,c))},saturation:function(){m(f,h,c,A(s,a,o)),y(w,v,g,I(f,h,c))},luminosity:function(){y(f,h,c,I(s,a,o))},color:function(){y(s,a,o,I(f,h,c))},add:function(){w=t(f+s,255),v=t(h+a,255),g=t(c+o,255)},subtract:function(){w=n(f-s,0),v=n(h-a,0),g=n(c-o,0)},average:function(){w=(f+s)/2,v=(h+a)/2,g=(c+o)/2},negation:function(){w=255-r(255-s-f),v=255-r(255-a-h),g=255-r(255-o-c)}},_=this.nativeModes=z.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(C){this[C]=!0},{}),x=oe.getContext(1,1,{willReadFrequently:!0});x&&(z.each(b,function(C,O){var S=O==="darken",R=!1;x.save();try{x.fillStyle=S?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=O,x.globalCompositeOperation===O&&(x.fillStyle=S?"#a00":"#300",x.fillRect(0,0,1,1),R=x.getImageData(0,0,1,1).data[0]!==S?170:51)}catch{}x.restore(),_[O]=R}),oe.release(x)),this.process=function(C,O,S,R,F){var B=O.canvas,W=C==="normal";if(W||_[C])S.save(),S.setTransform(1,0,0,1,0,0),S.globalAlpha=R,W||(S.globalCompositeOperation=C),S.drawImage(B,F.x,F.y),S.restore();else{var N=b[C];if(!N)return;for(var U=S.getImageData(F.x,F.y,B.width,B.height),H=U.data,G=O.getImageData(0,0,B.width,B.height).data,Z=0,$=H.length;Z<$;Z+=4){s=G[Z],f=H[Z],a=G[Z+1],h=H[Z+1],o=G[Z+2],c=H[Z+2],l=G[Z+3],p=H[Z+3],N();var ot=l*R/255,_t=1-ot;H[Z]=ot*w+_t*f,H[Z+1]=ot*v+_t*h,H[Z+2]=ot*g+_t*c,H[Z+3]=l*R+_t*p}S.putImageData(U,F.x,F.y)}}},Se=new function(){var t="http://www.w3.org/2000/svg",n="http://www.w3.org/2000/xmlns",r="http://www.w3.org/1999/xlink",s={href:r,xlink:n,xmlns:n+"/","xmlns:xlink":n+"/"};function a(f,h,c){return l(ct.createElementNS(t,f),h,c)}function o(f,h){var c=s[h],p=c?f.getAttributeNS(c,h):f.getAttribute(h);return p==="null"?null:p}function l(f,h,c){for(var p in h){var w=h[p],v=s[p];typeof w=="number"&&c&&(w=c.number(w)),v?f.setAttributeNS(v,p,w):f.setAttribute(p,w)}return f}return{svg:t,xmlns:n,xlink:r,create:a,get:o,set:l}},fs=z.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,n){return!n&&(t instanceof xe||t instanceof Qt||t instanceof rr)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,n){var r=z.capitalize(n),s=t[2];this[n]={type:t[1],property:n,attribute:t[0],toSVG:s,fromSVG:s&&z.each(s,function(a,o){this[a]=o},{}),exportFilter:t[3],get:"get"+r,set:"set"+r}},{});new function(){var t;function n(b,_,x){var C=new z,O=b.getTranslation();if(_){var S;b.isInvertible()?(b=b._shiftless(),S=b._inverseTransform(O),O=null):S=new k,C[x?"cx":"x"]=S.x,C[x?"cy":"y"]=S.y}if(!b.isIdentity()){var R=b.decompose();if(R){var F=[],B=R.rotation,W=R.scaling,N=R.skewing;O&&!O.isZero()&&F.push("translate("+t.point(O)+")"),B&&F.push("rotate("+t.number(B)+")"),(!J.isZero(W.x-1)||!J.isZero(W.y-1))&&F.push("scale("+t.point(W)+")"),N.x&&F.push("skewX("+t.number(N.x)+")"),N.y&&F.push("skewY("+t.number(N.y)+")"),C.transform=F.join(" ")}else C.transform="matrix("+b.getValues().join(",")+")"}return C}function r(b,_){for(var x=n(b._matrix),C=b._children,O=Se.create("g",x,t),S=0,R=C.length;S<R;S++){var F=C[S],B=A(F,_);if(B)if(F.isClipMask()){var W=Se.create("clipPath");W.appendChild(B),I(F,W,"clip"),Se.set(O,{"clip-path":"url(#"+W.id+")"})}else O.appendChild(B)}return O}function s(b,_){var x=n(b._matrix,!0),C=b.getSize(),O=b.getImage();return x.x-=C.width/2,x.y-=C.height/2,x.width=C.width,x.height=C.height,x.href=_.embedImages==!1&&O&&O.src||b.toDataURL(),Se.create("image",x,t)}function a(b,_){var x=_.matchShapes;if(x){var C=b.toShape(!1);if(C)return o(C)}var O=b._segments,S=O.length,R,F=n(b._matrix);if(x&&S>=2&&!b.hasHandles())if(S>2){R=b._closed?"polygon":"polyline";for(var B=[],W=0;W<S;W++)B.push(t.point(O[W]._point));F.points=B.join(" ")}else{R="line";var N=O[0]._point,U=O[1]._point;F.set({x1:N.x,y1:N.y,x2:U.x,y2:U.y})}else R="path",F.d=b.getPathData(null,_.precision);return Se.create(R,F,t)}function o(b){var _=b._type,x=b._radius,C=n(b._matrix,!0,_!=="rectangle");if(_==="rectangle"){_="rect";var O=b._size,S=O.width,R=O.height;C.x-=S/2,C.y-=R/2,C.width=S,C.height=R,x.isZero()&&(x=null)}return x&&(_==="circle"?C.r=x:(C.rx=x.width,C.ry=x.height)),Se.create(_,C,t)}function l(b,_){var x=n(b._matrix),C=b.getPathData(null,_.precision);return C&&(x.d=C),Se.create("path",x,t)}function f(b,_){var x=n(b._matrix,!0),C=b._definition,O=g(C,"symbol"),S=C._item,R=S.getStrokeBounds();return O||(O=Se.create("symbol",{viewBox:t.rectangle(R)}),O.appendChild(A(S,_)),I(C,O,"symbol")),x.href="#"+O.id,x.x+=R.x,x.y+=R.y,x.width=R.width,x.height=R.height,x.overflow="visible",Se.create("use",x,t)}function h(b){var _=g(b,"color");if(!_){var x=b.getGradient(),C=x._radial,O=b.getOrigin(),S=b.getDestination(),R;if(C){R={cx:O.x,cy:O.y,r:O.getDistance(S)};var F=b.getHighlight();F&&(R.fx=F.x,R.fy=F.y)}else R={x1:O.x,y1:O.y,x2:S.x,y2:S.y};R.gradientUnits="userSpaceOnUse",_=Se.create((C?"radial":"linear")+"Gradient",R,t);for(var B=x._stops,W=0,N=B.length;W<N;W++){var U=B[W],H=U._color,G=H.getAlpha(),Z=U._offset;R={offset:Z??W/(N-1)},H&&(R["stop-color"]=H.toCSS(!0)),G<1&&(R["stop-opacity"]=G),_.appendChild(Se.create("stop",R,t))}I(b,_,"color")}return"url(#"+_.id+")"}function c(b){var _=Se.create("text",n(b._matrix,!0),t);return _.textContent=b._content,_}var p={Group:r,Layer:r,Raster:s,Path:a,Shape:o,CompoundPath:l,SymbolItem:f,PointText:c};function w(b,_,x){var C={},O=!x&&b.getParent(),S=[];return b._name!=null&&(C.id=b._name),z.each(fs,function(R){var F=R.get,B=R.type,W=b[F]();if(R.exportFilter?R.exportFilter(b,W):!O||!z.equals(O[F](),W)){if(B==="color"&&W!=null){var N=W.getAlpha();N<1&&(C[R.attribute+"-opacity"]=N)}B==="style"?S.push(R.attribute+": "+W):C[R.attribute]=W==null?"none":B==="color"?W.gradient?h(W):W.toCSS(!0):B==="array"?W.join(","):B==="lookup"?R.toSVG[W]:W}}),S.length&&(C.style=S.join(";")),C.opacity===1&&delete C.opacity,b._visible||(C.visibility="hidden"),Se.set(_,C,t)}var v;function g(b,_){return v||(v={ids:{},svgs:{}}),b&&v.svgs[_+"-"+(b._id||b.__id||(b.__id=ut.get("svg")))]}function I(b,_,x){v||g();var C=v.ids[x]=(v.ids[x]||0)+1;_.id=x+"-"+C,v.svgs[x+"-"+(b._id||b.__id)]=_}function y(b,_){var x=b,C=null;if(v){x=b.nodeName.toLowerCase()==="svg"&&b;for(var O in v.svgs)C||(x||(x=Se.create("svg"),x.appendChild(b)),C=x.insertBefore(Se.create("defs"),x.firstChild)),C.appendChild(v.svgs[O]);v=null}return _.asString?new mt.XMLSerializer().serializeToString(x):x}function A(b,_,x){var C=p[b._class],O=C&&C(b,_);if(O){var S=_.onExport;S&&(O=S(b,O,_)||O);var R=JSON.stringify(b._data);R&&R!=="{}"&&R!=="null"&&O.setAttribute("data-paper-data",R)}return O&&w(b,O,x)}function m(b){return b||(b={}),t=new ft(b.precision),b}Ct.inject({exportSVG:function(b){return b=m(b),y(A(this,b,!0),b)}}),Mt.inject({exportSVG:function(b){b=m(b);var _=this._children,x=this.getView(),C=z.pick(b.bounds,"view"),O=b.matrix||C==="view"&&x._matrix,S=O&&Ht.read([O]),R=C==="view"?new xt([0,0],x.getViewSize()):C==="content"?Ct._getBounds(_,S,{stroke:!0}).rect:xt.read([C],0,{readNull:!0}),F={version:"1.1",xmlns:Se.svg,"xmlns:xlink":Se.xlink};R&&(F.width=R.width,F.height=R.height,(R.x||R.x===0||R.y||R.y===0)&&(F.viewBox=t.rectangle(R)));var B=Se.create("svg",F,t),W=B;S&&!S.isIdentity()&&(W=B.appendChild(Se.create("g",n(S),t)));for(var N=0,U=_.length;N<U;N++)W.appendChild(A(_[N],b,!0));return y(B,b)}})},new function(){var t={},n;function r(_,x,C,O,S,R){var F=Se.get(_,x)||R,B=F==null?O?null:C?"":0:C?F:parseFloat(F);return/%\s*$/.test(F)?B/100*(S?1:n[/x|^width/.test(x)?"width":"height"]):B}function s(_,x,C,O,S,R,F){return x=r(_,x||"x",!1,O,S,R),C=r(_,C||"y",!1,O,S,F),O&&(x==null||C==null)?null:new k(x,C)}function a(_,x,C,O,S){return x=r(_,x||"width",!1,O,S),C=r(_,C||"height",!1,O,S),O&&(x==null||C==null)?null:new vt(x,C)}function o(_,x,C){return _==="none"?null:x==="number"?parseFloat(_):x==="array"?_?_.split(/[\s,]+/g).map(parseFloat):[]:x==="color"?A(_)||_:x==="lookup"?C[_]:_}function l(_,x,C,O){var S=_.childNodes,R=x==="clippath",F=x==="defs",B=new Zt,W=B._project,N=W._currentStyle,U=[];if(!R&&!F&&(B=y(B,_,O),W._currentStyle=B._style.clone()),O)for(var H=_.querySelectorAll("defs"),G=0,Z=H.length;G<Z;G++)m(H[G],C,!1);for(var G=0,Z=S.length;G<Z;G++){var $=S[G],ot;$.nodeType===1&&!/^defs$/i.test($.nodeName)&&(ot=m($,C,!1))&&!(ot instanceof Ie)&&U.push(ot)}return B.addChildren(U),R&&(B=y(B.reduce(),_,O)),W._currentStyle=N,(R||F)&&(B.remove(),B=null),B}function f(_,x){for(var C=_.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),O=[],S=0,R=C.length;S<R;S+=2)O.push(new k(parseFloat(C[S]),parseFloat(C[S+1])));var F=new ne(O);return x==="polygon"&&F.closePath(),F}function h(_){return xe.create(_.getAttribute("d"))}function c(_,x){var C=(r(_,"href",!0)||"").substring(1),O=x==="radialgradient",S;if(C)S=t[C].getGradient(),S._radial^O&&(S=S.clone(),S._radial=O);else{for(var R=_.childNodes,F=[],B=0,W=R.length;B<W;B++){var N=R[B];N.nodeType===1&&F.push(y(new Er,N))}S=new jn(F,O)}var U,H,G,Z=r(_,"gradientUnits",!0)!=="userSpaceOnUse";O?(U=s(_,"cx","cy",!1,Z,"50%","50%"),H=U.add(r(_,"r",!1,!1,Z,"50%"),0),G=s(_,"fx","fy",!0,Z)):(U=s(_,"x1","y1",!1,Z,"0%","0%"),H=s(_,"x2","y2",!1,Z,"100%","0%"));var $=y(new be(S,U,H,G),_);return $._scaleToBounds=Z,null}var p={"#document":function(_,x,C,O){for(var S=_.childNodes,R=0,F=S.length;R<F;R++){var B=S[R];if(B.nodeType===1)return m(B,C,O)}},g:l,svg:l,clippath:l,polygon:f,polyline:f,path:h,lineargradient:c,radialgradient:c,image:function(_){var x=new ve(r(_,"href",!0));return x.on("load",function(){var C=a(_);this.setSize(C);var O=s(_).add(C.divide(2));this._matrix.append(new Ht().translate(O))}),x},symbol:function(_,x,C,O){return new Ie(l(_,x,C,O),!0)},defs:l,use:function(_){var x=(r(_,"href",!0)||"").substring(1),C=t[x],O=s(_);return C?C instanceof Ie?C.place(O):C.clone().translate(O):null},circle:function(_){return new Qt.Circle(s(_,"cx","cy"),r(_,"r"))},ellipse:function(_){return new Qt.Ellipse({center:s(_,"cx","cy"),radius:a(_,"rx","ry")})},rect:function(_){return new Qt.Rectangle(new xt(s(_),a(_)),a(_,"rx","ry"))},line:function(_){return new ne.Line(s(_,"x1","y1"),s(_,"x2","y2"))},text:function(_){var x=new ia(s(_).add(s(_,"dx","dy")));return x.setContent(_.textContent.trim()||""),x},switch:l};function w(_,x,C,O){if(_.transform){for(var S=(O.getAttribute(C)||"").split(/\)\s*/g),R=new Ht,F=0,B=S.length;F<B;F++){var W=S[F];if(!W)break;for(var N=W.split(/\(\s*/),U=N[0],H=N[1].split(/[\s,]+/g),G=0,Z=H.length;G<Z;G++)H[G]=parseFloat(H[G]);switch(U){case"matrix":R.append(new Ht(H[0],H[1],H[2],H[3],H[4],H[5]));break;case"rotate":R.rotate(H[0],H[1]||0,H[2]||0);break;case"translate":R.translate(H[0],H[1]||0);break;case"scale":R.scale(H);break;case"skewX":R.skew(H[0],0);break;case"skewY":R.skew(0,H[0]);break}}_.transform(R)}}function v(_,x,C){var O=C==="fill-opacity"?"getFillColor":"getStrokeColor",S=_[O]&&_[O]();S&&S.setAlpha(parseFloat(x))}var g=z.set(z.each(fs,function(_){this[_.attribute]=function(x,C){if(x[_.set]&&(x[_.set](o(C,_.type,_.fromSVG)),_.type==="color")){var O=x[_.get]();if(O&&O._scaleToBounds){var S=x.getBounds();O.transform(new Ht().translate(S.getPoint()).scale(S.getSize()))}}}},{}),{id:function(_,x){t[x]=_,_.setName&&_.setName(x)},"clip-path":function(_,x){var C=A(x);if(C)if(C=C.clone(),C.setClipMask(!0),_ instanceof Zt)_.insertChild(0,C);else return new Zt(C,_)},gradientTransform:w,transform:w,"fill-opacity":v,"stroke-opacity":v,visibility:function(_,x){_.setVisible&&_.setVisible(x==="visible")},display:function(_,x){_.setVisible&&_.setVisible(x!==null)},"stop-color":function(_,x){_.setColor&&_.setColor(x)},"stop-opacity":function(_,x){_._color&&_._color.setAlpha(parseFloat(x))},offset:function(_,x){if(_.setOffset){var C=x.match(/(.*)%$/);_.setOffset(C?C[1]/100:parseFloat(x))}},viewBox:function(_,x,C,O,S){var R=new xt(o(x,"array")),F=a(O,null,null,!0),B,W;if(_ instanceof Zt){var N=F?F.divide(R.getSize()):1,W=new Ht().scale(N).translate(R.getPoint().negate());B=_}else _ instanceof Ie&&(F&&R.setSize(F),B=_._item);if(B){if(I(O,"overflow",S)!=="visible"){var U=new Qt.Rectangle(R);U.setClipMask(!0),B.addChild(U)}W&&B.transform(W)}}});function I(_,x,C){var O=_.attributes[x],S=O&&O.value;if(!S&&_.style){var R=z.camelize(x);S=_.style[R],!S&&C.node[R]!==C.parent[R]&&(S=C.node[R])}return S?S==="none"?null:S:T}function y(_,x,C){var O=x.parentNode,S={node:me.getStyles(x)||{},parent:!C&&!/^defs$/i.test(O.tagName)&&me.getStyles(O)||{}};return z.each(g,function(R,F){var B=I(x,F,S);_=B!==T&&R(_,B,F,x,S)||_}),_}function A(_){var x=_&&_.match(/\((?:["'#]*)([^"')]+)/),C=x&&x[1],O=C&&t[wt?C.replace(wt.location.href.split("#")[0]+"#",""):C];return O&&O._scaleToBounds&&(O=O.clone(),O._scaleToBounds=!0),O}function m(_,x,C){var O=_.nodeName.toLowerCase(),S=O!=="#document",R=ct.body,F,B,W;C&&S&&(n=Xt.getView().getSize(),n=a(_,null,null,!0)||n,F=Se.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),B=_.parentNode,W=_.nextSibling,F.appendChild(_),R.appendChild(F));var N=Xt.settings,U=N.applyMatrix,H=N.insertItems;N.applyMatrix=!1,N.insertItems=!1;var G=p[O],Z=G&&G(_,O,x,C)||null;if(N.insertItems=H,N.applyMatrix=U,Z){S&&!(Z instanceof Zt)&&(Z=y(Z,_,C));var $=x.onImport,ot=S&&_.getAttribute("data-paper-data");$&&(Z=$(_,Z,x)||Z),x.expandShapes&&Z instanceof Qt&&(Z.remove(),Z=Z.toPath()),ot&&(Z._data=JSON.parse(ot))}return F&&(R.removeChild(F),B&&(W?B.insertBefore(_,W):B.appendChild(_))),C&&(t={},Z&&z.pick(x.applyMatrix,U)&&Z.matrix.apply(!0,!0)),Z}function b(_,x,C){if(!_)return null;x=typeof x=="function"?{onLoad:x}:x||{};var O=Xt,S=null;function R(N){try{var U=typeof N=="object"?N:new mt.DOMParser().parseFromString(N.trim(),"image/svg+xml");if(!U.nodeName)throw U=null,new Error("Unsupported SVG source: "+_);Xt=O,S=m(U,x,!0),(!x||x.insert!==!1)&&C._insertItem(T,S);var H=x.onLoad;H&&H(S,N)}catch(G){F(G)}}function F(N,U){var H=x.onError;if(H)H(N,U);else throw new Error(N)}if(typeof _=="string"&&!/^[\s\S]*</.test(_)){var B=ct.getElementById(_);B?R(B):Si.request({url:_,async:!0,onLoad:R,onError:F})}else if(typeof File<"u"&&_ instanceof File){var W=new FileReader;return W.onload=function(){R(W.result)},W.onerror=function(){F(W.error)},W.readAsText(_)}else R(_);return S}Ct.inject({importSVG:function(_,x){return b(_,x,this)}}),Mt.inject({importSVG:function(_,x){return this.activate(),b(_,x,this)}})},z.exports.PaperScript=function(){var t=this,n=t.acorn;if(!n&&typeof Tg<"u")try{n=require("acorn")}catch{}if(!n){var r,s;n=r=s={},function(y,A){if(typeof r=="object"&&typeof s=="object")return A(r);if(typeof T=="function"&&T.amd)return T(["exports"],A);A(y.acorn||(y.acorn={}))}(this,function(y){y.version="0.5.0";var A,m,b,_;y.parse=function(M,D){return m=String(M),b=m.length,C(D),qr(),ma(A.program)};var x=y.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function C(M){A=M||{};for(var D in x)Object.prototype.hasOwnProperty.call(A,D)||(A[D]=x[D]);_=A.sourceFile||null}var O=y.getLineInfo=function(M,D){for(var Q=1,tt=0;;){si.lastIndex=tt;var St=si.exec(M);if(St&&St.index<D)++Q,tt=St.index+St[0].length;else break}return{line:Q,column:D-tt}};y.tokenize=function(M,D){m=String(M),b=m.length,C(D),qr();var Q={};function tt(St){return ot=F,ai(St),Q.start=R,Q.end=F,Q.startLoc=B,Q.endLoc=W,Q.type=N,Q.value=U,Q}return tt.jumpTo=function(St,Ft){if(S=St,A.locations){G=1,Z=si.lastIndex=0;for(var Vt;(Vt=si.exec(m))&&Vt.index<St;)++G,Z=Vt.index+Vt[0].length}H=Ft,Ai()},tt};var S,R,F,B,W,N,U,H,G,Z,$,ot,_t,pt,It,et;function rt(M,D){var Q=O(m,M);D+=" ("+Q.line+":"+Q.column+")";var tt=new SyntaxError(D);throw tt.pos=M,tt.loc=Q,tt.raisedAt=S,tt}var yt=[],Tt={type:"num"},Pt={type:"regexp"},zt={type:"string"},kt={type:"name"},Bt={type:"eof"},Kt={keyword:"break"},Ut={keyword:"case",beforeExpr:!0},ke={keyword:"catch"},Oe={keyword:"continue"},qe={keyword:"debugger"},Ae={keyword:"default"},fe={keyword:"do",isLoop:!0},Pe={keyword:"else",beforeExpr:!0},Ye={keyword:"finally"},Ne={keyword:"for",isLoop:!0},nn={keyword:"function"},kn={keyword:"if"},fn={keyword:"return",beforeExpr:!0},rn={keyword:"switch"},Je={keyword:"throw",beforeExpr:!0},Qe={keyword:"try"},wn={keyword:"var"},ln={keyword:"while",isLoop:!0},ar={keyword:"with"},Lr={keyword:"new",beforeExpr:!0},Mr={keyword:"this"},ur={keyword:"null",atomValue:null},ls={keyword:"true",atomValue:!0},Rr={keyword:"false",atomValue:!1},Ci={keyword:"in",binop:7,beforeExpr:!0},Fi={break:Kt,case:Ut,catch:ke,continue:Oe,debugger:qe,default:Ae,do:fe,else:Pe,finally:Ye,for:Ne,function:nn,if:kn,return:fn,switch:rn,throw:Je,try:Qe,var:wn,while:ln,with:ar,null:ur,true:ls,false:Rr,new:Lr,in:Ci,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Mr,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Nn={type:"[",beforeExpr:!0},Bi={type:"]"},ni={type:"{",beforeExpr:!0},ii={type:"}"},yn={type:"(",beforeExpr:!0},hn={type:")"},Tn={type:",",beforeExpr:!0},xn={type:";",beforeExpr:!0},Ii={type:":",beforeExpr:!0},zr={type:"."},kr={type:"?",beforeExpr:!0},or={binop:10,beforeExpr:!0},Nr={isAssign:!0,beforeExpr:!0},ri={isAssign:!0,beforeExpr:!0},aa={postfix:!0,prefix:!0,isUpdate:!0},hs={prefix:!0,beforeExpr:!0},fr={binop:1,beforeExpr:!0},cs={binop:2,beforeExpr:!0},ua={binop:3,beforeExpr:!0},oa={binop:4,beforeExpr:!0},fa={binop:5,beforeExpr:!0},la={binop:6,beforeExpr:!0},ye={binop:7,beforeExpr:!0},ge={binop:8,beforeExpr:!0},ha={binop:9,prefix:!0,beforeExpr:!0},ca={binop:10,beforeExpr:!0};y.tokTypes={bracketL:Nn,bracketR:Bi,braceL:ni,braceR:ii,parenL:yn,parenR:hn,comma:Tn,semi:xn,colon:Ii,dot:zr,question:kr,slash:or,eq:Nr,name:kt,eof:Bt,num:Tt,regexp:Pt,string:zt};for(var ds in Fi)y.tokTypes["_"+ds]=Fi[ds];function Di(M){M=M.split(" ");var D="",Q=[];t:for(var tt=0;tt<M.length;++tt){for(var St=0;St<Q.length;++St)if(Q[St][0].length==M[tt].length){Q[St].push(M[tt]);continue t}Q.push([M[tt]])}function Ft(Yt){if(Yt.length==1)return D+="return str === "+JSON.stringify(Yt[0])+";";D+="switch(str){";for(var je=0;je<Yt.length;++je)D+="case "+JSON.stringify(Yt[je])+":";D+="return true}return false;"}if(Q.length>3){Q.sort(function(Yt,je){return je.length-Yt.length}),D+="switch(str.length){";for(var tt=0;tt<Q.length;++tt){var Vt=Q[tt];D+="case "+Vt[0].length+":",Ft(Vt)}D+="}"}else Ft(M);return new Function("str",D)}var da=Di("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),_a=Di("class enum extends super const export import"),Fr=Di("implements interface let package private protected public static yield"),lr=Di("eval arguments"),Ue=Di("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Br=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Hn="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",_s="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",hr=new RegExp("["+Hn+"]"),cn=new RegExp("["+Hn+_s+"]"),qi=/[\n\r\u2028\u2029]/,si=/\r\n|[\n\r\u2028\u2029]/g,Wi=y.isIdentifierStart=function(M){return M<65?M===36:M<91?!0:M<97?M===95:M<123?!0:M>=170&&hr.test(String.fromCharCode(M))},Dr=y.isIdentifierChar=function(M){return M<48?M===36:M<58?!0:M<65?!1:M<91?!0:M<97?M===95:M<123?!0:M>=170&&cn.test(String.fromCharCode(M))};function Vn(){this.line=G,this.column=S-Z}function qr(){G=1,S=Z=0,H=!0,Ai()}function ue(M,D){F=S,A.locations&&(W=new Vn),N=M,Ai(),U=D,H=M.beforeExpr}function ga(){var M=A.onComment&&A.locations&&new Vn,D=S,Q=m.indexOf("*/",S+=2);if(Q===-1&&rt(S-2,"Unterminated comment"),S=Q+2,A.locations){si.lastIndex=D;for(var tt;(tt=si.exec(m))&&tt.index<S;)++G,Z=tt.index+tt[0].length}A.onComment&&A.onComment(!0,m.slice(D+2,Q),D,S,M,A.locations&&new Vn)}function $e(){for(var M=S,D=A.onComment&&A.locations&&new Vn,Q=m.charCodeAt(S+=2);S<b&&Q!==10&&Q!==13&&Q!==8232&&Q!==8233;)++S,Q=m.charCodeAt(S);A.onComment&&A.onComment(!1,m.slice(M+2,S),M,S,D,A.locations&&new Vn)}function Ai(){for(;S<b;){var M=m.charCodeAt(S);if(M===32)++S;else if(M===13){++S;var D=m.charCodeAt(S);D===10&&++S,A.locations&&(++G,Z=S)}else if(M===10||M===8232||M===8233)++S,A.locations&&(++G,Z=S);else if(M>8&&M<14)++S;else if(M===47){var D=m.charCodeAt(S+1);if(D===42)ga();else if(D===47)$e();else break}else if(M===160)++S;else if(M>=5760&&Br.test(String.fromCharCode(M)))++S;else break}}function gs(){var M=m.charCodeAt(S+1);return M>=48&&M<=57?ui(!0):(++S,ue(zr))}function Gn(){var M=m.charCodeAt(S+1);return H?(++S,vs()):M===61?We(ri,2):We(or,1)}function cr(){var M=m.charCodeAt(S+1);return M===61?We(ri,2):We(ca,1)}function Wr(M){var D=m.charCodeAt(S+1);return D===M?We(M===124?fr:cs,2):D===61?We(ri,2):We(M===124?ua:fa,1)}function Ce(){var M=m.charCodeAt(S+1);return M===61?We(ri,2):We(oa,1)}function Zn(M){var D=m.charCodeAt(S+1);return D===M?D==45&&m.charCodeAt(S+2)==62&&qi.test(m.slice(ot,S))?(S+=3,$e(),Ai(),ai()):We(aa,2):D===61?We(ri,2):We(ha,1)}function Ur(M){var D=m.charCodeAt(S+1),Q=1;return D===M?(Q=M===62&&m.charCodeAt(S+2)===62?3:2,m.charCodeAt(S+Q)===61?We(ri,Q+1):We(ge,Q)):D==33&&M==60&&m.charCodeAt(S+2)==45&&m.charCodeAt(S+3)==45?(S+=4,$e(),Ai(),ai()):(D===61&&(Q=m.charCodeAt(S+2)===61?3:2),We(ye,Q))}function va(M){var D=m.charCodeAt(S+1);return D===61?We(la,m.charCodeAt(S+2)===61?3:2):We(M===61?Nr:hs,1)}function Hr(M){switch(M){case 46:return gs();case 40:return++S,ue(yn);case 41:return++S,ue(hn);case 59:return++S,ue(xn);case 44:return++S,ue(Tn);case 91:return++S,ue(Nn);case 93:return++S,ue(Bi);case 123:return++S,ue(ni);case 125:return++S,ue(ii);case 58:return++S,ue(Ii);case 63:return++S,ue(kr);case 48:var D=m.charCodeAt(S+1);if(D===120||D===88)return dr();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ui(!1);case 34:case 39:return pa(M);case 47:return Gn();case 37:case 42:return cr();case 124:case 38:return Wr(M);case 94:return Ce();case 43:case 45:return Zn(M);case 60:case 62:return Ur(M);case 61:case 33:return va(M);case 126:return We(hs,1)}return!1}function ai(M){if(M?S=R+1:R=S,A.locations&&(B=new Vn),M)return vs();if(S>=b)return ue(Bt);var D=m.charCodeAt(S);if(Wi(D)||D===92)return gr();var Q=Hr(D);if(Q===!1){var tt=String.fromCharCode(D);if(tt==="\\"||hr.test(tt))return gr();rt(S,"Unexpected character '"+tt+"'")}return Q}function We(M,D){var Q=m.slice(S,S+D);S+=D,ue(M,Q)}function vs(){for(var St="",M,D,Q=S;;){S>=b&&rt(Q,"Unterminated regular expression");var tt=m.charAt(S);if(qi.test(tt)&&rt(Q,"Unterminated regular expression"),M)M=!1;else{if(tt==="[")D=!0;else if(tt==="]"&&D)D=!1;else if(tt==="/"&&!D)break;M=tt==="\\"}++S}var St=m.slice(Q,S);++S;var Ft=_r();Ft&&!/^[gmsiy]*$/.test(Ft)&&rt(Q,"Invalid regexp flag");try{var Vt=new RegExp(St,Ft)}catch(Yt){Yt instanceof SyntaxError&&rt(Q,Yt.message),rt(Yt)}return ue(Pt,Vt)}function Pi(M,D){for(var Q=S,tt=0,St=0,Ft=D??1/0;St<Ft;++St){var Vt=m.charCodeAt(S),Yt;if(Vt>=97?Yt=Vt-97+10:Vt>=65?Yt=Vt-65+10:Vt>=48&&Vt<=57?Yt=Vt-48:Yt=1/0,Yt>=M)break;++S,tt=tt*M+Yt}return S===Q||D!=null&&S-Q!==D?null:tt}function dr(){S+=2;var M=Pi(16);return M==null&&rt(R+2,"Expected hexadecimal number"),Wi(m.charCodeAt(S))&&rt(S,"Identifier directly after number"),ue(Tt,M)}function ui(M){var D=S,Q=!1,tt=m.charCodeAt(S)===48;!M&&Pi(10)===null&&rt(D,"Invalid number"),m.charCodeAt(S)===46&&(++S,Pi(10),Q=!0);var St=m.charCodeAt(S);(St===69||St===101)&&(St=m.charCodeAt(++S),(St===43||St===45)&&++S,Pi(10)===null&&rt(D,"Invalid number"),Q=!0),Wi(m.charCodeAt(S))&&rt(S,"Identifier directly after number");var Ft=m.slice(D,S),Vt;return Q?Vt=parseFloat(Ft):!tt||Ft.length===1?Vt=parseInt(Ft,10):/[89]/.test(Ft)||et?rt(D,"Invalid number"):Vt=parseInt(Ft,8),ue(Tt,Vt)}function pa(M){S++;for(var D="";;){S>=b&&rt(R,"Unterminated string constant");var Q=m.charCodeAt(S);if(Q===M)return++S,ue(zt,D);if(Q===92){Q=m.charCodeAt(++S);var tt=/^[0-7]+/.exec(m.slice(S,S+3));for(tt&&(tt=tt[0]);tt&&parseInt(tt,8)>255;)tt=tt.slice(0,-1);if(tt==="0"&&(tt=null),++S,tt)et&&rt(S-2,"Octal literal in strict mode"),D+=String.fromCharCode(parseInt(tt,8)),S+=tt.length-1;else switch(Q){case 110:D+=`
`;break;case 114:D+="\r";break;case 120:D+=String.fromCharCode(Ui(2));break;case 117:D+=String.fromCharCode(Ui(4));break;case 85:D+=String.fromCharCode(Ui(8));break;case 116:D+="	";break;case 98:D+="\b";break;case 118:D+="\v";break;case 102:D+="\f";break;case 48:D+="\0";break;case 13:m.charCodeAt(S)===10&&++S;case 10:A.locations&&(Z=S,++G);break;default:D+=String.fromCharCode(Q);break}}else(Q===13||Q===10||Q===8232||Q===8233)&&rt(R,"Unterminated string constant"),D+=String.fromCharCode(Q),++S}}function Ui(M){var D=Pi(16,M);return D===null&&rt(R,"Bad character escape sequence"),D}var oi;function _r(){oi=!1;for(var M,D=!0,Q=S;;){var tt=m.charCodeAt(S);if(Dr(tt))oi&&(M+=m.charAt(S)),++S;else if(tt===92){oi||(M=m.slice(Q,S)),oi=!0,m.charCodeAt(++S)!=117&&rt(S,"Expecting Unicode escape sequence \\uXXXX"),++S;var St=Ui(4),Ft=String.fromCharCode(St);Ft||rt(S-1,"Invalid Unicode escape"),(D?Wi(St):Dr(St))||rt(S-4,"Invalid Unicode escape"),M+=Ft}else break;D=!1}return oi?M:m.slice(Q,S)}function gr(){var M=_r(),D=kt;return!oi&&Ue(M)&&(D=Fi[M]),ue(D,M)}function re(){$=R,ot=F,_t=W,ai()}function Vr(M){if(et=M,S=R,A.locations)for(;S<Z;)Z=m.lastIndexOf(`
`,Z-2)+1,--G;Ai(),ai()}function vr(){this.type=null,this.start=R,this.end=null}function pr(){this.start=B,this.end=null,_!==null&&(this.source=_)}function He(){var M=new vr;return A.locations&&(M.loc=new pr),A.directSourceFile&&(M.sourceFile=A.directSourceFile),A.ranges&&(M.range=[R,0]),M}function Fn(M){var D=new vr;return D.start=M.start,A.locations&&(D.loc=new pr,D.loc.start=M.loc.start),A.ranges&&(D.range=[M.range[0],0]),D}function Nt(M,D){return M.type=D,M.end=ot,A.locations&&(M.loc.end=_t),A.ranges&&(M.range[1]=ot),M}function Hi(M){return A.ecmaVersion>=5&&M.type==="ExpressionStatement"&&M.expression.type==="Literal"&&M.expression.value==="use strict"}function de(M){if(N===M)return re(),!0}function Vi(){return!A.strictSemicolons&&(N===Bt||N===ii||qi.test(m.slice(ot,R)))}function Xn(){!de(xn)&&!Vi()&&Bn()}function Ee(M){N===M?re():Bn()}function Bn(){rt(R,"Unexpected token")}function mr(M){M.type!=="Identifier"&&M.type!=="MemberExpression"&&rt(M.start,"Assigning to rvalue"),et&&M.type==="Identifier"&&lr(M.name)&&rt(M.start,"Assigning to "+M.name+" in strict mode")}function ma(M){$=ot=S,A.locations&&(_t=new Vn),pt=et=null,It=[],ai();var D=M||He(),Q=!0;for(M||(D.body=[]);N!==Bt;){var tt=bn();D.body.push(tt),Q&&Hi(tt)&&Vr(!0),Q=!1}return Nt(D,"Program")}var Gr={kind:"loop"},Ti={kind:"switch"};function bn(){(N===or||N===ri&&U=="/=")&&ai(!0);var M=N,D=He();switch(M){case Kt:case Oe:re();var Q=M===Kt;de(xn)||Vi()?D.label=null:N!==kt?Bn():(D.label=j(),Xn());for(var tt=0;tt<It.length;++tt){var St=It[tt];if((D.label==null||St.name===D.label.name)&&(St.kind!=null&&(Q||St.kind==="loop")||D.label&&Q))break}return tt===It.length&&rt(D.start,"Unsyntactic "+M.keyword),Nt(D,Q?"BreakStatement":"ContinueStatement");case qe:return re(),Xn(),Nt(D,"DebuggerStatement");case fe:return re(),It.push(Gr),D.body=bn(),It.pop(),Ee(ln),D.test=Gi(),Xn(),Nt(D,"DoWhileStatement");case Ne:if(re(),It.push(Gr),Ee(yn),N===xn)return wr(D,null);if(N===wn){var Ft=He();return re(),Zi(Ft,!0),Nt(Ft,"VariableDeclaration"),Ft.declarations.length===1&&de(Ci)?Dn(D,Ft):wr(D,Ft)}var Ft=Ge(!1,!0);return de(Ci)?(mr(Ft),Dn(D,Ft)):wr(D,Ft);case nn:return re(),X(D,!0);case kn:return re(),D.test=Gi(),D.consequent=bn(),D.alternate=de(Pe)?bn():null,Nt(D,"IfStatement");case fn:return!pt&&!A.allowReturnOutsideFunction&&rt(R,"'return' outside of function"),re(),de(xn)||Vi()?D.argument=null:(D.argument=Ge(),Xn()),Nt(D,"ReturnStatement");case rn:re(),D.discriminant=Gi(),D.cases=[],Ee(ni),It.push(Ti);for(var Vt,Yt;N!=ii;)if(N===Ut||N===Ae){var je=N===Ut;Vt&&Nt(Vt,"SwitchCase"),D.cases.push(Vt=He()),Vt.consequent=[],re(),je?Vt.test=Ge():(Yt&&rt($,"Multiple default clauses"),Yt=!0,Vt.test=null),Ee(Ii)}else Vt||Bn(),Vt.consequent.push(bn());return Vt&&Nt(Vt,"SwitchCase"),re(),It.pop(),Nt(D,"SwitchStatement");case Je:return re(),qi.test(m.slice(ot,R))&&rt(ot,"Illegal newline after throw"),D.argument=Ge(),Xn(),Nt(D,"ThrowStatement");case Qe:if(re(),D.block=fi(),D.handler=null,N===ke){var hi=He();re(),Ee(yn),hi.param=j(),et&&lr(hi.param.name)&&rt(hi.param.start,"Binding "+hi.param.name+" in strict mode"),Ee(hn),hi.guard=null,hi.body=fi(),D.handler=Nt(hi,"CatchClause")}return D.guardedHandlers=yt,D.finalizer=de(Ye)?fi():null,!D.handler&&!D.finalizer&&rt(D.start,"Missing catch or finally clause"),Nt(D,"TryStatement");case wn:return re(),Zi(D),Xn(),Nt(D,"VariableDeclaration");case ln:return re(),D.test=Gi(),It.push(Gr),D.body=bn(),It.pop(),Nt(D,"WhileStatement");case ar:return et&&rt(R,"'with' in strict mode"),re(),D.object=Gi(),D.body=bn(),Nt(D,"WithStatement");case ni:return fi();case xn:return re(),Nt(D,"EmptyStatement");default:var Kn=U,ci=Ge();if(M===kt&&ci.type==="Identifier"&&de(Ii)){for(var tt=0;tt<It.length;++tt)It[tt].name===Kn&&rt(ci.start,"Label '"+Kn+"' is already declared");var xr=N.isLoop?"loop":N===rn?"switch":null;return It.push({name:Kn,kind:xr}),D.body=bn(),It.pop(),D.label=ci,Nt(D,"LabeledStatement")}else return D.expression=ci,Xn(),Nt(D,"ExpressionStatement")}}function Gi(){Ee(yn);var M=Ge();return Ee(hn),M}function fi(M){var D=He(),Q=!0,tt=!1,St;for(D.body=[],Ee(ni);!de(ii);){var Ft=bn();D.body.push(Ft),Q&&M&&Hi(Ft)&&(St=tt,Vr(tt=!0)),Q=!1}return tt&&!St&&Vr(!1),Nt(D,"BlockStatement")}function wr(M,D){return M.init=D,Ee(xn),M.test=N===xn?null:Ge(),Ee(xn),M.update=N===hn?null:Ge(),Ee(hn),M.body=bn(),It.pop(),Nt(M,"ForStatement")}function Dn(M,D){return M.left=D,M.right=Ge(),Ee(hn),M.body=bn(),It.pop(),Nt(M,"ForInStatement")}function Zi(M,D){for(M.declarations=[],M.kind="var";;){var Q=He();if(Q.id=j(),et&&lr(Q.id.name)&&rt(Q.id.start,"Binding "+Q.id.name+" in strict mode"),Q.init=de(Nr)?Ge(!0,D):null,M.declarations.push(Nt(Q,"VariableDeclarator")),!de(Tn))break}return M}function Ge(M,D){var Q=Zr(D);if(!M&&N===Tn){var tt=Fn(Q);for(tt.expressions=[Q];de(Tn);)tt.expressions.push(Zr(D));return Nt(tt,"SequenceExpression")}return Q}function Zr(M){var D=wa(M);if(N.isAssign){var Q=Fn(D);return Q.operator=U,Q.left=D,re(),Q.right=Zr(M),mr(D),Nt(Q,"AssignmentExpression")}return D}function wa(M){var D=Oi(M);if(de(kr)){var Q=Fn(D);return Q.test=D,Q.consequent=Ge(!0),Ee(Ii),Q.alternate=Ge(!0,M),Nt(Q,"ConditionalExpression")}return D}function Oi(M){return sn(yr(),-1,M)}function sn(M,D,Q){var tt=N.binop;if(tt!=null&&(!Q||N!==Ci)&&tt>D){var St=Fn(M);St.left=M,St.operator=U;var Ft=N;re(),St.right=sn(yr(),tt,Q);var Vt=Nt(St,Ft===fr||Ft===cs?"LogicalExpression":"BinaryExpression");return sn(Vt,D,Q)}return M}function yr(){if(N.prefix){var M=He(),D=N.isUpdate;return M.operator=U,M.prefix=!0,H=!0,re(),M.argument=yr(),D?mr(M.argument):et&&M.operator==="delete"&&M.argument.type==="Identifier"&&rt(M.start,"Deleting local variable in strict mode"),Nt(M,D?"UpdateExpression":"UnaryExpression")}for(var Q=ya();N.postfix&&!Vi();){var M=Fn(Q);M.operator=U,M.prefix=!1,M.argument=Q,mr(Q),re(),Q=Nt(M,"UpdateExpression")}return Q}function ya(){return Xi(Xr())}function Xi(M,D){if(de(zr)){var Q=Fn(M);return Q.object=M,Q.property=j(!0),Q.computed=!1,Xi(Nt(Q,"MemberExpression"),D)}else if(de(Nn)){var Q=Fn(M);return Q.object=M,Q.property=Ge(),Q.computed=!0,Ee(Bi),Xi(Nt(Q,"MemberExpression"),D)}else if(!D&&de(yn)){var Q=Fn(M);return Q.callee=M,Q.arguments=nt(hn,!1),Xi(Nt(Q,"CallExpression"),D)}else return M}function Xr(){switch(N){case Mr:var tt=He();return re(),Nt(tt,"ThisExpression");case kt:return j();case Tt:case zt:case Pt:var tt=He();return tt.value=U,tt.raw=m.slice(R,F),re(),Nt(tt,"Literal");case ur:case ls:case Rr:var tt=He();return tt.value=N.atomValue,tt.raw=N.keyword,re(),Nt(tt,"Literal");case yn:var M=B,D=R;re();var Q=Ge();return Q.start=D,Q.end=F,A.locations&&(Q.loc.start=M,Q.loc.end=W),A.ranges&&(Q.range=[D,F]),Ee(hn),Q;case Nn:var tt=He();return re(),tt.elements=nt(Bi,!0,!0),Nt(tt,"ArrayExpression");case ni:return ba();case nn:var tt=He();return re(),X(tt,!1);case Lr:return xa();default:Bn()}}function xa(){var M=He();return re(),M.callee=Xi(Xr(),!0),de(yn)?M.arguments=nt(hn,!1):M.arguments=yt,Nt(M,"NewExpression")}function ba(){var M=He(),D=!0,Q=!1;for(M.properties=[],re();!de(ii);){if(D)D=!1;else if(Ee(Tn),A.allowTrailingCommas&&de(ii))break;var tt={key:li()},St=!1,Ft;if(de(Ii)?(tt.value=Ge(!0),Ft=tt.kind="init"):A.ecmaVersion>=5&&tt.key.type==="Identifier"&&(tt.key.name==="get"||tt.key.name==="set")?(St=Q=!0,Ft=tt.kind=tt.key.name,tt.key=li(),N!==yn&&Bn(),tt.value=X(He(),!1)):Bn(),tt.key.type==="Identifier"&&(et||Q))for(var Vt=0;Vt<M.properties.length;++Vt){var Yt=M.properties[Vt];if(Yt.key.name===tt.key.name){var je=Ft==Yt.kind||St&&Yt.kind==="init"||Ft==="init"&&(Yt.kind==="get"||Yt.kind==="set");je&&!et&&Ft==="init"&&Yt.kind==="init"&&(je=!1),je&&rt(tt.key.start,"Redefinition of property")}}M.properties.push(tt)}return Nt(M,"ObjectExpression")}function li(){return N===Tt||N===zt?Xr():j(!0)}function X(M,D){N===kt?M.id=j():D?Bn():M.id=null,M.params=[];var Q=!0;for(Ee(yn);!de(hn);)Q?Q=!1:Ee(Tn),M.params.push(j());var tt=pt,St=It;if(pt=!0,It=[],M.body=fi(!0),pt=tt,It=St,et||M.body.body.length&&Hi(M.body.body[0]))for(var Ft=M.id?-1:0;Ft<M.params.length;++Ft){var Vt=Ft<0?M.id:M.params[Ft];if((Fr(Vt.name)||lr(Vt.name))&&rt(Vt.start,"Defining '"+Vt.name+"' in strict mode"),Ft>=0)for(var Yt=0;Yt<Ft;++Yt)Vt.name===M.params[Yt].name&&rt(Vt.start,"Argument name clash in strict mode")}return Nt(M,D?"FunctionDeclaration":"FunctionExpression")}function nt(M,D,Q){for(var tt=[],St=!0;!de(M);){if(St)St=!1;else if(Ee(Tn),D&&A.allowTrailingCommas&&de(M))break;Q&&N===Tn?tt.push(null):tt.push(Ge(!0))}return tt}function j(M){var D=He();return M&&A.forbidReserved=="everywhere"&&(M=!1),N===kt?(!M&&(A.forbidReserved&&(A.ecmaVersion===3?da:_a)(U)||et&&Fr(U))&&m.slice(R,F).indexOf("\\")==-1&&rt(R,"The keyword '"+U+"' is reserved"),D.name=U):M&&N.keyword?D.name=N.keyword:Bn(),H=!1,re(),Nt(D,"Identifier")}}),n.version||(n=null)}function a(y,A){return(t.acorn||n).parse(y,A)}var o={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},l={"-":"__negate","+":"__self"},f=z.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(y){this["__"+y]="#"+y},{__self:function(){return this}});k.inject(f),vt.inject(f),be.inject(f);function h(y,A,m){var b=o[A];if(y&&y[b]){var _=y[b](m);return A==="!="?!_:_}switch(A){case"+":return y+m;case"-":return y-m;case"*":return y*m;case"/":return y/m;case"%":return y%m;case"==":return y==m;case"!=":return y!=m}}function c(y,A){var m=l[y];if(A&&A[m])return A[m]();switch(y){case"+":return+A;case"-":return-A}}function p(y,A){if(!y)return"";A=A||{};var m=[];function b(et){for(var rt=0,yt=m.length;rt<yt;rt++){var Tt=m[rt];if(Tt[0]>=et)break;et+=Tt[1]}return et}function _(et){return y.substring(b(et.range[0]),b(et.range[1]))}function x(et,rt){return y.substring(b(et.range[1]),b(rt.range[0]))}function C(et,rt){for(var yt=b(et.range[0]),Tt=b(et.range[1]),Pt=0,zt=m.length-1;zt>=0;zt--)if(yt>m[zt][0]){Pt=zt+1;break}m.splice(Pt,0,[yt,rt.length-Tt+yt]),y=y.substring(0,yt)+rt+y.substring(Tt)}function O(et,rt){switch(et.type){case"UnaryExpression":if(et.operator in l&&et.argument.type!=="Literal"){var yt=_(et.argument);C(et,'$__("'+et.operator+'", '+yt+")")}break;case"BinaryExpression":if(et.operator in o&&et.left.type!=="Literal"){var Tt=_(et.left),Pt=_(et.right),zt=x(et.left,et.right),kt=et.operator;C(et,"__$__("+Tt+","+zt.replace(new RegExp("\\"+kt),'"'+kt+'"')+", "+Pt+")")}break;case"UpdateExpression":case"AssignmentExpression":var Bt=rt&&rt.type;if(!(Bt==="ForStatement"||Bt==="BinaryExpression"&&/^[=!<>]/.test(rt.operator)||Bt==="MemberExpression"&&rt.computed)){if(et.type==="UpdateExpression"){var yt=_(et.argument),Kt="__$__("+yt+', "'+et.operator[0]+'", 1)',Ut=yt+" = "+Kt;et.prefix?Ut="("+Ut+")":(Bt==="AssignmentExpression"||Bt==="VariableDeclarator"||Bt==="BinaryExpression")&&(_(rt.left||rt.id)===yt&&(Ut=Kt),Ut=yt+"; "+Ut),C(et,Ut)}else if(/^.=$/.test(et.operator)&&et.left.type!=="Literal"){var Tt=_(et.left),Pt=_(et.right),Kt=Tt+" = __$__("+Tt+', "'+et.operator[0]+'", '+Pt+")";C(et,/^\(.*\)$/.test(_(et))?"("+Kt+")":Kt)}}break}}function S(et){switch(et.type){case"ExportDefaultDeclaration":C({range:[et.start,et.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var rt=et.declaration,yt=et.specifiers;if(rt){var Tt=rt.declarations;Tt&&(Tt.forEach(function(zt){C(zt,"module.exports."+_(zt))}),C({range:[et.start,rt.start+rt.kind.length]},""))}else if(yt){var Pt=yt.map(function(zt){var kt=_(zt);return"module.exports."+kt+" = "+kt+"; "}).join("");Pt&&C(et,Pt)}break}}function R(et,rt,yt){if(et){for(var Tt in et)if(Tt!=="range"&&Tt!=="loc"){var Pt=et[Tt];if(Array.isArray(Pt))for(var zt=0,kt=Pt.length;zt<kt;zt++)R(Pt[zt],et,yt);else Pt&&typeof Pt=="object"&&R(Pt,et,yt)}yt.operatorOverloading!==!1&&O(et,rt),yt.moduleExports!==!1&&S(et)}}function F(et){var rt="",yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(et=(Math.abs(et)<<1)+(et<0?1:0);et||!rt;){var Tt=et&31;et>>=5,et&&(Tt|=32),rt+=yt[Tt]}return rt}var B=A.url||"",W=A.sourceMaps,N=A.paperFeatures||{},U=A.source||y,H=A.offset||0,G=Xt.agent,Z=G.versionNumber,$=!1,ot=/\r\n|\n|\r/mg,_t;if(W&&(G.chrome&&Z>=30||G.webkit&&Z>=537.76||G.firefox&&Z>=23||G.node)){if(G.node)H-=2;else if(wt&&B&&!wt.location.href.indexOf(B)){var pt=ct.getElementsByTagName("html")[0].innerHTML;H=pt.substr(0,pt.indexOf(y)+1).match(ot).length+1}$=H>0&&!(G.chrome&&Z>=36||G.safari&&Z>=600||G.firefox&&Z>=40||G.node);var It=["AA"+F($?0:H)+"A"];It.length=(y.match(ot)||[]).length+1+($?H:0),_t={version:3,file:B,names:[],mappings:It.join(";AACA"),sourceRoot:"",sources:[B],sourcesContent:[U]}}return(N.operatorOverloading!==!1||N.moduleExports!==!1)&&R(a(y,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,N),_t&&($&&(y=new Array(H+1).join(`
`)+y),/^(inline|both)$/.test(W)&&(y+=`
//# sourceMappingURL=data:application/json;base64,`+mt.btoa(unescape(encodeURIComponent(JSON.stringify(_t))))),y+=`
//# sourceURL=`+(B||"paperscript")),{url:B,source:U,code:y,map:_t}}function w(y,A,m){Xt=A;var b=A.getView(),_=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(y)&&!/\bnew\s+Tool\b/.test(y)?new os:null,x=_?_._events:[],C=["onFrame","onResize"].concat(x),O=[],S=[],R,F=typeof y=="object"?y:p(y,m);y=F.code;function B(Z,$){for(var ot in Z)($||!/^_/.test(ot))&&new RegExp("([\\b\\s\\W]|^)"+ot.replace(/\$/g,"\\$")+"\\b").test(y)&&(O.push(ot),S.push(Z[ot]))}B({__$__:h,$__:c,paper:A,tool:_},!0),B(A),y="var module = { exports: {} }; "+y;var H=z.each(C,function(Z){new RegExp("\\s+"+Z+"\\b").test(y)&&(O.push(Z),this.push("module.exports."+Z+" = "+Z+";"))},[]).join(`
`);H&&(y+=`
`+H),y+=`
return module.exports;`;var W=Xt.agent;if(ct&&(W.chrome||W.firefox&&W.versionNumber<40)){var N=ct.createElement("script"),U=ct.head||ct.getElementsByTagName("head")[0];W.firefox&&(y=`
`+y),N.appendChild(ct.createTextNode("document.__paperscript__ = function("+O+") {"+y+`
}`)),U.appendChild(N),R=ct.__paperscript__,delete ct.__paperscript__,U.removeChild(N)}else R=Function(O,y);var H=R&&R.apply(A,S),G=H||{};return z.each(x,function(Z){var $=G[Z];$&&(_[Z]=$)}),b&&(G.onResize&&b.setOnResize(G.onResize),b.emit("resize",{size:b.size,delta:new k}),G.onFrame&&b.setOnFrame(G.onFrame),b.requestUpdate()),H}function v(y){if(/^text\/(?:x-|)paperscript$/.test(y.type)&&lt.getAttribute(y,"ignore")!=="true"){var A=lt.getAttribute(y,"canvas"),m=ct.getElementById(A),b=y.src||y.getAttribute("data-src"),_=lt.hasAttribute(y,"async"),x="data-paper-scope";if(!m)throw new Error('Unable to find canvas with id "'+A+'"');var C=lt.get(m.getAttribute(x))||new lt().setup(m);return m.setAttribute(x,C._id),b?Si.request({url:b,async:_,mimeType:"text/plain",onLoad:function(O){w(O,C,b)}}):w(y.innerHTML,C,y.baseURI),y.setAttribute("data-paper-ignore","true"),C}}function g(){z.each(ct&&ct.getElementsByTagName("script"),v)}function I(y){return y?v(y):g()}return wt&&(ct.readyState==="complete"?setTimeout(g):ze.add(wt,{load:g})),{compile:p,execute:w,load:I,parse:a,calculateBinary:h,calculateUnary:c}}.call(this);var Xt=new(lt.inject(z.exports,{Base:z,Numerical:J,Key:bi,DomEvent:ze,DomElement:me,document:ct,window:wt,Symbol:Ie,PlacedSymbol:ce}));return Xt.agent.node&&vu(Xt),typeof T=="function"&&T.amd?T("paper",Xt):dt&&(dt.exports=Xt),Xt}).call(Pn,typeof self=="object"?self:null)})(vf);var Lg=vf.exports;const Me=pu(Lg);var mu={exports:{}};mu.exports;(function(dt){(function(mt,T,wt){function ct(K){var it=this,ft=lt();it.next=function(){var J=2091639*it.s0+it.c*23283064365386963e-26;return it.s0=it.s1,it.s1=it.s2,it.s2=J-(it.c=J|0)},it.c=1,it.s0=ft(" "),it.s1=ft(" "),it.s2=ft(" "),it.s0-=ft(K),it.s0<0&&(it.s0+=1),it.s1-=ft(K),it.s1<0&&(it.s1+=1),it.s2-=ft(K),it.s2<0&&(it.s2+=1),ft=null}function z(K,it){return it.c=K.c,it.s0=K.s0,it.s1=K.s1,it.s2=K.s2,it}function Et(K,it){var ft=new ct(K),J=it&&it.state,ut=ft.next;return ut.int32=function(){return ft.next()*4294967296|0},ut.double=function(){return ut()+(ut()*2097152|0)*11102230246251565e-32},ut.quick=ut,J&&(typeof J=="object"&&z(J,ft),ut.state=function(){return z(ft,{})}),ut}function lt(){var K=4022871197,it=function(ft){ft=String(ft);for(var J=0;J<ft.length;J++){K+=ft.charCodeAt(J);var ut=.02519603282416938*K;K=ut>>>0,ut-=K,ut*=K,K=ut>>>0,ut-=K,K+=ut*4294967296}return(K>>>0)*23283064365386963e-26};return it}T&&T.exports?T.exports=Et:wt&&wt.amd?wt(function(){return Et}):this.alea=Et})(Pn,dt,!1)})(mu);var Mg=mu.exports,wu={exports:{}};wu.exports;(function(dt){(function(mt,T,wt){function ct(lt){var K=this,it="";K.x=0,K.y=0,K.z=0,K.w=0,K.next=function(){var J=K.x^K.x<<11;return K.x=K.y,K.y=K.z,K.z=K.w,K.w^=K.w>>>19^J^J>>>8},lt===(lt|0)?K.x=lt:it+=lt;for(var ft=0;ft<it.length+64;ft++)K.x^=it.charCodeAt(ft)|0,K.next()}function z(lt,K){return K.x=lt.x,K.y=lt.y,K.z=lt.z,K.w=lt.w,K}function Et(lt,K){var it=new ct(lt),ft=K&&K.state,J=function(){return(it.next()>>>0)/4294967296};return J.double=function(){do var ut=it.next()>>>11,k=(it.next()>>>0)/4294967296,Ot=(ut+k)/(1<<21);while(Ot===0);return Ot},J.int32=it.next,J.quick=J,ft&&(typeof ft=="object"&&z(ft,it),J.state=function(){return z(it,{})}),J}T&&T.exports?T.exports=Et:wt&&wt.amd?wt(function(){return Et}):this.xor128=Et})(Pn,dt,!1)})(wu);var Rg=wu.exports,yu={exports:{}};yu.exports;(function(dt){(function(mt,T,wt){function ct(lt){var K=this,it="";K.next=function(){var J=K.x^K.x>>>2;return K.x=K.y,K.y=K.z,K.z=K.w,K.w=K.v,(K.d=K.d+362437|0)+(K.v=K.v^K.v<<4^(J^J<<1))|0},K.x=0,K.y=0,K.z=0,K.w=0,K.v=0,lt===(lt|0)?K.x=lt:it+=lt;for(var ft=0;ft<it.length+64;ft++)K.x^=it.charCodeAt(ft)|0,ft==it.length&&(K.d=K.x<<10^K.x>>>4),K.next()}function z(lt,K){return K.x=lt.x,K.y=lt.y,K.z=lt.z,K.w=lt.w,K.v=lt.v,K.d=lt.d,K}function Et(lt,K){var it=new ct(lt),ft=K&&K.state,J=function(){return(it.next()>>>0)/4294967296};return J.double=function(){do var ut=it.next()>>>11,k=(it.next()>>>0)/4294967296,Ot=(ut+k)/(1<<21);while(Ot===0);return Ot},J.int32=it.next,J.quick=J,ft&&(typeof ft=="object"&&z(ft,it),J.state=function(){return z(it,{})}),J}T&&T.exports?T.exports=Et:wt&&wt.amd?wt(function(){return Et}):this.xorwow=Et})(Pn,dt,!1)})(yu);var zg=yu.exports,xu={exports:{}};xu.exports;(function(dt){(function(mt,T,wt){function ct(lt){var K=this;K.next=function(){var ft=K.x,J=K.i,ut,k;return ut=ft[J],ut^=ut>>>7,k=ut^ut<<24,ut=ft[J+1&7],k^=ut^ut>>>10,ut=ft[J+3&7],k^=ut^ut>>>3,ut=ft[J+4&7],k^=ut^ut<<7,ut=ft[J+7&7],ut=ut^ut<<13,k^=ut^ut<<9,ft[J]=k,K.i=J+1&7,k};function it(ft,J){var ut,k=[];if(J===(J|0))k[0]=J;else for(J=""+J,ut=0;ut<J.length;++ut)k[ut&7]=k[ut&7]<<15^J.charCodeAt(ut)+k[ut+1&7]<<13;for(;k.length<8;)k.push(0);for(ut=0;ut<8&&k[ut]===0;++ut);for(ut==8?k[7]=-1:k[ut],ft.x=k,ft.i=0,ut=256;ut>0;--ut)ft.next()}it(K,lt)}function z(lt,K){return K.x=lt.x.slice(),K.i=lt.i,K}function Et(lt,K){lt==null&&(lt=+new Date);var it=new ct(lt),ft=K&&K.state,J=function(){return(it.next()>>>0)/4294967296};return J.double=function(){do var ut=it.next()>>>11,k=(it.next()>>>0)/4294967296,Ot=(ut+k)/(1<<21);while(Ot===0);return Ot},J.int32=it.next,J.quick=J,ft&&(ft.x&&z(ft,it),J.state=function(){return z(it,{})}),J}T&&T.exports?T.exports=Et:wt&&wt.amd?wt(function(){return Et}):this.xorshift7=Et})(Pn,dt,!1)})(xu);var kg=xu.exports,bu={exports:{}};bu.exports;(function(dt){(function(mt,T,wt){function ct(lt){var K=this;K.next=function(){var ft=K.w,J=K.X,ut=K.i,k,Ot;return K.w=ft=ft+1640531527|0,Ot=J[ut+34&127],k=J[ut=ut+1&127],Ot^=Ot<<13,k^=k<<17,Ot^=Ot>>>15,k^=k>>>12,Ot=J[ut]=Ot^k,K.i=ut,Ot+(ft^ft>>>16)|0};function it(ft,J){var ut,k,Ot,vt,Gt,xt=[],le=128;for(J===(J|0)?(k=J,J=null):(J=J+"\0",k=0,le=Math.max(le,J.length)),Ot=0,vt=-32;vt<le;++vt)J&&(k^=J.charCodeAt((vt+32)%J.length)),vt===0&&(Gt=k),k^=k<<10,k^=k>>>15,k^=k<<4,k^=k>>>13,vt>=0&&(Gt=Gt+1640531527|0,ut=xt[vt&127]^=k+Gt,Ot=ut==0?Ot+1:0);for(Ot>=128&&(xt[(J&&J.length||0)&127]=-1),Ot=127,vt=4*128;vt>0;--vt)k=xt[Ot+34&127],ut=xt[Ot=Ot+1&127],k^=k<<13,ut^=ut<<17,k^=k>>>15,ut^=ut>>>12,xt[Ot]=k^ut;ft.w=Gt,ft.X=xt,ft.i=Ot}it(K,lt)}function z(lt,K){return K.i=lt.i,K.w=lt.w,K.X=lt.X.slice(),K}function Et(lt,K){lt==null&&(lt=+new Date);var it=new ct(lt),ft=K&&K.state,J=function(){return(it.next()>>>0)/4294967296};return J.double=function(){do var ut=it.next()>>>11,k=(it.next()>>>0)/4294967296,Ot=(ut+k)/(1<<21);while(Ot===0);return Ot},J.int32=it.next,J.quick=J,ft&&(ft.X&&z(ft,it),J.state=function(){return z(it,{})}),J}T&&T.exports?T.exports=Et:wt&&wt.amd?wt(function(){return Et}):this.xor4096=Et})(Pn,dt,!1)})(bu);var Ng=bu.exports,Su={exports:{}};Su.exports;(function(dt){(function(mt,T,wt){function ct(lt){var K=this,it="";K.next=function(){var J=K.b,ut=K.c,k=K.d,Ot=K.a;return J=J<<25^J>>>7^ut,ut=ut-k|0,k=k<<24^k>>>8^Ot,Ot=Ot-J|0,K.b=J=J<<20^J>>>12^ut,K.c=ut=ut-k|0,K.d=k<<16^ut>>>16^Ot,K.a=Ot-J|0},K.a=0,K.b=0,K.c=-1640531527,K.d=1367130551,lt===Math.floor(lt)?(K.a=lt/4294967296|0,K.b=lt|0):it+=lt;for(var ft=0;ft<it.length+20;ft++)K.b^=it.charCodeAt(ft)|0,K.next()}function z(lt,K){return K.a=lt.a,K.b=lt.b,K.c=lt.c,K.d=lt.d,K}function Et(lt,K){var it=new ct(lt),ft=K&&K.state,J=function(){return(it.next()>>>0)/4294967296};return J.double=function(){do var ut=it.next()>>>11,k=(it.next()>>>0)/4294967296,Ot=(ut+k)/(1<<21);while(Ot===0);return Ot},J.int32=it.next,J.quick=J,ft&&(typeof ft=="object"&&z(ft,it),J.state=function(){return z(it,{})}),J}T&&T.exports?T.exports=Et:wt&&wt.amd?wt(function(){return Et}):this.tychei=Et})(Pn,dt,!1)})(Su);var Fg=Su.exports,pf={exports:{}};(function(dt){(function(mt,T,wt){var ct=256,z=6,Et=52,lt="random",K=wt.pow(ct,z),it=wt.pow(2,Et),ft=it*2,J=ct-1,ut;function k(bt,Mt,Ct){var Zt=[];Mt=Mt==!0?{entropy:!0}:Mt||{};var ee=xt(Gt(Mt.entropy?[bt,Ht(T)]:bt??le(),3),Zt),Qt=new Ot(Zt),ve=function(){for(var ce=Qt.g(z),Ie=K,pe=0;ce<it;)ce=(ce+pe)*ct,Ie*=ct,pe=Qt.g(1);for(;ce>=ft;)ce/=2,Ie/=2,pe>>>=1;return(ce+pe)/Ie};return ve.int32=function(){return Qt.g(4)|0},ve.quick=function(){return Qt.g(4)/4294967296},ve.double=ve,xt(Ht(Qt.S),T),(Mt.pass||Ct||function(ce,Ie,pe,Lt){return Lt&&(Lt.S&&vt(Lt,Qt),ce.state=function(){return vt(Qt,{})}),pe?(wt[lt]=ce,Ie):ce})(ve,ee,"global"in Mt?Mt.global:this==wt,Mt.state)}function Ot(bt){var Mt,Ct=bt.length,Zt=this,ee=0,Qt=Zt.i=Zt.j=0,ve=Zt.S=[];for(Ct||(bt=[Ct++]);ee<ct;)ve[ee]=ee++;for(ee=0;ee<ct;ee++)ve[ee]=ve[Qt=J&Qt+bt[ee%Ct]+(Mt=ve[ee])],ve[Qt]=Mt;(Zt.g=function(ce){for(var Ie,pe=0,Lt=Zt.i,pn=Zt.j,gt=Zt.S;ce--;)Ie=gt[Lt=J&Lt+1],pe=pe*ct+gt[J&(gt[Lt]=gt[pn=J&pn+Ie])+(gt[pn]=Ie)];return Zt.i=Lt,Zt.j=pn,pe})(ct)}function vt(bt,Mt){return Mt.i=bt.i,Mt.j=bt.j,Mt.S=bt.S.slice(),Mt}function Gt(bt,Mt){var Ct=[],Zt=typeof bt,ee;if(Mt&&Zt=="object")for(ee in bt)try{Ct.push(Gt(bt[ee],Mt-1))}catch{}return Ct.length?Ct:Zt=="string"?bt:bt+"\0"}function xt(bt,Mt){for(var Ct=bt+"",Zt,ee=0;ee<Ct.length;)Mt[J&ee]=J&(Zt^=Mt[J&ee]*19)+Ct.charCodeAt(ee++);return Ht(Mt)}function le(){try{var bt;return ut&&(bt=ut.randomBytes)?bt=bt(ct):(bt=new Uint8Array(ct),(mt.crypto||mt.msCrypto).getRandomValues(bt)),Ht(bt)}catch{var Mt=mt.navigator,Ct=Mt&&Mt.plugins;return[+new Date,mt,Ct,mt.screen,Ht(T)]}}function Ht(bt){return String.fromCharCode.apply(0,bt)}if(xt(wt.random(),T),dt.exports){dt.exports=k;try{ut=vu}catch{}}else wt["seed"+lt]=k})(typeof self<"u"?self:Pn,[],Math)})(pf);var Bg=pf.exports,Dg=Mg,qg=Rg,Wg=zg,Ug=kg,Hg=Ng,Vg=Fg,nr=Bg;nr.alea=Dg;nr.xor128=qg;nr.xorwow=Wg;nr.xorshift7=Ug;nr.xor4096=Hg;nr.tychei=Vg;var Gg=nr;const Zg=pu(Gg),Xg=6,na=dt=>(mt,T,wt,ct,z)=>{const{x:Et,y:lt}=mt.bounds[wt],K=new Me.Path.Line({from:[Et,lt],to:dt.toFn(Et,lt,ct),strokeColor:z||"black"});K.strokeWidth=Xg,K.selected=dt.debug;const it=[];if(T.forEach(ft=>{if(mt!==ft){const J=K.getIntersections(ft);J.length&&it.push(J)}}),it.flat().sort(dt.sortFn).forEach((ft,J)=>{K.insert(J+1,ft.point)}),K.segments[1].selected=dt.debug,K.segments.length>2){const ft={vertical:"y",horizontal:"x"},J=K.segments[0].point[ft[dt.orientation]],ut=K.segments[1].point[ft[dt.orientation]],k=Math.abs(J-ut);K.splitAt(k).remove()}return K},Kg={toFn:(dt,mt)=>[0,mt],sortFn:(dt,mt)=>mt.point.x-dt.point.x,debug:!1,orientation:"horizontal"},Js=na(Kg),Yg={toFn:(dt,mt,T)=>[T.project.view.viewSize.width,mt],sortFn:(dt,mt)=>dt.point.x-mt.point.x,debug:!1,orientation:"horizontal"},Qs=na(Yg),Jg={toFn:dt=>[dt,0],sortFn:(dt,mt)=>mt.point.y-dt.point.y,debug:!1,orientation:"vertical"},$s=na(Jg),Qg={toFn:(dt,mt,T)=>[dt,T.project.view.viewSize.height],sortFn:(dt,mt)=>dt.point.y-mt.point.y,debug:!1,orientation:"vertical"},js=na(Qg),mf=(dt,mt,T=!0)=>{const{width:wt,height:ct}=mt.view.viewSize,z=Math.floor(dt*wt);if(T){const Et=Array(Math.floor(wt/z)).fill("").map((ft,J)=>(J+1)*z),lt=Array(Math.floor(ct/z)).fill("").map((ft,J)=>(J+1)*z),K=[];lt.forEach((ft,J)=>{Et.forEach((ut,k)=>{const Ot=new Me.Point(ut,ft),vt=J===0&&k===0,Gt=J===lt.length-1&&k===Et.length-1;(vt||Gt)&&K.push(Ot);const xt=new Me.Path.Circle(Ot,3);xt.fillColor=new Me.Color("#b4da55")})});const it=new Me.Path.Rectangle(K[0],K[1]);it.selected=!0}return Et=>{const lt=Et%z,K=Math.round(Et-lt);return K===0?z:K}},wf=(dt,mt)=>(T=wt=>wt)=>{const wt=dt,ct=dt,{width:z,height:Et}=mt.view.viewSize,lt=wt[0]*z+Math.abs(wt[1]-wt[0])*z*Math.random(),K=ct[0]*Et+Math.abs(ct[1]-ct[0])*Et*Math.random(),it=T(lt),ft=T(K),J=new mt.Size(it,ft),ut=z-it,k=Et-ft,vt=[Math.random()*ut,Math.random()*k].map(T),Gt=new mt.Point(...vt);return new mt.Path.Rectangle(Gt,J)},yf=(dt,mt,T)=>{const wt=mt.isInside(dt.bounds),ct=dt.isInside(mt.bounds),z=dt.bounds.expand(T).intersects(mt.bounds),Et=mt.bounds.expand(T).intersects(dt.bounds);return wt||ct||z||Et},xf=(dt,mt,T,wt,ct=yf)=>{const z=[],Et=T;for(let lt=0;lt<wt;lt++){let K=dt(mt);if(!z.length)z.push(K);else{for(;z.some(it=>ct(it,K,Et));)K.remove(),K=dt(mt);z.push(K)}}return z};var ta={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ta.exports;(function(dt,mt){(function(){var T,wt="4.17.21",ct=200,z="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Et="Expected a function",lt="Invalid `variable` option passed into `_.template`",K="__lodash_hash_undefined__",it=500,ft="__lodash_placeholder__",J=1,ut=2,k=4,Ot=1,vt=2,Gt=1,xt=2,le=4,Ht=8,bt=16,Mt=32,Ct=64,Zt=128,ee=256,Qt=512,ve=30,ce="...",Ie=800,pe=16,Lt=1,pn=2,gt=3,Re=1/0,xe=9007199254740991,ne=17976931348623157e292,De=0/0,Ke=4294967295,ir=Ke-1,rr=Ke>>>1,ia=[["ary",Zt],["bind",Gt],["bindKey",xt],["curry",Ht],["curryRight",bt],["flip",Qt],["partial",Mt],["partialRight",Ct],["rearg",ee]],be="[object Arguments]",jn="[object Array]",Er="[object AsyncFunction]",ti="[object Boolean]",me="[object Date]",ze="[object DOMException]",we="[object Error]",sr="[object Function]",Ni="[object GeneratorFunction]",mn="[object Map]",bi="[object Number]",ra="[object Null]",zn="[object Object]",os="[object Promise]",sa="[object Proxy]",Si="[object RegExp]",oe="[object Set]",ei="[object String]",Se="[object Symbol]",fs="[object Undefined]",Xt="[object WeakMap]",t="[object WeakSet]",n="[object ArrayBuffer]",r="[object DataView]",s="[object Float32Array]",a="[object Float64Array]",o="[object Int8Array]",l="[object Int16Array]",f="[object Int32Array]",h="[object Uint8Array]",c="[object Uint8ClampedArray]",p="[object Uint16Array]",w="[object Uint32Array]",v=/\b__p \+= '';/g,g=/\b(__p \+=) '' \+/g,I=/(__e\(.*?\)|\b__t\)) \+\n'';/g,y=/&(?:amp|lt|gt|quot|#39);/g,A=/[&<>"']/g,m=RegExp(y.source),b=RegExp(A.source),_=/<%-([\s\S]+?)%>/g,x=/<%([\s\S]+?)%>/g,C=/<%=([\s\S]+?)%>/g,O=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/,R=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,F=/[\\^$.*+?()[\]{}|]/g,B=RegExp(F.source),W=/^\s+/,N=/\s/,U=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,H=/\{\n\/\* \[wrapped with (.+)\] \*/,G=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$=/[()=,{}\[\]\/\s]/,ot=/\\(\\)?/g,_t=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,It=/^[-+]0x[0-9a-f]+$/i,et=/^0b[01]+$/i,rt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,Tt=/^(?:0|[1-9]\d*)$/,Pt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zt=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,Bt="\\ud800-\\udfff",Kt="\\u0300-\\u036f",Ut="\\ufe20-\\ufe2f",ke="\\u20d0-\\u20ff",Oe=Kt+Ut+ke,qe="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",fe="\\xac\\xb1\\xd7\\xf7",Pe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ye="\\u2000-\\u206f",Ne=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nn="A-Z\\xc0-\\xd6\\xd8-\\xde",kn="\\ufe0e\\ufe0f",fn=fe+Pe+Ye+Ne,rn="['’]",Je="["+Bt+"]",Qe="["+fn+"]",wn="["+Oe+"]",ln="\\d+",ar="["+qe+"]",Lr="["+Ae+"]",Mr="[^"+Bt+fn+ln+qe+Ae+nn+"]",ur="\\ud83c[\\udffb-\\udfff]",ls="(?:"+wn+"|"+ur+")",Rr="[^"+Bt+"]",Ci="(?:\\ud83c[\\udde6-\\uddff]){2}",Fi="[\\ud800-\\udbff][\\udc00-\\udfff]",Nn="["+nn+"]",Bi="\\u200d",ni="(?:"+Lr+"|"+Mr+")",ii="(?:"+Nn+"|"+Mr+")",yn="(?:"+rn+"(?:d|ll|m|re|s|t|ve))?",hn="(?:"+rn+"(?:D|LL|M|RE|S|T|VE))?",Tn=ls+"?",xn="["+kn+"]?",Ii="(?:"+Bi+"(?:"+[Rr,Ci,Fi].join("|")+")"+xn+Tn+")*",zr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",or=xn+Tn+Ii,Nr="(?:"+[ar,Ci,Fi].join("|")+")"+or,ri="(?:"+[Rr+wn+"?",wn,Ci,Fi,Je].join("|")+")",aa=RegExp(rn,"g"),hs=RegExp(wn,"g"),fr=RegExp(ur+"(?="+ur+")|"+ri+or,"g"),cs=RegExp([Nn+"?"+Lr+"+"+yn+"(?="+[Qe,Nn,"$"].join("|")+")",ii+"+"+hn+"(?="+[Qe,Nn+ni,"$"].join("|")+")",Nn+"?"+ni+"+"+yn,Nn+"+"+hn,kr,zr,ln,Nr].join("|"),"g"),ua=RegExp("["+Bi+Bt+Oe+kn+"]"),oa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],la=-1,ye={};ye[s]=ye[a]=ye[o]=ye[l]=ye[f]=ye[h]=ye[c]=ye[p]=ye[w]=!0,ye[be]=ye[jn]=ye[n]=ye[ti]=ye[r]=ye[me]=ye[we]=ye[sr]=ye[mn]=ye[bi]=ye[zn]=ye[Si]=ye[oe]=ye[ei]=ye[Xt]=!1;var ge={};ge[be]=ge[jn]=ge[n]=ge[r]=ge[ti]=ge[me]=ge[s]=ge[a]=ge[o]=ge[l]=ge[f]=ge[mn]=ge[bi]=ge[zn]=ge[Si]=ge[oe]=ge[ei]=ge[Se]=ge[h]=ge[c]=ge[p]=ge[w]=!0,ge[we]=ge[sr]=ge[Xt]=!1;var ha={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ca={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ds={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Di={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},da=parseFloat,_a=parseInt,Fr=typeof Pn=="object"&&Pn&&Pn.Object===Object&&Pn,lr=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Fr||lr||Function("return this")(),Br=mt&&!mt.nodeType&&mt,Hn=Br&&!0&&dt&&!dt.nodeType&&dt,_s=Hn&&Hn.exports===Br,hr=_s&&Fr.process,cn=function(){try{var X=Hn&&Hn.require&&Hn.require("util").types;return X||hr&&hr.binding&&hr.binding("util")}catch{}}(),qi=cn&&cn.isArrayBuffer,si=cn&&cn.isDate,Wi=cn&&cn.isMap,Dr=cn&&cn.isRegExp,Vn=cn&&cn.isSet,qr=cn&&cn.isTypedArray;function ue(X,nt,j){switch(j.length){case 0:return X.call(nt);case 1:return X.call(nt,j[0]);case 2:return X.call(nt,j[0],j[1]);case 3:return X.call(nt,j[0],j[1],j[2])}return X.apply(nt,j)}function ga(X,nt,j,M){for(var D=-1,Q=X==null?0:X.length;++D<Q;){var tt=X[D];nt(M,tt,j(tt),X)}return M}function $e(X,nt){for(var j=-1,M=X==null?0:X.length;++j<M&&nt(X[j],j,X)!==!1;);return X}function Ai(X,nt){for(var j=X==null?0:X.length;j--&&nt(X[j],j,X)!==!1;);return X}function gs(X,nt){for(var j=-1,M=X==null?0:X.length;++j<M;)if(!nt(X[j],j,X))return!1;return!0}function Gn(X,nt){for(var j=-1,M=X==null?0:X.length,D=0,Q=[];++j<M;){var tt=X[j];nt(tt,j,X)&&(Q[D++]=tt)}return Q}function cr(X,nt){var j=X==null?0:X.length;return!!j&&ui(X,nt,0)>-1}function Wr(X,nt,j){for(var M=-1,D=X==null?0:X.length;++M<D;)if(j(nt,X[M]))return!0;return!1}function Ce(X,nt){for(var j=-1,M=X==null?0:X.length,D=Array(M);++j<M;)D[j]=nt(X[j],j,X);return D}function Zn(X,nt){for(var j=-1,M=nt.length,D=X.length;++j<M;)X[D+j]=nt[j];return X}function Ur(X,nt,j,M){var D=-1,Q=X==null?0:X.length;for(M&&Q&&(j=X[++D]);++D<Q;)j=nt(j,X[D],D,X);return j}function va(X,nt,j,M){var D=X==null?0:X.length;for(M&&D&&(j=X[--D]);D--;)j=nt(j,X[D],D,X);return j}function Hr(X,nt){for(var j=-1,M=X==null?0:X.length;++j<M;)if(nt(X[j],j,X))return!0;return!1}var ai=_r("length");function We(X){return X.split("")}function vs(X){return X.match(Z)||[]}function Pi(X,nt,j){var M;return j(X,function(D,Q,tt){if(nt(D,Q,tt))return M=Q,!1}),M}function dr(X,nt,j,M){for(var D=X.length,Q=j+(M?1:-1);M?Q--:++Q<D;)if(nt(X[Q],Q,X))return Q;return-1}function ui(X,nt,j){return nt===nt?Zr(X,nt,j):dr(X,Ui,j)}function pa(X,nt,j,M){for(var D=j-1,Q=X.length;++D<Q;)if(M(X[D],nt))return D;return-1}function Ui(X){return X!==X}function oi(X,nt){var j=X==null?0:X.length;return j?vr(X,nt)/j:De}function _r(X){return function(nt){return nt==null?T:nt[X]}}function gr(X){return function(nt){return X==null?T:X[nt]}}function re(X,nt,j,M,D){return D(X,function(Q,tt,St){j=M?(M=!1,Q):nt(j,Q,tt,St)}),j}function Vr(X,nt){var j=X.length;for(X.sort(nt);j--;)X[j]=X[j].value;return X}function vr(X,nt){for(var j,M=-1,D=X.length;++M<D;){var Q=nt(X[M]);Q!==T&&(j=j===T?Q:j+Q)}return j}function pr(X,nt){for(var j=-1,M=Array(X);++j<X;)M[j]=nt(j);return M}function He(X,nt){return Ce(nt,function(j){return[j,X[j]]})}function Fn(X){return X&&X.slice(0,yr(X)+1).replace(W,"")}function Nt(X){return function(nt){return X(nt)}}function Hi(X,nt){return Ce(nt,function(j){return X[j]})}function de(X,nt){return X.has(nt)}function Vi(X,nt){for(var j=-1,M=X.length;++j<M&&ui(nt,X[j],0)>-1;);return j}function Xn(X,nt){for(var j=X.length;j--&&ui(nt,X[j],0)>-1;);return j}function Ee(X,nt){for(var j=X.length,M=0;j--;)X[j]===nt&&++M;return M}var Bn=gr(ha),mr=gr(ca);function ma(X){return"\\"+Di[X]}function Gr(X,nt){return X==null?T:X[nt]}function Ti(X){return ua.test(X)}function bn(X){return oa.test(X)}function Gi(X){for(var nt,j=[];!(nt=X.next()).done;)j.push(nt.value);return j}function fi(X){var nt=-1,j=Array(X.size);return X.forEach(function(M,D){j[++nt]=[D,M]}),j}function wr(X,nt){return function(j){return X(nt(j))}}function Dn(X,nt){for(var j=-1,M=X.length,D=0,Q=[];++j<M;){var tt=X[j];(tt===nt||tt===ft)&&(X[j]=ft,Q[D++]=j)}return Q}function Zi(X){var nt=-1,j=Array(X.size);return X.forEach(function(M){j[++nt]=M}),j}function Ge(X){var nt=-1,j=Array(X.size);return X.forEach(function(M){j[++nt]=[M,M]}),j}function Zr(X,nt,j){for(var M=j-1,D=X.length;++M<D;)if(X[M]===nt)return M;return-1}function wa(X,nt,j){for(var M=j+1;M--;)if(X[M]===nt)return M;return M}function Oi(X){return Ti(X)?Xi(X):ai(X)}function sn(X){return Ti(X)?Xr(X):We(X)}function yr(X){for(var nt=X.length;nt--&&N.test(X.charAt(nt)););return nt}var ya=gr(ds);function Xi(X){for(var nt=fr.lastIndex=0;fr.test(X);)++nt;return nt}function Xr(X){return X.match(fr)||[]}function xa(X){return X.match(cs)||[]}var ba=function X(nt){nt=nt==null?Ue:li.defaults(Ue.Object(),nt,li.pick(Ue,fa));var j=nt.Array,M=nt.Date,D=nt.Error,Q=nt.Function,tt=nt.Math,St=nt.Object,Ft=nt.RegExp,Vt=nt.String,Yt=nt.TypeError,je=j.prototype,hi=Q.prototype,Kn=St.prototype,ci=nt["__core-js_shared__"],xr=hi.toString,_e=Kn.hasOwnProperty,bf=0,Cu=function(){var e=/[^.]+$/.exec(ci&&ci.keys&&ci.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ps=Kn.toString,Sf=xr.call(St),Cf=Ue._,If=Ft("^"+xr.call(_e).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ms=_s?nt.Buffer:T,Ei=nt.Symbol,ws=nt.Uint8Array,Iu=ms?ms.allocUnsafe:T,ys=wr(St.getPrototypeOf,St),Au=St.create,Pu=Kn.propertyIsEnumerable,xs=je.splice,Tu=Ei?Ei.isConcatSpreadable:T,Kr=Ei?Ei.iterator:T,Ki=Ei?Ei.toStringTag:T,bs=function(){try{var e=ji(St,"defineProperty");return e({},"",{}),e}catch{}}(),Af=nt.clearTimeout!==Ue.clearTimeout&&nt.clearTimeout,Pf=M&&M.now!==Ue.Date.now&&M.now,Tf=nt.setTimeout!==Ue.setTimeout&&nt.setTimeout,Ss=tt.ceil,Cs=tt.floor,Sa=St.getOwnPropertySymbols,Of=ms?ms.isBuffer:T,Ou=nt.isFinite,Ef=je.join,Lf=wr(St.keys,St),Ve=tt.max,tn=tt.min,Mf=M.now,Rf=nt.parseInt,Eu=tt.random,zf=je.reverse,Ca=ji(nt,"DataView"),Yr=ji(nt,"Map"),Ia=ji(nt,"Promise"),br=ji(nt,"Set"),Jr=ji(nt,"WeakMap"),Qr=ji(St,"create"),Is=Jr&&new Jr,Sr={},kf=tr(Ca),Nf=tr(Yr),Ff=tr(Ia),Bf=tr(br),Df=tr(Jr),As=Ei?Ei.prototype:T,$r=As?As.valueOf:T,Lu=As?As.toString:T;function E(e){if(Le(e)&&!Jt(e)&&!(e instanceof se)){if(e instanceof On)return e;if(_e.call(e,"__wrapped__"))return Ro(e)}return new On(e)}var Cr=function(){function e(){}return function(i){if(!Te(i))return{};if(Au)return Au(i);e.prototype=i;var u=new e;return e.prototype=T,u}}();function Ps(){}function On(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=T}E.templateSettings={escape:_,evaluate:x,interpolate:C,variable:"",imports:{_:E}},E.prototype=Ps.prototype,E.prototype.constructor=E,On.prototype=Cr(Ps.prototype),On.prototype.constructor=On;function se(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ke,this.__views__=[]}function qf(){var e=new se(this.__wrapped__);return e.__actions__=dn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=dn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=dn(this.__views__),e}function Wf(){if(this.__filtered__){var e=new se(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Uf(){var e=this.__wrapped__.value(),i=this.__dir__,u=Jt(e),d=i<0,P=u?e.length:0,L=th(0,P,this.__views__),q=L.start,V=L.end,Y=V-q,st=d?V:q-1,at=this.__iteratees__,ht=at.length,At=0,Rt=tn(Y,this.__takeCount__);if(!u||!d&&P==Y&&Rt==Y)return eo(e,this.__actions__);var qt=[];t:for(;Y--&&At<Rt;){st+=i;for(var jt=-1,Wt=e[st];++jt<ht;){var ie=at[jt],ae=ie.iteratee,In=ie.type,on=ae(Wt);if(In==pn)Wt=on;else if(!on){if(In==Lt)continue t;break t}}qt[At++]=Wt}return qt}se.prototype=Cr(Ps.prototype),se.prototype.constructor=se;function Yi(e){var i=-1,u=e==null?0:e.length;for(this.clear();++i<u;){var d=e[i];this.set(d[0],d[1])}}function Hf(){this.__data__=Qr?Qr(null):{},this.size=0}function Vf(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function Gf(e){var i=this.__data__;if(Qr){var u=i[e];return u===K?T:u}return _e.call(i,e)?i[e]:T}function Zf(e){var i=this.__data__;return Qr?i[e]!==T:_e.call(i,e)}function Xf(e,i){var u=this.__data__;return this.size+=this.has(e)?0:1,u[e]=Qr&&i===T?K:i,this}Yi.prototype.clear=Hf,Yi.prototype.delete=Vf,Yi.prototype.get=Gf,Yi.prototype.has=Zf,Yi.prototype.set=Xf;function di(e){var i=-1,u=e==null?0:e.length;for(this.clear();++i<u;){var d=e[i];this.set(d[0],d[1])}}function Kf(){this.__data__=[],this.size=0}function Yf(e){var i=this.__data__,u=Ts(i,e);if(u<0)return!1;var d=i.length-1;return u==d?i.pop():xs.call(i,u,1),--this.size,!0}function Jf(e){var i=this.__data__,u=Ts(i,e);return u<0?T:i[u][1]}function Qf(e){return Ts(this.__data__,e)>-1}function $f(e,i){var u=this.__data__,d=Ts(u,e);return d<0?(++this.size,u.push([e,i])):u[d][1]=i,this}di.prototype.clear=Kf,di.prototype.delete=Yf,di.prototype.get=Jf,di.prototype.has=Qf,di.prototype.set=$f;function _i(e){var i=-1,u=e==null?0:e.length;for(this.clear();++i<u;){var d=e[i];this.set(d[0],d[1])}}function jf(){this.size=0,this.__data__={hash:new Yi,map:new(Yr||di),string:new Yi}}function tl(e){var i=qs(this,e).delete(e);return this.size-=i?1:0,i}function el(e){return qs(this,e).get(e)}function nl(e){return qs(this,e).has(e)}function il(e,i){var u=qs(this,e),d=u.size;return u.set(e,i),this.size+=u.size==d?0:1,this}_i.prototype.clear=jf,_i.prototype.delete=tl,_i.prototype.get=el,_i.prototype.has=nl,_i.prototype.set=il;function Ji(e){var i=-1,u=e==null?0:e.length;for(this.__data__=new _i;++i<u;)this.add(e[i])}function rl(e){return this.__data__.set(e,K),this}function sl(e){return this.__data__.has(e)}Ji.prototype.add=Ji.prototype.push=rl,Ji.prototype.has=sl;function qn(e){var i=this.__data__=new di(e);this.size=i.size}function al(){this.__data__=new di,this.size=0}function ul(e){var i=this.__data__,u=i.delete(e);return this.size=i.size,u}function ol(e){return this.__data__.get(e)}function fl(e){return this.__data__.has(e)}function ll(e,i){var u=this.__data__;if(u instanceof di){var d=u.__data__;if(!Yr||d.length<ct-1)return d.push([e,i]),this.size=++u.size,this;u=this.__data__=new _i(d)}return u.set(e,i),this.size=u.size,this}qn.prototype.clear=al,qn.prototype.delete=ul,qn.prototype.get=ol,qn.prototype.has=fl,qn.prototype.set=ll;function Mu(e,i){var u=Jt(e),d=!u&&er(e),P=!u&&!d&&ki(e),L=!u&&!d&&!P&&Tr(e),q=u||d||P||L,V=q?pr(e.length,Vt):[],Y=V.length;for(var st in e)(i||_e.call(e,st))&&!(q&&(st=="length"||P&&(st=="offset"||st=="parent")||L&&(st=="buffer"||st=="byteLength"||st=="byteOffset")||mi(st,Y)))&&V.push(st);return V}function Ru(e){var i=e.length;return i?e[Na(0,i-1)]:T}function hl(e,i){return Ws(dn(e),Qi(i,0,e.length))}function cl(e){return Ws(dn(e))}function Aa(e,i,u){(u!==T&&!Wn(e[i],u)||u===T&&!(i in e))&&gi(e,i,u)}function jr(e,i,u){var d=e[i];(!(_e.call(e,i)&&Wn(d,u))||u===T&&!(i in e))&&gi(e,i,u)}function Ts(e,i){for(var u=e.length;u--;)if(Wn(e[u][0],i))return u;return-1}function dl(e,i,u,d){return Li(e,function(P,L,q){i(d,P,u(P),q)}),d}function zu(e,i){return e&&Jn(i,Ze(i),e)}function _l(e,i){return e&&Jn(i,gn(i),e)}function gi(e,i,u){i=="__proto__"&&bs?bs(e,i,{configurable:!0,enumerable:!0,value:u,writable:!0}):e[i]=u}function Pa(e,i){for(var u=-1,d=i.length,P=j(d),L=e==null;++u<d;)P[u]=L?T:uu(e,i[u]);return P}function Qi(e,i,u){return e===e&&(u!==T&&(e=e<=u?e:u),i!==T&&(e=e>=i?e:i)),e}function En(e,i,u,d,P,L){var q,V=i&J,Y=i&ut,st=i&k;if(u&&(q=P?u(e,d,P,L):u(e)),q!==T)return q;if(!Te(e))return e;var at=Jt(e);if(at){if(q=nh(e),!V)return dn(e,q)}else{var ht=en(e),At=ht==sr||ht==Ni;if(ki(e))return ro(e,V);if(ht==zn||ht==be||At&&!P){if(q=Y||At?{}:Co(e),!V)return Y?Gl(e,_l(q,e)):Vl(e,zu(q,e))}else{if(!ge[ht])return P?e:{};q=ih(e,ht,V)}}L||(L=new qn);var Rt=L.get(e);if(Rt)return Rt;L.set(e,q),jo(e)?e.forEach(function(Wt){q.add(En(Wt,i,u,Wt,e,L))}):Qo(e)&&e.forEach(function(Wt,ie){q.set(ie,En(Wt,i,u,ie,e,L))});var qt=st?Y?Xa:Za:Y?gn:Ze,jt=at?T:qt(e);return $e(jt||e,function(Wt,ie){jt&&(ie=Wt,Wt=e[ie]),jr(q,ie,En(Wt,i,u,ie,e,L))}),q}function gl(e){var i=Ze(e);return function(u){return ku(u,e,i)}}function ku(e,i,u){var d=u.length;if(e==null)return!d;for(e=St(e);d--;){var P=u[d],L=i[P],q=e[P];if(q===T&&!(P in e)||!L(q))return!1}return!0}function Nu(e,i,u){if(typeof e!="function")throw new Yt(Et);return as(function(){e.apply(T,u)},i)}function ts(e,i,u,d){var P=-1,L=cr,q=!0,V=e.length,Y=[],st=i.length;if(!V)return Y;u&&(i=Ce(i,Nt(u))),d?(L=Wr,q=!1):i.length>=ct&&(L=de,q=!1,i=new Ji(i));t:for(;++P<V;){var at=e[P],ht=u==null?at:u(at);if(at=d||at!==0?at:0,q&&ht===ht){for(var At=st;At--;)if(i[At]===ht)continue t;Y.push(at)}else L(i,ht,d)||Y.push(at)}return Y}var Li=fo(Yn),Fu=fo(Oa,!0);function vl(e,i){var u=!0;return Li(e,function(d,P,L){return u=!!i(d,P,L),u}),u}function Os(e,i,u){for(var d=-1,P=e.length;++d<P;){var L=e[d],q=i(L);if(q!=null&&(V===T?q===q&&!Cn(q):u(q,V)))var V=q,Y=L}return Y}function pl(e,i,u,d){var P=e.length;for(u=$t(u),u<0&&(u=-u>P?0:P+u),d=d===T||d>P?P:$t(d),d<0&&(d+=P),d=u>d?0:ef(d);u<d;)e[u++]=i;return e}function Bu(e,i){var u=[];return Li(e,function(d,P,L){i(d,P,L)&&u.push(d)}),u}function Xe(e,i,u,d,P){var L=-1,q=e.length;for(u||(u=sh),P||(P=[]);++L<q;){var V=e[L];i>0&&u(V)?i>1?Xe(V,i-1,u,d,P):Zn(P,V):d||(P[P.length]=V)}return P}var Ta=lo(),Du=lo(!0);function Yn(e,i){return e&&Ta(e,i,Ze)}function Oa(e,i){return e&&Du(e,i,Ze)}function Es(e,i){return Gn(i,function(u){return wi(e[u])})}function $i(e,i){i=Ri(i,e);for(var u=0,d=i.length;e!=null&&u<d;)e=e[Qn(i[u++])];return u&&u==d?e:T}function qu(e,i,u){var d=i(e);return Jt(e)?d:Zn(d,u(e))}function an(e){return e==null?e===T?fs:ra:Ki&&Ki in St(e)?jl(e):ch(e)}function Ea(e,i){return e>i}function ml(e,i){return e!=null&&_e.call(e,i)}function wl(e,i){return e!=null&&i in St(e)}function yl(e,i,u){return e>=tn(i,u)&&e<Ve(i,u)}function La(e,i,u){for(var d=u?Wr:cr,P=e[0].length,L=e.length,q=L,V=j(L),Y=1/0,st=[];q--;){var at=e[q];q&&i&&(at=Ce(at,Nt(i))),Y=tn(at.length,Y),V[q]=!u&&(i||P>=120&&at.length>=120)?new Ji(q&&at):T}at=e[0];var ht=-1,At=V[0];t:for(;++ht<P&&st.length<Y;){var Rt=at[ht],qt=i?i(Rt):Rt;if(Rt=u||Rt!==0?Rt:0,!(At?de(At,qt):d(st,qt,u))){for(q=L;--q;){var jt=V[q];if(!(jt?de(jt,qt):d(e[q],qt,u)))continue t}At&&At.push(qt),st.push(Rt)}}return st}function xl(e,i,u,d){return Yn(e,function(P,L,q){i(d,u(P),L,q)}),d}function es(e,i,u){i=Ri(i,e),e=To(e,i);var d=e==null?e:e[Qn(Mn(i))];return d==null?T:ue(d,e,u)}function Wu(e){return Le(e)&&an(e)==be}function bl(e){return Le(e)&&an(e)==n}function Sl(e){return Le(e)&&an(e)==me}function ns(e,i,u,d,P){return e===i?!0:e==null||i==null||!Le(e)&&!Le(i)?e!==e&&i!==i:Cl(e,i,u,d,ns,P)}function Cl(e,i,u,d,P,L){var q=Jt(e),V=Jt(i),Y=q?jn:en(e),st=V?jn:en(i);Y=Y==be?zn:Y,st=st==be?zn:st;var at=Y==zn,ht=st==zn,At=Y==st;if(At&&ki(e)){if(!ki(i))return!1;q=!0,at=!1}if(At&&!at)return L||(L=new qn),q||Tr(e)?xo(e,i,u,d,P,L):Ql(e,i,Y,u,d,P,L);if(!(u&Ot)){var Rt=at&&_e.call(e,"__wrapped__"),qt=ht&&_e.call(i,"__wrapped__");if(Rt||qt){var jt=Rt?e.value():e,Wt=qt?i.value():i;return L||(L=new qn),P(jt,Wt,u,d,L)}}return At?(L||(L=new qn),$l(e,i,u,d,P,L)):!1}function Il(e){return Le(e)&&en(e)==mn}function Ma(e,i,u,d){var P=u.length,L=P,q=!d;if(e==null)return!L;for(e=St(e);P--;){var V=u[P];if(q&&V[2]?V[1]!==e[V[0]]:!(V[0]in e))return!1}for(;++P<L;){V=u[P];var Y=V[0],st=e[Y],at=V[1];if(q&&V[2]){if(st===T&&!(Y in e))return!1}else{var ht=new qn;if(d)var At=d(st,at,Y,e,i,ht);if(!(At===T?ns(at,st,Ot|vt,d,ht):At))return!1}}return!0}function Uu(e){if(!Te(e)||uh(e))return!1;var i=wi(e)?If:rt;return i.test(tr(e))}function Al(e){return Le(e)&&an(e)==Si}function Pl(e){return Le(e)&&en(e)==oe}function Tl(e){return Le(e)&&Xs(e.length)&&!!ye[an(e)]}function Hu(e){return typeof e=="function"?e:e==null?vn:typeof e=="object"?Jt(e)?Zu(e[0],e[1]):Gu(e):df(e)}function Ra(e){if(!ss(e))return Lf(e);var i=[];for(var u in St(e))_e.call(e,u)&&u!="constructor"&&i.push(u);return i}function Ol(e){if(!Te(e))return hh(e);var i=ss(e),u=[];for(var d in e)d=="constructor"&&(i||!_e.call(e,d))||u.push(d);return u}function za(e,i){return e<i}function Vu(e,i){var u=-1,d=_n(e)?j(e.length):[];return Li(e,function(P,L,q){d[++u]=i(P,L,q)}),d}function Gu(e){var i=Ya(e);return i.length==1&&i[0][2]?Ao(i[0][0],i[0][1]):function(u){return u===e||Ma(u,e,i)}}function Zu(e,i){return Qa(e)&&Io(i)?Ao(Qn(e),i):function(u){var d=uu(u,e);return d===T&&d===i?ou(u,e):ns(i,d,Ot|vt)}}function Ls(e,i,u,d,P){e!==i&&Ta(i,function(L,q){if(P||(P=new qn),Te(L))El(e,i,q,u,Ls,d,P);else{var V=d?d(ja(e,q),L,q+"",e,i,P):T;V===T&&(V=L),Aa(e,q,V)}},gn)}function El(e,i,u,d,P,L,q){var V=ja(e,u),Y=ja(i,u),st=q.get(Y);if(st){Aa(e,u,st);return}var at=L?L(V,Y,u+"",e,i,q):T,ht=at===T;if(ht){var At=Jt(Y),Rt=!At&&ki(Y),qt=!At&&!Rt&&Tr(Y);at=Y,At||Rt||qt?Jt(V)?at=V:Fe(V)?at=dn(V):Rt?(ht=!1,at=ro(Y,!0)):qt?(ht=!1,at=so(Y,!0)):at=[]:us(Y)||er(Y)?(at=V,er(V)?at=nf(V):(!Te(V)||wi(V))&&(at=Co(Y))):ht=!1}ht&&(q.set(Y,at),P(at,Y,d,L,q),q.delete(Y)),Aa(e,u,at)}function Xu(e,i){var u=e.length;if(u)return i+=i<0?u:0,mi(i,u)?e[i]:T}function Ku(e,i,u){i.length?i=Ce(i,function(L){return Jt(L)?function(q){return $i(q,L.length===1?L[0]:L)}:L}):i=[vn];var d=-1;i=Ce(i,Nt(Dt()));var P=Vu(e,function(L,q,V){var Y=Ce(i,function(st){return st(L)});return{criteria:Y,index:++d,value:L}});return Vr(P,function(L,q){return Hl(L,q,u)})}function Ll(e,i){return Yu(e,i,function(u,d){return ou(e,d)})}function Yu(e,i,u){for(var d=-1,P=i.length,L={};++d<P;){var q=i[d],V=$i(e,q);u(V,q)&&is(L,Ri(q,e),V)}return L}function Ml(e){return function(i){return $i(i,e)}}function ka(e,i,u,d){var P=d?pa:ui,L=-1,q=i.length,V=e;for(e===i&&(i=dn(i)),u&&(V=Ce(e,Nt(u)));++L<q;)for(var Y=0,st=i[L],at=u?u(st):st;(Y=P(V,at,Y,d))>-1;)V!==e&&xs.call(V,Y,1),xs.call(e,Y,1);return e}function Ju(e,i){for(var u=e?i.length:0,d=u-1;u--;){var P=i[u];if(u==d||P!==L){var L=P;mi(P)?xs.call(e,P,1):Da(e,P)}}return e}function Na(e,i){return e+Cs(Eu()*(i-e+1))}function Rl(e,i,u,d){for(var P=-1,L=Ve(Ss((i-e)/(u||1)),0),q=j(L);L--;)q[d?L:++P]=e,e+=u;return q}function Fa(e,i){var u="";if(!e||i<1||i>xe)return u;do i%2&&(u+=e),i=Cs(i/2),i&&(e+=e);while(i);return u}function te(e,i){return tu(Po(e,i,vn),e+"")}function zl(e){return Ru(Or(e))}function kl(e,i){var u=Or(e);return Ws(u,Qi(i,0,u.length))}function is(e,i,u,d){if(!Te(e))return e;i=Ri(i,e);for(var P=-1,L=i.length,q=L-1,V=e;V!=null&&++P<L;){var Y=Qn(i[P]),st=u;if(Y==="__proto__"||Y==="constructor"||Y==="prototype")return e;if(P!=q){var at=V[Y];st=d?d(at,Y,V):T,st===T&&(st=Te(at)?at:mi(i[P+1])?[]:{})}jr(V,Y,st),V=V[Y]}return e}var Qu=Is?function(e,i){return Is.set(e,i),e}:vn,Nl=bs?function(e,i){return bs(e,"toString",{configurable:!0,enumerable:!1,value:lu(i),writable:!0})}:vn;function Fl(e){return Ws(Or(e))}function Ln(e,i,u){var d=-1,P=e.length;i<0&&(i=-i>P?0:P+i),u=u>P?P:u,u<0&&(u+=P),P=i>u?0:u-i>>>0,i>>>=0;for(var L=j(P);++d<P;)L[d]=e[d+i];return L}function Bl(e,i){var u;return Li(e,function(d,P,L){return u=i(d,P,L),!u}),!!u}function Ms(e,i,u){var d=0,P=e==null?d:e.length;if(typeof i=="number"&&i===i&&P<=rr){for(;d<P;){var L=d+P>>>1,q=e[L];q!==null&&!Cn(q)&&(u?q<=i:q<i)?d=L+1:P=L}return P}return Ba(e,i,vn,u)}function Ba(e,i,u,d){var P=0,L=e==null?0:e.length;if(L===0)return 0;i=u(i);for(var q=i!==i,V=i===null,Y=Cn(i),st=i===T;P<L;){var at=Cs((P+L)/2),ht=u(e[at]),At=ht!==T,Rt=ht===null,qt=ht===ht,jt=Cn(ht);if(q)var Wt=d||qt;else st?Wt=qt&&(d||At):V?Wt=qt&&At&&(d||!Rt):Y?Wt=qt&&At&&!Rt&&(d||!jt):Rt||jt?Wt=!1:Wt=d?ht<=i:ht<i;Wt?P=at+1:L=at}return tn(L,ir)}function $u(e,i){for(var u=-1,d=e.length,P=0,L=[];++u<d;){var q=e[u],V=i?i(q):q;if(!u||!Wn(V,Y)){var Y=V;L[P++]=q===0?0:q}}return L}function ju(e){return typeof e=="number"?e:Cn(e)?De:+e}function Sn(e){if(typeof e=="string")return e;if(Jt(e))return Ce(e,Sn)+"";if(Cn(e))return Lu?Lu.call(e):"";var i=e+"";return i=="0"&&1/e==-Re?"-0":i}function Mi(e,i,u){var d=-1,P=cr,L=e.length,q=!0,V=[],Y=V;if(u)q=!1,P=Wr;else if(L>=ct){var st=i?null:Yl(e);if(st)return Zi(st);q=!1,P=de,Y=new Ji}else Y=i?[]:V;t:for(;++d<L;){var at=e[d],ht=i?i(at):at;if(at=u||at!==0?at:0,q&&ht===ht){for(var At=Y.length;At--;)if(Y[At]===ht)continue t;i&&Y.push(ht),V.push(at)}else P(Y,ht,u)||(Y!==V&&Y.push(ht),V.push(at))}return V}function Da(e,i){return i=Ri(i,e),e=To(e,i),e==null||delete e[Qn(Mn(i))]}function to(e,i,u,d){return is(e,i,u($i(e,i)),d)}function Rs(e,i,u,d){for(var P=e.length,L=d?P:-1;(d?L--:++L<P)&&i(e[L],L,e););return u?Ln(e,d?0:L,d?L+1:P):Ln(e,d?L+1:0,d?P:L)}function eo(e,i){var u=e;return u instanceof se&&(u=u.value()),Ur(i,function(d,P){return P.func.apply(P.thisArg,Zn([d],P.args))},u)}function qa(e,i,u){var d=e.length;if(d<2)return d?Mi(e[0]):[];for(var P=-1,L=j(d);++P<d;)for(var q=e[P],V=-1;++V<d;)V!=P&&(L[P]=ts(L[P]||q,e[V],i,u));return Mi(Xe(L,1),i,u)}function no(e,i,u){for(var d=-1,P=e.length,L=i.length,q={};++d<P;){var V=d<L?i[d]:T;u(q,e[d],V)}return q}function Wa(e){return Fe(e)?e:[]}function Ua(e){return typeof e=="function"?e:vn}function Ri(e,i){return Jt(e)?e:Qa(e,i)?[e]:Mo(he(e))}var Dl=te;function zi(e,i,u){var d=e.length;return u=u===T?d:u,!i&&u>=d?e:Ln(e,i,u)}var io=Af||function(e){return Ue.clearTimeout(e)};function ro(e,i){if(i)return e.slice();var u=e.length,d=Iu?Iu(u):new e.constructor(u);return e.copy(d),d}function Ha(e){var i=new e.constructor(e.byteLength);return new ws(i).set(new ws(e)),i}function ql(e,i){var u=i?Ha(e.buffer):e.buffer;return new e.constructor(u,e.byteOffset,e.byteLength)}function Wl(e){var i=new e.constructor(e.source,pt.exec(e));return i.lastIndex=e.lastIndex,i}function Ul(e){return $r?St($r.call(e)):{}}function so(e,i){var u=i?Ha(e.buffer):e.buffer;return new e.constructor(u,e.byteOffset,e.length)}function ao(e,i){if(e!==i){var u=e!==T,d=e===null,P=e===e,L=Cn(e),q=i!==T,V=i===null,Y=i===i,st=Cn(i);if(!V&&!st&&!L&&e>i||L&&q&&Y&&!V&&!st||d&&q&&Y||!u&&Y||!P)return 1;if(!d&&!L&&!st&&e<i||st&&u&&P&&!d&&!L||V&&u&&P||!q&&P||!Y)return-1}return 0}function Hl(e,i,u){for(var d=-1,P=e.criteria,L=i.criteria,q=P.length,V=u.length;++d<q;){var Y=ao(P[d],L[d]);if(Y){if(d>=V)return Y;var st=u[d];return Y*(st=="desc"?-1:1)}}return e.index-i.index}function uo(e,i,u,d){for(var P=-1,L=e.length,q=u.length,V=-1,Y=i.length,st=Ve(L-q,0),at=j(Y+st),ht=!d;++V<Y;)at[V]=i[V];for(;++P<q;)(ht||P<L)&&(at[u[P]]=e[P]);for(;st--;)at[V++]=e[P++];return at}function oo(e,i,u,d){for(var P=-1,L=e.length,q=-1,V=u.length,Y=-1,st=i.length,at=Ve(L-V,0),ht=j(at+st),At=!d;++P<at;)ht[P]=e[P];for(var Rt=P;++Y<st;)ht[Rt+Y]=i[Y];for(;++q<V;)(At||P<L)&&(ht[Rt+u[q]]=e[P++]);return ht}function dn(e,i){var u=-1,d=e.length;for(i||(i=j(d));++u<d;)i[u]=e[u];return i}function Jn(e,i,u,d){var P=!u;u||(u={});for(var L=-1,q=i.length;++L<q;){var V=i[L],Y=d?d(u[V],e[V],V,u,e):T;Y===T&&(Y=e[V]),P?gi(u,V,Y):jr(u,V,Y)}return u}function Vl(e,i){return Jn(e,Ja(e),i)}function Gl(e,i){return Jn(e,bo(e),i)}function zs(e,i){return function(u,d){var P=Jt(u)?ga:dl,L=i?i():{};return P(u,e,Dt(d,2),L)}}function Ir(e){return te(function(i,u){var d=-1,P=u.length,L=P>1?u[P-1]:T,q=P>2?u[2]:T;for(L=e.length>3&&typeof L=="function"?(P--,L):T,q&&un(u[0],u[1],q)&&(L=P<3?T:L,P=1),i=St(i);++d<P;){var V=u[d];V&&e(i,V,d,L)}return i})}function fo(e,i){return function(u,d){if(u==null)return u;if(!_n(u))return e(u,d);for(var P=u.length,L=i?P:-1,q=St(u);(i?L--:++L<P)&&d(q[L],L,q)!==!1;);return u}}function lo(e){return function(i,u,d){for(var P=-1,L=St(i),q=d(i),V=q.length;V--;){var Y=q[e?V:++P];if(u(L[Y],Y,L)===!1)break}return i}}function Zl(e,i,u){var d=i&Gt,P=rs(e);function L(){var q=this&&this!==Ue&&this instanceof L?P:e;return q.apply(d?u:this,arguments)}return L}function ho(e){return function(i){i=he(i);var u=Ti(i)?sn(i):T,d=u?u[0]:i.charAt(0),P=u?zi(u,1).join(""):i.slice(1);return d[e]()+P}}function Ar(e){return function(i){return Ur(hf(lf(i).replace(aa,"")),e,"")}}function rs(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var u=Cr(e.prototype),d=e.apply(u,i);return Te(d)?d:u}}function Xl(e,i,u){var d=rs(e);function P(){for(var L=arguments.length,q=j(L),V=L,Y=Pr(P);V--;)q[V]=arguments[V];var st=L<3&&q[0]!==Y&&q[L-1]!==Y?[]:Dn(q,Y);if(L-=st.length,L<u)return po(e,i,ks,P.placeholder,T,q,st,T,T,u-L);var at=this&&this!==Ue&&this instanceof P?d:e;return ue(at,this,q)}return P}function co(e){return function(i,u,d){var P=St(i);if(!_n(i)){var L=Dt(u,3);i=Ze(i),u=function(V){return L(P[V],V,P)}}var q=e(i,u,d);return q>-1?P[L?i[q]:q]:T}}function _o(e){return pi(function(i){var u=i.length,d=u,P=On.prototype.thru;for(e&&i.reverse();d--;){var L=i[d];if(typeof L!="function")throw new Yt(Et);if(P&&!q&&Ds(L)=="wrapper")var q=new On([],!0)}for(d=q?d:u;++d<u;){L=i[d];var V=Ds(L),Y=V=="wrapper"?Ka(L):T;Y&&$a(Y[0])&&Y[1]==(Zt|Ht|Mt|ee)&&!Y[4].length&&Y[9]==1?q=q[Ds(Y[0])].apply(q,Y[3]):q=L.length==1&&$a(L)?q[V]():q.thru(L)}return function(){var st=arguments,at=st[0];if(q&&st.length==1&&Jt(at))return q.plant(at).value();for(var ht=0,At=u?i[ht].apply(this,st):at;++ht<u;)At=i[ht].call(this,At);return At}})}function ks(e,i,u,d,P,L,q,V,Y,st){var at=i&Zt,ht=i&Gt,At=i&xt,Rt=i&(Ht|bt),qt=i&Qt,jt=At?T:rs(e);function Wt(){for(var ie=arguments.length,ae=j(ie),In=ie;In--;)ae[In]=arguments[In];if(Rt)var on=Pr(Wt),An=Ee(ae,on);if(d&&(ae=uo(ae,d,P,Rt)),L&&(ae=oo(ae,L,q,Rt)),ie-=An,Rt&&ie<st){var Be=Dn(ae,on);return po(e,i,ks,Wt.placeholder,u,ae,Be,V,Y,st-ie)}var Un=ht?u:this,xi=At?Un[e]:e;return ie=ae.length,V?ae=dh(ae,V):qt&&ie>1&&ae.reverse(),at&&Y<ie&&(ae.length=Y),this&&this!==Ue&&this instanceof Wt&&(xi=jt||rs(xi)),xi.apply(Un,ae)}return Wt}function go(e,i){return function(u,d){return xl(u,e,i(d),{})}}function Ns(e,i){return function(u,d){var P;if(u===T&&d===T)return i;if(u!==T&&(P=u),d!==T){if(P===T)return d;typeof u=="string"||typeof d=="string"?(u=Sn(u),d=Sn(d)):(u=ju(u),d=ju(d)),P=e(u,d)}return P}}function Va(e){return pi(function(i){return i=Ce(i,Nt(Dt())),te(function(u){var d=this;return e(i,function(P){return ue(P,d,u)})})})}function Fs(e,i){i=i===T?" ":Sn(i);var u=i.length;if(u<2)return u?Fa(i,e):i;var d=Fa(i,Ss(e/Oi(i)));return Ti(i)?zi(sn(d),0,e).join(""):d.slice(0,e)}function Kl(e,i,u,d){var P=i&Gt,L=rs(e);function q(){for(var V=-1,Y=arguments.length,st=-1,at=d.length,ht=j(at+Y),At=this&&this!==Ue&&this instanceof q?L:e;++st<at;)ht[st]=d[st];for(;Y--;)ht[st++]=arguments[++V];return ue(At,P?u:this,ht)}return q}function vo(e){return function(i,u,d){return d&&typeof d!="number"&&un(i,u,d)&&(u=d=T),i=yi(i),u===T?(u=i,i=0):u=yi(u),d=d===T?i<u?1:-1:yi(d),Rl(i,u,d,e)}}function Bs(e){return function(i,u){return typeof i=="string"&&typeof u=="string"||(i=Rn(i),u=Rn(u)),e(i,u)}}function po(e,i,u,d,P,L,q,V,Y,st){var at=i&Ht,ht=at?q:T,At=at?T:q,Rt=at?L:T,qt=at?T:L;i|=at?Mt:Ct,i&=~(at?Ct:Mt),i&le||(i&=~(Gt|xt));var jt=[e,i,P,Rt,ht,qt,At,V,Y,st],Wt=u.apply(T,jt);return $a(e)&&Oo(Wt,jt),Wt.placeholder=d,Eo(Wt,e,i)}function Ga(e){var i=tt[e];return function(u,d){if(u=Rn(u),d=d==null?0:tn($t(d),292),d&&Ou(u)){var P=(he(u)+"e").split("e"),L=i(P[0]+"e"+(+P[1]+d));return P=(he(L)+"e").split("e"),+(P[0]+"e"+(+P[1]-d))}return i(u)}}var Yl=br&&1/Zi(new br([,-0]))[1]==Re?function(e){return new br(e)}:du;function mo(e){return function(i){var u=en(i);return u==mn?fi(i):u==oe?Ge(i):He(i,e(i))}}function vi(e,i,u,d,P,L,q,V){var Y=i&xt;if(!Y&&typeof e!="function")throw new Yt(Et);var st=d?d.length:0;if(st||(i&=~(Mt|Ct),d=P=T),q=q===T?q:Ve($t(q),0),V=V===T?V:$t(V),st-=P?P.length:0,i&Ct){var at=d,ht=P;d=P=T}var At=Y?T:Ka(e),Rt=[e,i,u,d,P,at,ht,L,q,V];if(At&&lh(Rt,At),e=Rt[0],i=Rt[1],u=Rt[2],d=Rt[3],P=Rt[4],V=Rt[9]=Rt[9]===T?Y?0:e.length:Ve(Rt[9]-st,0),!V&&i&(Ht|bt)&&(i&=~(Ht|bt)),!i||i==Gt)var qt=Zl(e,i,u);else i==Ht||i==bt?qt=Xl(e,i,V):(i==Mt||i==(Gt|Mt))&&!P.length?qt=Kl(e,i,u,d):qt=ks.apply(T,Rt);var jt=At?Qu:Oo;return Eo(jt(qt,Rt),e,i)}function wo(e,i,u,d){return e===T||Wn(e,Kn[u])&&!_e.call(d,u)?i:e}function yo(e,i,u,d,P,L){return Te(e)&&Te(i)&&(L.set(i,e),Ls(e,i,T,yo,L),L.delete(i)),e}function Jl(e){return us(e)?T:e}function xo(e,i,u,d,P,L){var q=u&Ot,V=e.length,Y=i.length;if(V!=Y&&!(q&&Y>V))return!1;var st=L.get(e),at=L.get(i);if(st&&at)return st==i&&at==e;var ht=-1,At=!0,Rt=u&vt?new Ji:T;for(L.set(e,i),L.set(i,e);++ht<V;){var qt=e[ht],jt=i[ht];if(d)var Wt=q?d(jt,qt,ht,i,e,L):d(qt,jt,ht,e,i,L);if(Wt!==T){if(Wt)continue;At=!1;break}if(Rt){if(!Hr(i,function(ie,ae){if(!de(Rt,ae)&&(qt===ie||P(qt,ie,u,d,L)))return Rt.push(ae)})){At=!1;break}}else if(!(qt===jt||P(qt,jt,u,d,L))){At=!1;break}}return L.delete(e),L.delete(i),At}function Ql(e,i,u,d,P,L,q){switch(u){case r:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case n:return!(e.byteLength!=i.byteLength||!L(new ws(e),new ws(i)));case ti:case me:case bi:return Wn(+e,+i);case we:return e.name==i.name&&e.message==i.message;case Si:case ei:return e==i+"";case mn:var V=fi;case oe:var Y=d&Ot;if(V||(V=Zi),e.size!=i.size&&!Y)return!1;var st=q.get(e);if(st)return st==i;d|=vt,q.set(e,i);var at=xo(V(e),V(i),d,P,L,q);return q.delete(e),at;case Se:if($r)return $r.call(e)==$r.call(i)}return!1}function $l(e,i,u,d,P,L){var q=u&Ot,V=Za(e),Y=V.length,st=Za(i),at=st.length;if(Y!=at&&!q)return!1;for(var ht=Y;ht--;){var At=V[ht];if(!(q?At in i:_e.call(i,At)))return!1}var Rt=L.get(e),qt=L.get(i);if(Rt&&qt)return Rt==i&&qt==e;var jt=!0;L.set(e,i),L.set(i,e);for(var Wt=q;++ht<Y;){At=V[ht];var ie=e[At],ae=i[At];if(d)var In=q?d(ae,ie,At,i,e,L):d(ie,ae,At,e,i,L);if(!(In===T?ie===ae||P(ie,ae,u,d,L):In)){jt=!1;break}Wt||(Wt=At=="constructor")}if(jt&&!Wt){var on=e.constructor,An=i.constructor;on!=An&&"constructor"in e&&"constructor"in i&&!(typeof on=="function"&&on instanceof on&&typeof An=="function"&&An instanceof An)&&(jt=!1)}return L.delete(e),L.delete(i),jt}function pi(e){return tu(Po(e,T,No),e+"")}function Za(e){return qu(e,Ze,Ja)}function Xa(e){return qu(e,gn,bo)}var Ka=Is?function(e){return Is.get(e)}:du;function Ds(e){for(var i=e.name+"",u=Sr[i],d=_e.call(Sr,i)?u.length:0;d--;){var P=u[d],L=P.func;if(L==null||L==e)return P.name}return i}function Pr(e){var i=_e.call(E,"placeholder")?E:e;return i.placeholder}function Dt(){var e=E.iteratee||hu;return e=e===hu?Hu:e,arguments.length?e(arguments[0],arguments[1]):e}function qs(e,i){var u=e.__data__;return ah(i)?u[typeof i=="string"?"string":"hash"]:u.map}function Ya(e){for(var i=Ze(e),u=i.length;u--;){var d=i[u],P=e[d];i[u]=[d,P,Io(P)]}return i}function ji(e,i){var u=Gr(e,i);return Uu(u)?u:T}function jl(e){var i=_e.call(e,Ki),u=e[Ki];try{e[Ki]=T;var d=!0}catch{}var P=ps.call(e);return d&&(i?e[Ki]=u:delete e[Ki]),P}var Ja=Sa?function(e){return e==null?[]:(e=St(e),Gn(Sa(e),function(i){return Pu.call(e,i)}))}:_u,bo=Sa?function(e){for(var i=[];e;)Zn(i,Ja(e)),e=ys(e);return i}:_u,en=an;(Ca&&en(new Ca(new ArrayBuffer(1)))!=r||Yr&&en(new Yr)!=mn||Ia&&en(Ia.resolve())!=os||br&&en(new br)!=oe||Jr&&en(new Jr)!=Xt)&&(en=function(e){var i=an(e),u=i==zn?e.constructor:T,d=u?tr(u):"";if(d)switch(d){case kf:return r;case Nf:return mn;case Ff:return os;case Bf:return oe;case Df:return Xt}return i});function th(e,i,u){for(var d=-1,P=u.length;++d<P;){var L=u[d],q=L.size;switch(L.type){case"drop":e+=q;break;case"dropRight":i-=q;break;case"take":i=tn(i,e+q);break;case"takeRight":e=Ve(e,i-q);break}}return{start:e,end:i}}function eh(e){var i=e.match(H);return i?i[1].split(G):[]}function So(e,i,u){i=Ri(i,e);for(var d=-1,P=i.length,L=!1;++d<P;){var q=Qn(i[d]);if(!(L=e!=null&&u(e,q)))break;e=e[q]}return L||++d!=P?L:(P=e==null?0:e.length,!!P&&Xs(P)&&mi(q,P)&&(Jt(e)||er(e)))}function nh(e){var i=e.length,u=new e.constructor(i);return i&&typeof e[0]=="string"&&_e.call(e,"index")&&(u.index=e.index,u.input=e.input),u}function Co(e){return typeof e.constructor=="function"&&!ss(e)?Cr(ys(e)):{}}function ih(e,i,u){var d=e.constructor;switch(i){case n:return Ha(e);case ti:case me:return new d(+e);case r:return ql(e,u);case s:case a:case o:case l:case f:case h:case c:case p:case w:return so(e,u);case mn:return new d;case bi:case ei:return new d(e);case Si:return Wl(e);case oe:return new d;case Se:return Ul(e)}}function rh(e,i){var u=i.length;if(!u)return e;var d=u-1;return i[d]=(u>1?"& ":"")+i[d],i=i.join(u>2?", ":" "),e.replace(U,`{
/* [wrapped with `+i+`] */
`)}function sh(e){return Jt(e)||er(e)||!!(Tu&&e&&e[Tu])}function mi(e,i){var u=typeof e;return i=i??xe,!!i&&(u=="number"||u!="symbol"&&Tt.test(e))&&e>-1&&e%1==0&&e<i}function un(e,i,u){if(!Te(u))return!1;var d=typeof i;return(d=="number"?_n(u)&&mi(i,u.length):d=="string"&&i in u)?Wn(u[i],e):!1}function Qa(e,i){if(Jt(e))return!1;var u=typeof e;return u=="number"||u=="symbol"||u=="boolean"||e==null||Cn(e)?!0:S.test(e)||!O.test(e)||i!=null&&e in St(i)}function ah(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function $a(e){var i=Ds(e),u=E[i];if(typeof u!="function"||!(i in se.prototype))return!1;if(e===u)return!0;var d=Ka(u);return!!d&&e===d[0]}function uh(e){return!!Cu&&Cu in e}var oh=ci?wi:gu;function ss(e){var i=e&&e.constructor,u=typeof i=="function"&&i.prototype||Kn;return e===u}function Io(e){return e===e&&!Te(e)}function Ao(e,i){return function(u){return u==null?!1:u[e]===i&&(i!==T||e in St(u))}}function fh(e){var i=Gs(e,function(d){return u.size===it&&u.clear(),d}),u=i.cache;return i}function lh(e,i){var u=e[1],d=i[1],P=u|d,L=P<(Gt|xt|Zt),q=d==Zt&&u==Ht||d==Zt&&u==ee&&e[7].length<=i[8]||d==(Zt|ee)&&i[7].length<=i[8]&&u==Ht;if(!(L||q))return e;d&Gt&&(e[2]=i[2],P|=u&Gt?0:le);var V=i[3];if(V){var Y=e[3];e[3]=Y?uo(Y,V,i[4]):V,e[4]=Y?Dn(e[3],ft):i[4]}return V=i[5],V&&(Y=e[5],e[5]=Y?oo(Y,V,i[6]):V,e[6]=Y?Dn(e[5],ft):i[6]),V=i[7],V&&(e[7]=V),d&Zt&&(e[8]=e[8]==null?i[8]:tn(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=P,e}function hh(e){var i=[];if(e!=null)for(var u in St(e))i.push(u);return i}function ch(e){return ps.call(e)}function Po(e,i,u){return i=Ve(i===T?e.length-1:i,0),function(){for(var d=arguments,P=-1,L=Ve(d.length-i,0),q=j(L);++P<L;)q[P]=d[i+P];P=-1;for(var V=j(i+1);++P<i;)V[P]=d[P];return V[i]=u(q),ue(e,this,V)}}function To(e,i){return i.length<2?e:$i(e,Ln(i,0,-1))}function dh(e,i){for(var u=e.length,d=tn(i.length,u),P=dn(e);d--;){var L=i[d];e[d]=mi(L,u)?P[L]:T}return e}function ja(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Oo=Lo(Qu),as=Tf||function(e,i){return Ue.setTimeout(e,i)},tu=Lo(Nl);function Eo(e,i,u){var d=i+"";return tu(e,rh(d,_h(eh(d),u)))}function Lo(e){var i=0,u=0;return function(){var d=Mf(),P=pe-(d-u);if(u=d,P>0){if(++i>=Ie)return arguments[0]}else i=0;return e.apply(T,arguments)}}function Ws(e,i){var u=-1,d=e.length,P=d-1;for(i=i===T?d:i;++u<i;){var L=Na(u,P),q=e[L];e[L]=e[u],e[u]=q}return e.length=i,e}var Mo=fh(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(R,function(u,d,P,L){i.push(P?L.replace(ot,"$1"):d||u)}),i});function Qn(e){if(typeof e=="string"||Cn(e))return e;var i=e+"";return i=="0"&&1/e==-Re?"-0":i}function tr(e){if(e!=null){try{return xr.call(e)}catch{}try{return e+""}catch{}}return""}function _h(e,i){return $e(ia,function(u){var d="_."+u[0];i&u[1]&&!cr(e,d)&&e.push(d)}),e.sort()}function Ro(e){if(e instanceof se)return e.clone();var i=new On(e.__wrapped__,e.__chain__);return i.__actions__=dn(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function gh(e,i,u){(u?un(e,i,u):i===T)?i=1:i=Ve($t(i),0);var d=e==null?0:e.length;if(!d||i<1)return[];for(var P=0,L=0,q=j(Ss(d/i));P<d;)q[L++]=Ln(e,P,P+=i);return q}function vh(e){for(var i=-1,u=e==null?0:e.length,d=0,P=[];++i<u;){var L=e[i];L&&(P[d++]=L)}return P}function ph(){var e=arguments.length;if(!e)return[];for(var i=j(e-1),u=arguments[0],d=e;d--;)i[d-1]=arguments[d];return Zn(Jt(u)?dn(u):[u],Xe(i,1))}var mh=te(function(e,i){return Fe(e)?ts(e,Xe(i,1,Fe,!0)):[]}),wh=te(function(e,i){var u=Mn(i);return Fe(u)&&(u=T),Fe(e)?ts(e,Xe(i,1,Fe,!0),Dt(u,2)):[]}),yh=te(function(e,i){var u=Mn(i);return Fe(u)&&(u=T),Fe(e)?ts(e,Xe(i,1,Fe,!0),T,u):[]});function xh(e,i,u){var d=e==null?0:e.length;return d?(i=u||i===T?1:$t(i),Ln(e,i<0?0:i,d)):[]}function bh(e,i,u){var d=e==null?0:e.length;return d?(i=u||i===T?1:$t(i),i=d-i,Ln(e,0,i<0?0:i)):[]}function Sh(e,i){return e&&e.length?Rs(e,Dt(i,3),!0,!0):[]}function Ch(e,i){return e&&e.length?Rs(e,Dt(i,3),!0):[]}function Ih(e,i,u,d){var P=e==null?0:e.length;return P?(u&&typeof u!="number"&&un(e,i,u)&&(u=0,d=P),pl(e,i,u,d)):[]}function zo(e,i,u){var d=e==null?0:e.length;if(!d)return-1;var P=u==null?0:$t(u);return P<0&&(P=Ve(d+P,0)),dr(e,Dt(i,3),P)}function ko(e,i,u){var d=e==null?0:e.length;if(!d)return-1;var P=d-1;return u!==T&&(P=$t(u),P=u<0?Ve(d+P,0):tn(P,d-1)),dr(e,Dt(i,3),P,!0)}function No(e){var i=e==null?0:e.length;return i?Xe(e,1):[]}function Ah(e){var i=e==null?0:e.length;return i?Xe(e,Re):[]}function Ph(e,i){var u=e==null?0:e.length;return u?(i=i===T?1:$t(i),Xe(e,i)):[]}function Th(e){for(var i=-1,u=e==null?0:e.length,d={};++i<u;){var P=e[i];d[P[0]]=P[1]}return d}function Fo(e){return e&&e.length?e[0]:T}function Oh(e,i,u){var d=e==null?0:e.length;if(!d)return-1;var P=u==null?0:$t(u);return P<0&&(P=Ve(d+P,0)),ui(e,i,P)}function Eh(e){var i=e==null?0:e.length;return i?Ln(e,0,-1):[]}var Lh=te(function(e){var i=Ce(e,Wa);return i.length&&i[0]===e[0]?La(i):[]}),Mh=te(function(e){var i=Mn(e),u=Ce(e,Wa);return i===Mn(u)?i=T:u.pop(),u.length&&u[0]===e[0]?La(u,Dt(i,2)):[]}),Rh=te(function(e){var i=Mn(e),u=Ce(e,Wa);return i=typeof i=="function"?i:T,i&&u.pop(),u.length&&u[0]===e[0]?La(u,T,i):[]});function zh(e,i){return e==null?"":Ef.call(e,i)}function Mn(e){var i=e==null?0:e.length;return i?e[i-1]:T}function kh(e,i,u){var d=e==null?0:e.length;if(!d)return-1;var P=d;return u!==T&&(P=$t(u),P=P<0?Ve(d+P,0):tn(P,d-1)),i===i?wa(e,i,P):dr(e,Ui,P,!0)}function Nh(e,i){return e&&e.length?Xu(e,$t(i)):T}var Fh=te(Bo);function Bo(e,i){return e&&e.length&&i&&i.length?ka(e,i):e}function Bh(e,i,u){return e&&e.length&&i&&i.length?ka(e,i,Dt(u,2)):e}function Dh(e,i,u){return e&&e.length&&i&&i.length?ka(e,i,T,u):e}var qh=pi(function(e,i){var u=e==null?0:e.length,d=Pa(e,i);return Ju(e,Ce(i,function(P){return mi(P,u)?+P:P}).sort(ao)),d});function Wh(e,i){var u=[];if(!(e&&e.length))return u;var d=-1,P=[],L=e.length;for(i=Dt(i,3);++d<L;){var q=e[d];i(q,d,e)&&(u.push(q),P.push(d))}return Ju(e,P),u}function eu(e){return e==null?e:zf.call(e)}function Uh(e,i,u){var d=e==null?0:e.length;return d?(u&&typeof u!="number"&&un(e,i,u)?(i=0,u=d):(i=i==null?0:$t(i),u=u===T?d:$t(u)),Ln(e,i,u)):[]}function Hh(e,i){return Ms(e,i)}function Vh(e,i,u){return Ba(e,i,Dt(u,2))}function Gh(e,i){var u=e==null?0:e.length;if(u){var d=Ms(e,i);if(d<u&&Wn(e[d],i))return d}return-1}function Zh(e,i){return Ms(e,i,!0)}function Xh(e,i,u){return Ba(e,i,Dt(u,2),!0)}function Kh(e,i){var u=e==null?0:e.length;if(u){var d=Ms(e,i,!0)-1;if(Wn(e[d],i))return d}return-1}function Yh(e){return e&&e.length?$u(e):[]}function Jh(e,i){return e&&e.length?$u(e,Dt(i,2)):[]}function Qh(e){var i=e==null?0:e.length;return i?Ln(e,1,i):[]}function $h(e,i,u){return e&&e.length?(i=u||i===T?1:$t(i),Ln(e,0,i<0?0:i)):[]}function jh(e,i,u){var d=e==null?0:e.length;return d?(i=u||i===T?1:$t(i),i=d-i,Ln(e,i<0?0:i,d)):[]}function tc(e,i){return e&&e.length?Rs(e,Dt(i,3),!1,!0):[]}function ec(e,i){return e&&e.length?Rs(e,Dt(i,3)):[]}var nc=te(function(e){return Mi(Xe(e,1,Fe,!0))}),ic=te(function(e){var i=Mn(e);return Fe(i)&&(i=T),Mi(Xe(e,1,Fe,!0),Dt(i,2))}),rc=te(function(e){var i=Mn(e);return i=typeof i=="function"?i:T,Mi(Xe(e,1,Fe,!0),T,i)});function sc(e){return e&&e.length?Mi(e):[]}function ac(e,i){return e&&e.length?Mi(e,Dt(i,2)):[]}function uc(e,i){return i=typeof i=="function"?i:T,e&&e.length?Mi(e,T,i):[]}function nu(e){if(!(e&&e.length))return[];var i=0;return e=Gn(e,function(u){if(Fe(u))return i=Ve(u.length,i),!0}),pr(i,function(u){return Ce(e,_r(u))})}function Do(e,i){if(!(e&&e.length))return[];var u=nu(e);return i==null?u:Ce(u,function(d){return ue(i,T,d)})}var oc=te(function(e,i){return Fe(e)?ts(e,i):[]}),fc=te(function(e){return qa(Gn(e,Fe))}),lc=te(function(e){var i=Mn(e);return Fe(i)&&(i=T),qa(Gn(e,Fe),Dt(i,2))}),hc=te(function(e){var i=Mn(e);return i=typeof i=="function"?i:T,qa(Gn(e,Fe),T,i)}),cc=te(nu);function dc(e,i){return no(e||[],i||[],jr)}function _c(e,i){return no(e||[],i||[],is)}var gc=te(function(e){var i=e.length,u=i>1?e[i-1]:T;return u=typeof u=="function"?(e.pop(),u):T,Do(e,u)});function qo(e){var i=E(e);return i.__chain__=!0,i}function vc(e,i){return i(e),e}function Us(e,i){return i(e)}var pc=pi(function(e){var i=e.length,u=i?e[0]:0,d=this.__wrapped__,P=function(L){return Pa(L,e)};return i>1||this.__actions__.length||!(d instanceof se)||!mi(u)?this.thru(P):(d=d.slice(u,+u+(i?1:0)),d.__actions__.push({func:Us,args:[P],thisArg:T}),new On(d,this.__chain__).thru(function(L){return i&&!L.length&&L.push(T),L}))});function mc(){return qo(this)}function wc(){return new On(this.value(),this.__chain__)}function yc(){this.__values__===T&&(this.__values__=tf(this.value()));var e=this.__index__>=this.__values__.length,i=e?T:this.__values__[this.__index__++];return{done:e,value:i}}function xc(){return this}function bc(e){for(var i,u=this;u instanceof Ps;){var d=Ro(u);d.__index__=0,d.__values__=T,i?P.__wrapped__=d:i=d;var P=d;u=u.__wrapped__}return P.__wrapped__=e,i}function Sc(){var e=this.__wrapped__;if(e instanceof se){var i=e;return this.__actions__.length&&(i=new se(this)),i=i.reverse(),i.__actions__.push({func:Us,args:[eu],thisArg:T}),new On(i,this.__chain__)}return this.thru(eu)}function Cc(){return eo(this.__wrapped__,this.__actions__)}var Ic=zs(function(e,i,u){_e.call(e,u)?++e[u]:gi(e,u,1)});function Ac(e,i,u){var d=Jt(e)?gs:vl;return u&&un(e,i,u)&&(i=T),d(e,Dt(i,3))}function Pc(e,i){var u=Jt(e)?Gn:Bu;return u(e,Dt(i,3))}var Tc=co(zo),Oc=co(ko);function Ec(e,i){return Xe(Hs(e,i),1)}function Lc(e,i){return Xe(Hs(e,i),Re)}function Mc(e,i,u){return u=u===T?1:$t(u),Xe(Hs(e,i),u)}function Wo(e,i){var u=Jt(e)?$e:Li;return u(e,Dt(i,3))}function Uo(e,i){var u=Jt(e)?Ai:Fu;return u(e,Dt(i,3))}var Rc=zs(function(e,i,u){_e.call(e,u)?e[u].push(i):gi(e,u,[i])});function zc(e,i,u,d){e=_n(e)?e:Or(e),u=u&&!d?$t(u):0;var P=e.length;return u<0&&(u=Ve(P+u,0)),Ks(e)?u<=P&&e.indexOf(i,u)>-1:!!P&&ui(e,i,u)>-1}var kc=te(function(e,i,u){var d=-1,P=typeof i=="function",L=_n(e)?j(e.length):[];return Li(e,function(q){L[++d]=P?ue(i,q,u):es(q,i,u)}),L}),Nc=zs(function(e,i,u){gi(e,u,i)});function Hs(e,i){var u=Jt(e)?Ce:Vu;return u(e,Dt(i,3))}function Fc(e,i,u,d){return e==null?[]:(Jt(i)||(i=i==null?[]:[i]),u=d?T:u,Jt(u)||(u=u==null?[]:[u]),Ku(e,i,u))}var Bc=zs(function(e,i,u){e[u?0:1].push(i)},function(){return[[],[]]});function Dc(e,i,u){var d=Jt(e)?Ur:re,P=arguments.length<3;return d(e,Dt(i,4),u,P,Li)}function qc(e,i,u){var d=Jt(e)?va:re,P=arguments.length<3;return d(e,Dt(i,4),u,P,Fu)}function Wc(e,i){var u=Jt(e)?Gn:Bu;return u(e,Zs(Dt(i,3)))}function Uc(e){var i=Jt(e)?Ru:zl;return i(e)}function Hc(e,i,u){(u?un(e,i,u):i===T)?i=1:i=$t(i);var d=Jt(e)?hl:kl;return d(e,i)}function Vc(e){var i=Jt(e)?cl:Fl;return i(e)}function Gc(e){if(e==null)return 0;if(_n(e))return Ks(e)?Oi(e):e.length;var i=en(e);return i==mn||i==oe?e.size:Ra(e).length}function Zc(e,i,u){var d=Jt(e)?Hr:Bl;return u&&un(e,i,u)&&(i=T),d(e,Dt(i,3))}var Xc=te(function(e,i){if(e==null)return[];var u=i.length;return u>1&&un(e,i[0],i[1])?i=[]:u>2&&un(i[0],i[1],i[2])&&(i=[i[0]]),Ku(e,Xe(i,1),[])}),Vs=Pf||function(){return Ue.Date.now()};function Kc(e,i){if(typeof i!="function")throw new Yt(Et);return e=$t(e),function(){if(--e<1)return i.apply(this,arguments)}}function Ho(e,i,u){return i=u?T:i,i=e&&i==null?e.length:i,vi(e,Zt,T,T,T,T,i)}function Vo(e,i){var u;if(typeof i!="function")throw new Yt(Et);return e=$t(e),function(){return--e>0&&(u=i.apply(this,arguments)),e<=1&&(i=T),u}}var iu=te(function(e,i,u){var d=Gt;if(u.length){var P=Dn(u,Pr(iu));d|=Mt}return vi(e,d,i,u,P)}),Go=te(function(e,i,u){var d=Gt|xt;if(u.length){var P=Dn(u,Pr(Go));d|=Mt}return vi(i,d,e,u,P)});function Zo(e,i,u){i=u?T:i;var d=vi(e,Ht,T,T,T,T,T,i);return d.placeholder=Zo.placeholder,d}function Xo(e,i,u){i=u?T:i;var d=vi(e,bt,T,T,T,T,T,i);return d.placeholder=Xo.placeholder,d}function Ko(e,i,u){var d,P,L,q,V,Y,st=0,at=!1,ht=!1,At=!0;if(typeof e!="function")throw new Yt(Et);i=Rn(i)||0,Te(u)&&(at=!!u.leading,ht="maxWait"in u,L=ht?Ve(Rn(u.maxWait)||0,i):L,At="trailing"in u?!!u.trailing:At);function Rt(Be){var Un=d,xi=P;return d=P=T,st=Be,q=e.apply(xi,Un),q}function qt(Be){return st=Be,V=as(ie,i),at?Rt(Be):q}function jt(Be){var Un=Be-Y,xi=Be-st,_f=i-Un;return ht?tn(_f,L-xi):_f}function Wt(Be){var Un=Be-Y,xi=Be-st;return Y===T||Un>=i||Un<0||ht&&xi>=L}function ie(){var Be=Vs();if(Wt(Be))return ae(Be);V=as(ie,jt(Be))}function ae(Be){return V=T,At&&d?Rt(Be):(d=P=T,q)}function In(){V!==T&&io(V),st=0,d=Y=P=V=T}function on(){return V===T?q:ae(Vs())}function An(){var Be=Vs(),Un=Wt(Be);if(d=arguments,P=this,Y=Be,Un){if(V===T)return qt(Y);if(ht)return io(V),V=as(ie,i),Rt(Y)}return V===T&&(V=as(ie,i)),q}return An.cancel=In,An.flush=on,An}var Yc=te(function(e,i){return Nu(e,1,i)}),Jc=te(function(e,i,u){return Nu(e,Rn(i)||0,u)});function Qc(e){return vi(e,Qt)}function Gs(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Yt(Et);var u=function(){var d=arguments,P=i?i.apply(this,d):d[0],L=u.cache;if(L.has(P))return L.get(P);var q=e.apply(this,d);return u.cache=L.set(P,q)||L,q};return u.cache=new(Gs.Cache||_i),u}Gs.Cache=_i;function Zs(e){if(typeof e!="function")throw new Yt(Et);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function $c(e){return Vo(2,e)}var jc=Dl(function(e,i){i=i.length==1&&Jt(i[0])?Ce(i[0],Nt(Dt())):Ce(Xe(i,1),Nt(Dt()));var u=i.length;return te(function(d){for(var P=-1,L=tn(d.length,u);++P<L;)d[P]=i[P].call(this,d[P]);return ue(e,this,d)})}),ru=te(function(e,i){var u=Dn(i,Pr(ru));return vi(e,Mt,T,i,u)}),Yo=te(function(e,i){var u=Dn(i,Pr(Yo));return vi(e,Ct,T,i,u)}),td=pi(function(e,i){return vi(e,ee,T,T,T,i)});function ed(e,i){if(typeof e!="function")throw new Yt(Et);return i=i===T?i:$t(i),te(e,i)}function nd(e,i){if(typeof e!="function")throw new Yt(Et);return i=i==null?0:Ve($t(i),0),te(function(u){var d=u[i],P=zi(u,0,i);return d&&Zn(P,d),ue(e,this,P)})}function id(e,i,u){var d=!0,P=!0;if(typeof e!="function")throw new Yt(Et);return Te(u)&&(d="leading"in u?!!u.leading:d,P="trailing"in u?!!u.trailing:P),Ko(e,i,{leading:d,maxWait:i,trailing:P})}function rd(e){return Ho(e,1)}function sd(e,i){return ru(Ua(i),e)}function ad(){if(!arguments.length)return[];var e=arguments[0];return Jt(e)?e:[e]}function ud(e){return En(e,k)}function od(e,i){return i=typeof i=="function"?i:T,En(e,k,i)}function fd(e){return En(e,J|k)}function ld(e,i){return i=typeof i=="function"?i:T,En(e,J|k,i)}function hd(e,i){return i==null||ku(e,i,Ze(i))}function Wn(e,i){return e===i||e!==e&&i!==i}var cd=Bs(Ea),dd=Bs(function(e,i){return e>=i}),er=Wu(function(){return arguments}())?Wu:function(e){return Le(e)&&_e.call(e,"callee")&&!Pu.call(e,"callee")},Jt=j.isArray,_d=qi?Nt(qi):bl;function _n(e){return e!=null&&Xs(e.length)&&!wi(e)}function Fe(e){return Le(e)&&_n(e)}function gd(e){return e===!0||e===!1||Le(e)&&an(e)==ti}var ki=Of||gu,vd=si?Nt(si):Sl;function pd(e){return Le(e)&&e.nodeType===1&&!us(e)}function md(e){if(e==null)return!0;if(_n(e)&&(Jt(e)||typeof e=="string"||typeof e.splice=="function"||ki(e)||Tr(e)||er(e)))return!e.length;var i=en(e);if(i==mn||i==oe)return!e.size;if(ss(e))return!Ra(e).length;for(var u in e)if(_e.call(e,u))return!1;return!0}function wd(e,i){return ns(e,i)}function yd(e,i,u){u=typeof u=="function"?u:T;var d=u?u(e,i):T;return d===T?ns(e,i,T,u):!!d}function su(e){if(!Le(e))return!1;var i=an(e);return i==we||i==ze||typeof e.message=="string"&&typeof e.name=="string"&&!us(e)}function xd(e){return typeof e=="number"&&Ou(e)}function wi(e){if(!Te(e))return!1;var i=an(e);return i==sr||i==Ni||i==Er||i==sa}function Jo(e){return typeof e=="number"&&e==$t(e)}function Xs(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=xe}function Te(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function Le(e){return e!=null&&typeof e=="object"}var Qo=Wi?Nt(Wi):Il;function bd(e,i){return e===i||Ma(e,i,Ya(i))}function Sd(e,i,u){return u=typeof u=="function"?u:T,Ma(e,i,Ya(i),u)}function Cd(e){return $o(e)&&e!=+e}function Id(e){if(oh(e))throw new D(z);return Uu(e)}function Ad(e){return e===null}function Pd(e){return e==null}function $o(e){return typeof e=="number"||Le(e)&&an(e)==bi}function us(e){if(!Le(e)||an(e)!=zn)return!1;var i=ys(e);if(i===null)return!0;var u=_e.call(i,"constructor")&&i.constructor;return typeof u=="function"&&u instanceof u&&xr.call(u)==Sf}var au=Dr?Nt(Dr):Al;function Td(e){return Jo(e)&&e>=-xe&&e<=xe}var jo=Vn?Nt(Vn):Pl;function Ks(e){return typeof e=="string"||!Jt(e)&&Le(e)&&an(e)==ei}function Cn(e){return typeof e=="symbol"||Le(e)&&an(e)==Se}var Tr=qr?Nt(qr):Tl;function Od(e){return e===T}function Ed(e){return Le(e)&&en(e)==Xt}function Ld(e){return Le(e)&&an(e)==t}var Md=Bs(za),Rd=Bs(function(e,i){return e<=i});function tf(e){if(!e)return[];if(_n(e))return Ks(e)?sn(e):dn(e);if(Kr&&e[Kr])return Gi(e[Kr]());var i=en(e),u=i==mn?fi:i==oe?Zi:Or;return u(e)}function yi(e){if(!e)return e===0?e:0;if(e=Rn(e),e===Re||e===-Re){var i=e<0?-1:1;return i*ne}return e===e?e:0}function $t(e){var i=yi(e),u=i%1;return i===i?u?i-u:i:0}function ef(e){return e?Qi($t(e),0,Ke):0}function Rn(e){if(typeof e=="number")return e;if(Cn(e))return De;if(Te(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Te(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Fn(e);var u=et.test(e);return u||yt.test(e)?_a(e.slice(2),u?2:8):It.test(e)?De:+e}function nf(e){return Jn(e,gn(e))}function zd(e){return e?Qi($t(e),-xe,xe):e===0?e:0}function he(e){return e==null?"":Sn(e)}var kd=Ir(function(e,i){if(ss(i)||_n(i)){Jn(i,Ze(i),e);return}for(var u in i)_e.call(i,u)&&jr(e,u,i[u])}),rf=Ir(function(e,i){Jn(i,gn(i),e)}),Ys=Ir(function(e,i,u,d){Jn(i,gn(i),e,d)}),Nd=Ir(function(e,i,u,d){Jn(i,Ze(i),e,d)}),Fd=pi(Pa);function Bd(e,i){var u=Cr(e);return i==null?u:zu(u,i)}var Dd=te(function(e,i){e=St(e);var u=-1,d=i.length,P=d>2?i[2]:T;for(P&&un(i[0],i[1],P)&&(d=1);++u<d;)for(var L=i[u],q=gn(L),V=-1,Y=q.length;++V<Y;){var st=q[V],at=e[st];(at===T||Wn(at,Kn[st])&&!_e.call(e,st))&&(e[st]=L[st])}return e}),qd=te(function(e){return e.push(T,yo),ue(sf,T,e)});function Wd(e,i){return Pi(e,Dt(i,3),Yn)}function Ud(e,i){return Pi(e,Dt(i,3),Oa)}function Hd(e,i){return e==null?e:Ta(e,Dt(i,3),gn)}function Vd(e,i){return e==null?e:Du(e,Dt(i,3),gn)}function Gd(e,i){return e&&Yn(e,Dt(i,3))}function Zd(e,i){return e&&Oa(e,Dt(i,3))}function Xd(e){return e==null?[]:Es(e,Ze(e))}function Kd(e){return e==null?[]:Es(e,gn(e))}function uu(e,i,u){var d=e==null?T:$i(e,i);return d===T?u:d}function Yd(e,i){return e!=null&&So(e,i,ml)}function ou(e,i){return e!=null&&So(e,i,wl)}var Jd=go(function(e,i,u){i!=null&&typeof i.toString!="function"&&(i=ps.call(i)),e[i]=u},lu(vn)),Qd=go(function(e,i,u){i!=null&&typeof i.toString!="function"&&(i=ps.call(i)),_e.call(e,i)?e[i].push(u):e[i]=[u]},Dt),$d=te(es);function Ze(e){return _n(e)?Mu(e):Ra(e)}function gn(e){return _n(e)?Mu(e,!0):Ol(e)}function jd(e,i){var u={};return i=Dt(i,3),Yn(e,function(d,P,L){gi(u,i(d,P,L),d)}),u}function t_(e,i){var u={};return i=Dt(i,3),Yn(e,function(d,P,L){gi(u,P,i(d,P,L))}),u}var e_=Ir(function(e,i,u){Ls(e,i,u)}),sf=Ir(function(e,i,u,d){Ls(e,i,u,d)}),n_=pi(function(e,i){var u={};if(e==null)return u;var d=!1;i=Ce(i,function(L){return L=Ri(L,e),d||(d=L.length>1),L}),Jn(e,Xa(e),u),d&&(u=En(u,J|ut|k,Jl));for(var P=i.length;P--;)Da(u,i[P]);return u});function i_(e,i){return af(e,Zs(Dt(i)))}var r_=pi(function(e,i){return e==null?{}:Ll(e,i)});function af(e,i){if(e==null)return{};var u=Ce(Xa(e),function(d){return[d]});return i=Dt(i),Yu(e,u,function(d,P){return i(d,P[0])})}function s_(e,i,u){i=Ri(i,e);var d=-1,P=i.length;for(P||(P=1,e=T);++d<P;){var L=e==null?T:e[Qn(i[d])];L===T&&(d=P,L=u),e=wi(L)?L.call(e):L}return e}function a_(e,i,u){return e==null?e:is(e,i,u)}function u_(e,i,u,d){return d=typeof d=="function"?d:T,e==null?e:is(e,i,u,d)}var uf=mo(Ze),of=mo(gn);function o_(e,i,u){var d=Jt(e),P=d||ki(e)||Tr(e);if(i=Dt(i,4),u==null){var L=e&&e.constructor;P?u=d?new L:[]:Te(e)?u=wi(L)?Cr(ys(e)):{}:u={}}return(P?$e:Yn)(e,function(q,V,Y){return i(u,q,V,Y)}),u}function f_(e,i){return e==null?!0:Da(e,i)}function l_(e,i,u){return e==null?e:to(e,i,Ua(u))}function h_(e,i,u,d){return d=typeof d=="function"?d:T,e==null?e:to(e,i,Ua(u),d)}function Or(e){return e==null?[]:Hi(e,Ze(e))}function c_(e){return e==null?[]:Hi(e,gn(e))}function d_(e,i,u){return u===T&&(u=i,i=T),u!==T&&(u=Rn(u),u=u===u?u:0),i!==T&&(i=Rn(i),i=i===i?i:0),Qi(Rn(e),i,u)}function __(e,i,u){return i=yi(i),u===T?(u=i,i=0):u=yi(u),e=Rn(e),yl(e,i,u)}function g_(e,i,u){if(u&&typeof u!="boolean"&&un(e,i,u)&&(i=u=T),u===T&&(typeof i=="boolean"?(u=i,i=T):typeof e=="boolean"&&(u=e,e=T)),e===T&&i===T?(e=0,i=1):(e=yi(e),i===T?(i=e,e=0):i=yi(i)),e>i){var d=e;e=i,i=d}if(u||e%1||i%1){var P=Eu();return tn(e+P*(i-e+da("1e-"+((P+"").length-1))),i)}return Na(e,i)}var v_=Ar(function(e,i,u){return i=i.toLowerCase(),e+(u?ff(i):i)});function ff(e){return fu(he(e).toLowerCase())}function lf(e){return e=he(e),e&&e.replace(Pt,Bn).replace(hs,"")}function p_(e,i,u){e=he(e),i=Sn(i);var d=e.length;u=u===T?d:Qi($t(u),0,d);var P=u;return u-=i.length,u>=0&&e.slice(u,P)==i}function m_(e){return e=he(e),e&&b.test(e)?e.replace(A,mr):e}function w_(e){return e=he(e),e&&B.test(e)?e.replace(F,"\\$&"):e}var y_=Ar(function(e,i,u){return e+(u?"-":"")+i.toLowerCase()}),x_=Ar(function(e,i,u){return e+(u?" ":"")+i.toLowerCase()}),b_=ho("toLowerCase");function S_(e,i,u){e=he(e),i=$t(i);var d=i?Oi(e):0;if(!i||d>=i)return e;var P=(i-d)/2;return Fs(Cs(P),u)+e+Fs(Ss(P),u)}function C_(e,i,u){e=he(e),i=$t(i);var d=i?Oi(e):0;return i&&d<i?e+Fs(i-d,u):e}function I_(e,i,u){e=he(e),i=$t(i);var d=i?Oi(e):0;return i&&d<i?Fs(i-d,u)+e:e}function A_(e,i,u){return u||i==null?i=0:i&&(i=+i),Rf(he(e).replace(W,""),i||0)}function P_(e,i,u){return(u?un(e,i,u):i===T)?i=1:i=$t(i),Fa(he(e),i)}function T_(){var e=arguments,i=he(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var O_=Ar(function(e,i,u){return e+(u?"_":"")+i.toLowerCase()});function E_(e,i,u){return u&&typeof u!="number"&&un(e,i,u)&&(i=u=T),u=u===T?Ke:u>>>0,u?(e=he(e),e&&(typeof i=="string"||i!=null&&!au(i))&&(i=Sn(i),!i&&Ti(e))?zi(sn(e),0,u):e.split(i,u)):[]}var L_=Ar(function(e,i,u){return e+(u?" ":"")+fu(i)});function M_(e,i,u){return e=he(e),u=u==null?0:Qi($t(u),0,e.length),i=Sn(i),e.slice(u,u+i.length)==i}function R_(e,i,u){var d=E.templateSettings;u&&un(e,i,u)&&(i=T),e=he(e),i=Ys({},i,d,wo);var P=Ys({},i.imports,d.imports,wo),L=Ze(P),q=Hi(P,L),V,Y,st=0,at=i.interpolate||zt,ht="__p += '",At=Ft((i.escape||zt).source+"|"+at.source+"|"+(at===C?_t:zt).source+"|"+(i.evaluate||zt).source+"|$","g"),Rt="//# sourceURL="+(_e.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++la+"]")+`
`;e.replace(At,function(Wt,ie,ae,In,on,An){return ae||(ae=In),ht+=e.slice(st,An).replace(kt,ma),ie&&(V=!0,ht+=`' +
__e(`+ie+`) +
'`),on&&(Y=!0,ht+=`';
`+on+`;
__p += '`),ae&&(ht+=`' +
((__t = (`+ae+`)) == null ? '' : __t) +
'`),st=An+Wt.length,Wt}),ht+=`';
`;var qt=_e.call(i,"variable")&&i.variable;if(!qt)ht=`with (obj) {
`+ht+`
}
`;else if($.test(qt))throw new D(lt);ht=(Y?ht.replace(v,""):ht).replace(g,"$1").replace(I,"$1;"),ht="function("+(qt||"obj")+`) {
`+(qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(Y?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ht+`return __p
}`;var jt=cf(function(){return Q(L,Rt+"return "+ht).apply(T,q)});if(jt.source=ht,su(jt))throw jt;return jt}function z_(e){return he(e).toLowerCase()}function k_(e){return he(e).toUpperCase()}function N_(e,i,u){if(e=he(e),e&&(u||i===T))return Fn(e);if(!e||!(i=Sn(i)))return e;var d=sn(e),P=sn(i),L=Vi(d,P),q=Xn(d,P)+1;return zi(d,L,q).join("")}function F_(e,i,u){if(e=he(e),e&&(u||i===T))return e.slice(0,yr(e)+1);if(!e||!(i=Sn(i)))return e;var d=sn(e),P=Xn(d,sn(i))+1;return zi(d,0,P).join("")}function B_(e,i,u){if(e=he(e),e&&(u||i===T))return e.replace(W,"");if(!e||!(i=Sn(i)))return e;var d=sn(e),P=Vi(d,sn(i));return zi(d,P).join("")}function D_(e,i){var u=ve,d=ce;if(Te(i)){var P="separator"in i?i.separator:P;u="length"in i?$t(i.length):u,d="omission"in i?Sn(i.omission):d}e=he(e);var L=e.length;if(Ti(e)){var q=sn(e);L=q.length}if(u>=L)return e;var V=u-Oi(d);if(V<1)return d;var Y=q?zi(q,0,V).join(""):e.slice(0,V);if(P===T)return Y+d;if(q&&(V+=Y.length-V),au(P)){if(e.slice(V).search(P)){var st,at=Y;for(P.global||(P=Ft(P.source,he(pt.exec(P))+"g")),P.lastIndex=0;st=P.exec(at);)var ht=st.index;Y=Y.slice(0,ht===T?V:ht)}}else if(e.indexOf(Sn(P),V)!=V){var At=Y.lastIndexOf(P);At>-1&&(Y=Y.slice(0,At))}return Y+d}function q_(e){return e=he(e),e&&m.test(e)?e.replace(y,ya):e}var W_=Ar(function(e,i,u){return e+(u?" ":"")+i.toUpperCase()}),fu=ho("toUpperCase");function hf(e,i,u){return e=he(e),i=u?T:i,i===T?bn(e)?xa(e):vs(e):e.match(i)||[]}var cf=te(function(e,i){try{return ue(e,T,i)}catch(u){return su(u)?u:new D(u)}}),U_=pi(function(e,i){return $e(i,function(u){u=Qn(u),gi(e,u,iu(e[u],e))}),e});function H_(e){var i=e==null?0:e.length,u=Dt();return e=i?Ce(e,function(d){if(typeof d[1]!="function")throw new Yt(Et);return[u(d[0]),d[1]]}):[],te(function(d){for(var P=-1;++P<i;){var L=e[P];if(ue(L[0],this,d))return ue(L[1],this,d)}})}function V_(e){return gl(En(e,J))}function lu(e){return function(){return e}}function G_(e,i){return e==null||e!==e?i:e}var Z_=_o(),X_=_o(!0);function vn(e){return e}function hu(e){return Hu(typeof e=="function"?e:En(e,J))}function K_(e){return Gu(En(e,J))}function Y_(e,i){return Zu(e,En(i,J))}var J_=te(function(e,i){return function(u){return es(u,e,i)}}),Q_=te(function(e,i){return function(u){return es(e,u,i)}});function cu(e,i,u){var d=Ze(i),P=Es(i,d);u==null&&!(Te(i)&&(P.length||!d.length))&&(u=i,i=e,e=this,P=Es(i,Ze(i)));var L=!(Te(u)&&"chain"in u)||!!u.chain,q=wi(e);return $e(P,function(V){var Y=i[V];e[V]=Y,q&&(e.prototype[V]=function(){var st=this.__chain__;if(L||st){var at=e(this.__wrapped__),ht=at.__actions__=dn(this.__actions__);return ht.push({func:Y,args:arguments,thisArg:e}),at.__chain__=st,at}return Y.apply(e,Zn([this.value()],arguments))})}),e}function $_(){return Ue._===this&&(Ue._=Cf),this}function du(){}function j_(e){return e=$t(e),te(function(i){return Xu(i,e)})}var tg=Va(Ce),eg=Va(gs),ng=Va(Hr);function df(e){return Qa(e)?_r(Qn(e)):Ml(e)}function ig(e){return function(i){return e==null?T:$i(e,i)}}var rg=vo(),sg=vo(!0);function _u(){return[]}function gu(){return!1}function ag(){return{}}function ug(){return""}function og(){return!0}function fg(e,i){if(e=$t(e),e<1||e>xe)return[];var u=Ke,d=tn(e,Ke);i=Dt(i),e-=Ke;for(var P=pr(d,i);++u<e;)i(u);return P}function lg(e){return Jt(e)?Ce(e,Qn):Cn(e)?[e]:dn(Mo(he(e)))}function hg(e){var i=++bf;return he(e)+i}var cg=Ns(function(e,i){return e+i},0),dg=Ga("ceil"),_g=Ns(function(e,i){return e/i},1),gg=Ga("floor");function vg(e){return e&&e.length?Os(e,vn,Ea):T}function pg(e,i){return e&&e.length?Os(e,Dt(i,2),Ea):T}function mg(e){return oi(e,vn)}function wg(e,i){return oi(e,Dt(i,2))}function yg(e){return e&&e.length?Os(e,vn,za):T}function xg(e,i){return e&&e.length?Os(e,Dt(i,2),za):T}var bg=Ns(function(e,i){return e*i},1),Sg=Ga("round"),Cg=Ns(function(e,i){return e-i},0);function Ig(e){return e&&e.length?vr(e,vn):0}function Ag(e,i){return e&&e.length?vr(e,Dt(i,2)):0}return E.after=Kc,E.ary=Ho,E.assign=kd,E.assignIn=rf,E.assignInWith=Ys,E.assignWith=Nd,E.at=Fd,E.before=Vo,E.bind=iu,E.bindAll=U_,E.bindKey=Go,E.castArray=ad,E.chain=qo,E.chunk=gh,E.compact=vh,E.concat=ph,E.cond=H_,E.conforms=V_,E.constant=lu,E.countBy=Ic,E.create=Bd,E.curry=Zo,E.curryRight=Xo,E.debounce=Ko,E.defaults=Dd,E.defaultsDeep=qd,E.defer=Yc,E.delay=Jc,E.difference=mh,E.differenceBy=wh,E.differenceWith=yh,E.drop=xh,E.dropRight=bh,E.dropRightWhile=Sh,E.dropWhile=Ch,E.fill=Ih,E.filter=Pc,E.flatMap=Ec,E.flatMapDeep=Lc,E.flatMapDepth=Mc,E.flatten=No,E.flattenDeep=Ah,E.flattenDepth=Ph,E.flip=Qc,E.flow=Z_,E.flowRight=X_,E.fromPairs=Th,E.functions=Xd,E.functionsIn=Kd,E.groupBy=Rc,E.initial=Eh,E.intersection=Lh,E.intersectionBy=Mh,E.intersectionWith=Rh,E.invert=Jd,E.invertBy=Qd,E.invokeMap=kc,E.iteratee=hu,E.keyBy=Nc,E.keys=Ze,E.keysIn=gn,E.map=Hs,E.mapKeys=jd,E.mapValues=t_,E.matches=K_,E.matchesProperty=Y_,E.memoize=Gs,E.merge=e_,E.mergeWith=sf,E.method=J_,E.methodOf=Q_,E.mixin=cu,E.negate=Zs,E.nthArg=j_,E.omit=n_,E.omitBy=i_,E.once=$c,E.orderBy=Fc,E.over=tg,E.overArgs=jc,E.overEvery=eg,E.overSome=ng,E.partial=ru,E.partialRight=Yo,E.partition=Bc,E.pick=r_,E.pickBy=af,E.property=df,E.propertyOf=ig,E.pull=Fh,E.pullAll=Bo,E.pullAllBy=Bh,E.pullAllWith=Dh,E.pullAt=qh,E.range=rg,E.rangeRight=sg,E.rearg=td,E.reject=Wc,E.remove=Wh,E.rest=ed,E.reverse=eu,E.sampleSize=Hc,E.set=a_,E.setWith=u_,E.shuffle=Vc,E.slice=Uh,E.sortBy=Xc,E.sortedUniq=Yh,E.sortedUniqBy=Jh,E.split=E_,E.spread=nd,E.tail=Qh,E.take=$h,E.takeRight=jh,E.takeRightWhile=tc,E.takeWhile=ec,E.tap=vc,E.throttle=id,E.thru=Us,E.toArray=tf,E.toPairs=uf,E.toPairsIn=of,E.toPath=lg,E.toPlainObject=nf,E.transform=o_,E.unary=rd,E.union=nc,E.unionBy=ic,E.unionWith=rc,E.uniq=sc,E.uniqBy=ac,E.uniqWith=uc,E.unset=f_,E.unzip=nu,E.unzipWith=Do,E.update=l_,E.updateWith=h_,E.values=Or,E.valuesIn=c_,E.without=oc,E.words=hf,E.wrap=sd,E.xor=fc,E.xorBy=lc,E.xorWith=hc,E.zip=cc,E.zipObject=dc,E.zipObjectDeep=_c,E.zipWith=gc,E.entries=uf,E.entriesIn=of,E.extend=rf,E.extendWith=Ys,cu(E,E),E.add=cg,E.attempt=cf,E.camelCase=v_,E.capitalize=ff,E.ceil=dg,E.clamp=d_,E.clone=ud,E.cloneDeep=fd,E.cloneDeepWith=ld,E.cloneWith=od,E.conformsTo=hd,E.deburr=lf,E.defaultTo=G_,E.divide=_g,E.endsWith=p_,E.eq=Wn,E.escape=m_,E.escapeRegExp=w_,E.every=Ac,E.find=Tc,E.findIndex=zo,E.findKey=Wd,E.findLast=Oc,E.findLastIndex=ko,E.findLastKey=Ud,E.floor=gg,E.forEach=Wo,E.forEachRight=Uo,E.forIn=Hd,E.forInRight=Vd,E.forOwn=Gd,E.forOwnRight=Zd,E.get=uu,E.gt=cd,E.gte=dd,E.has=Yd,E.hasIn=ou,E.head=Fo,E.identity=vn,E.includes=zc,E.indexOf=Oh,E.inRange=__,E.invoke=$d,E.isArguments=er,E.isArray=Jt,E.isArrayBuffer=_d,E.isArrayLike=_n,E.isArrayLikeObject=Fe,E.isBoolean=gd,E.isBuffer=ki,E.isDate=vd,E.isElement=pd,E.isEmpty=md,E.isEqual=wd,E.isEqualWith=yd,E.isError=su,E.isFinite=xd,E.isFunction=wi,E.isInteger=Jo,E.isLength=Xs,E.isMap=Qo,E.isMatch=bd,E.isMatchWith=Sd,E.isNaN=Cd,E.isNative=Id,E.isNil=Pd,E.isNull=Ad,E.isNumber=$o,E.isObject=Te,E.isObjectLike=Le,E.isPlainObject=us,E.isRegExp=au,E.isSafeInteger=Td,E.isSet=jo,E.isString=Ks,E.isSymbol=Cn,E.isTypedArray=Tr,E.isUndefined=Od,E.isWeakMap=Ed,E.isWeakSet=Ld,E.join=zh,E.kebabCase=y_,E.last=Mn,E.lastIndexOf=kh,E.lowerCase=x_,E.lowerFirst=b_,E.lt=Md,E.lte=Rd,E.max=vg,E.maxBy=pg,E.mean=mg,E.meanBy=wg,E.min=yg,E.minBy=xg,E.stubArray=_u,E.stubFalse=gu,E.stubObject=ag,E.stubString=ug,E.stubTrue=og,E.multiply=bg,E.nth=Nh,E.noConflict=$_,E.noop=du,E.now=Vs,E.pad=S_,E.padEnd=C_,E.padStart=I_,E.parseInt=A_,E.random=g_,E.reduce=Dc,E.reduceRight=qc,E.repeat=P_,E.replace=T_,E.result=s_,E.round=Sg,E.runInContext=X,E.sample=Uc,E.size=Gc,E.snakeCase=O_,E.some=Zc,E.sortedIndex=Hh,E.sortedIndexBy=Vh,E.sortedIndexOf=Gh,E.sortedLastIndex=Zh,E.sortedLastIndexBy=Xh,E.sortedLastIndexOf=Kh,E.startCase=L_,E.startsWith=M_,E.subtract=Cg,E.sum=Ig,E.sumBy=Ag,E.template=R_,E.times=fg,E.toFinite=yi,E.toInteger=$t,E.toLength=ef,E.toLower=z_,E.toNumber=Rn,E.toSafeInteger=zd,E.toString=he,E.toUpper=k_,E.trim=N_,E.trimEnd=F_,E.trimStart=B_,E.truncate=D_,E.unescape=q_,E.uniqueId=hg,E.upperCase=W_,E.upperFirst=fu,E.each=Wo,E.eachRight=Uo,E.first=Fo,cu(E,function(){var e={};return Yn(E,function(i,u){_e.call(E.prototype,u)||(e[u]=i)}),e}(),{chain:!1}),E.VERSION=wt,$e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){E[e].placeholder=E}),$e(["drop","take"],function(e,i){se.prototype[e]=function(u){u=u===T?1:Ve($t(u),0);var d=this.__filtered__&&!i?new se(this):this.clone();return d.__filtered__?d.__takeCount__=tn(u,d.__takeCount__):d.__views__.push({size:tn(u,Ke),type:e+(d.__dir__<0?"Right":"")}),d},se.prototype[e+"Right"]=function(u){return this.reverse()[e](u).reverse()}}),$e(["filter","map","takeWhile"],function(e,i){var u=i+1,d=u==Lt||u==gt;se.prototype[e]=function(P){var L=this.clone();return L.__iteratees__.push({iteratee:Dt(P,3),type:u}),L.__filtered__=L.__filtered__||d,L}}),$e(["head","last"],function(e,i){var u="take"+(i?"Right":"");se.prototype[e]=function(){return this[u](1).value()[0]}}),$e(["initial","tail"],function(e,i){var u="drop"+(i?"":"Right");se.prototype[e]=function(){return this.__filtered__?new se(this):this[u](1)}}),se.prototype.compact=function(){return this.filter(vn)},se.prototype.find=function(e){return this.filter(e).head()},se.prototype.findLast=function(e){return this.reverse().find(e)},se.prototype.invokeMap=te(function(e,i){return typeof e=="function"?new se(this):this.map(function(u){return es(u,e,i)})}),se.prototype.reject=function(e){return this.filter(Zs(Dt(e)))},se.prototype.slice=function(e,i){e=$t(e);var u=this;return u.__filtered__&&(e>0||i<0)?new se(u):(e<0?u=u.takeRight(-e):e&&(u=u.drop(e)),i!==T&&(i=$t(i),u=i<0?u.dropRight(-i):u.take(i-e)),u)},se.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},se.prototype.toArray=function(){return this.take(Ke)},Yn(se.prototype,function(e,i){var u=/^(?:filter|find|map|reject)|While$/.test(i),d=/^(?:head|last)$/.test(i),P=E[d?"take"+(i=="last"?"Right":""):i],L=d||/^find/.test(i);P&&(E.prototype[i]=function(){var q=this.__wrapped__,V=d?[1]:arguments,Y=q instanceof se,st=V[0],at=Y||Jt(q),ht=function(ie){var ae=P.apply(E,Zn([ie],V));return d&&At?ae[0]:ae};at&&u&&typeof st=="function"&&st.length!=1&&(Y=at=!1);var At=this.__chain__,Rt=!!this.__actions__.length,qt=L&&!At,jt=Y&&!Rt;if(!L&&at){q=jt?q:new se(this);var Wt=e.apply(q,V);return Wt.__actions__.push({func:Us,args:[ht],thisArg:T}),new On(Wt,At)}return qt&&jt?e.apply(this,V):(Wt=this.thru(ht),qt?d?Wt.value()[0]:Wt.value():Wt)})}),$e(["pop","push","shift","sort","splice","unshift"],function(e){var i=je[e],u=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",d=/^(?:pop|shift)$/.test(e);E.prototype[e]=function(){var P=arguments;if(d&&!this.__chain__){var L=this.value();return i.apply(Jt(L)?L:[],P)}return this[u](function(q){return i.apply(Jt(q)?q:[],P)})}}),Yn(se.prototype,function(e,i){var u=E[i];if(u){var d=u.name+"";_e.call(Sr,d)||(Sr[d]=[]),Sr[d].push({name:i,func:u})}}),Sr[ks(T,xt).name]=[{name:"wrapper",func:T}],se.prototype.clone=qf,se.prototype.reverse=Wf,se.prototype.value=Uf,E.prototype.at=pc,E.prototype.chain=mc,E.prototype.commit=wc,E.prototype.next=yc,E.prototype.plant=bc,E.prototype.reverse=Sc,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=Cc,E.prototype.first=E.prototype.head,Kr&&(E.prototype[Kr]=xc),E},li=ba();Hn?((Hn.exports=li)._=li,Br._=li):Ue._=li}).call(Pn)})(ta,ta.exports);var $g=ta.exports;const $n=pu($g);let ea=null;const gf=/(\?.+)/.exec(window.location.href);if(gf){const dt=gf[1];ea=new URLSearchParams(dt).get("title")}const jg=()=>{const dt=document.getElementById("art-title");ea&&(dt.innerText=ea);const mt=document.getElementById("download-cta");mt.onclick=()=>{const wt=window.global.project.exportSVG(),ct=wt,[z,Et]=[+ct.getAttribute("width"),+ct.getAttribute("height")].map(ft=>ft*2);ct.setAttribute("width",`${z}`),ct.setAttribute("height",`${Et}`);const K=new XMLSerializer().serializeToString(wt),it=document.createElement("a");it.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(K)),it.setAttribute("download",`mondrian-${dt.innerText}.svg`),it.style.display="none",document.body.appendChild(it),it.click(),document.body.removeChild(it)}},t0=dt=>{const mt=Me;window.global=mt;const T=6;mt.setup("canvas");const wt={blue:"#4754bd",red:"#e44525",yellow:"#f1d93b",black:"#000"};let ct="";if(dt)ct=dt;else{ct=new Date().valueOf()%999999+"";const J=document.getElementById("art-title");J.innerText=ct}Zg(dt||`${new Date().valueOf()}`,{global:!0});const Et=(J=>{const ut=[],k=[];let Ot=0;return Object.entries(J).forEach(([vt,Gt])=>{ut.push(vt),Ot+=Gt,k.push(Ot)}),vt=>{const Gt=vt*Ot;let xt=-1;for(let le=0;le<k.length;le++)if(Gt<k[le]){xt=le;break}return ut[xt]}})({transparent:60,blue:16,red:13,yellow:13,black:4}),lt=mf(.03,mt,!1),K=wf([.2,.4],mt),it=(J,ut,k=!1)=>{const{height:Ot,width:vt}=ut.view.viewSize,Gt={x:new Set,y:new Set,coordinates:new Map};[[0,0],[vt,0],[0,Ot],[vt,Ot]].forEach(bt=>{const[Mt,Ct]=bt;Gt.coordinates.set(`${Mt}, ${Ct}`,[Mt,Ct])}),J.forEach((bt,Mt,Ct)=>{Ct.forEach(Zt=>{if(bt===Zt)return;bt.getIntersections(Zt).forEach(Qt=>{Qt.point.x=Math.round(Qt.point.x),Qt.point.y=Math.round(Qt.point.y);const{x:ve,y:ce}=Qt.point;Gt.x.add(ve),Gt.y.add(ce);const Ie=`${ve},${ce}`;if(!Gt.coordinates.has(Ie)&&(Gt.coordinates.set(Ie,[ve,ce]),k)){const pe=new Me.Path.Circle(Qt.point,3);pe.fillColor=new Me.Color("#b4da55")}})})});const xt={x:[...Gt.x.values()].sort((bt,Mt)=>bt-Mt),y:[...Gt.y.values()].sort((bt,Mt)=>bt-Mt),coordinates:$n.orderBy([...Gt.coordinates.values()],["1","0"])},le=xt.coordinates.map(bt=>{const[Mt,Ct]=bt,Zt=xt.x.findIndex(ce=>ce===Mt),ee=xt.y.findIndex(ce=>ce===Ct);if(k){var Qt=new Me.PointText(new Me.Point(Mt+5,Ct+15));Qt.content=`[${Zt},${ee}]`,Qt.fillColor=new Me.Color("#00f")}return{index:[Zt,ee],position:[Mt,Ct]}}),Ht={horizontal:$n.groupBy(le,bt=>bt.index[1]),vertical:$n.groupBy(le,bt=>bt.index[0])};le.forEach(bt=>{var gt,Re;const{index:[Mt,Ct]}=bt,Zt=[Mt,Ct];if(xt.x.length===Mt+1||xt.y.length===Ct+1)return;const ee=Ht.horizontal[Ct],Qt=$n.findIndex(ee,xe=>$n.isEqual(xe.index,Zt))+1,ve=(gt=ee[Qt])==null?void 0:gt.index,ce=Ht.vertical[Mt],Ie=$n.findIndex(ce,xe=>$n.isEqual(xe.index,Zt))+1,pe=(Re=ce[Ie])==null?void 0:Re.index;if(!ve||!pe)return;const Lt=$n.zip(ve,pe).map(xe=>Math.max(...xe)),pn=$n.findIndex(le,xe=>$n.isEqual(xe.index,Lt));if(pn!==-1){const xe=bt.position,ne=le[pn].position,De=new Me.Path.Rectangle(new Me.Point(...xe),new Me.Point(...ne)),Ke=Et(Math.random());if(De.fillColor=Ke==="transparent"?null:new Me.Color(wt[Ke]),k){const ir=new Me.Path.Line(new Me.Point(...xe),new Me.Point(...ne));ir.strokeColor=De.fillColor,ir.selected=!0,De.opacity=.2}De.sendToBack()}})};((J,ut,k)=>{const Ot=T*10,vt=xf(K,k,Ot,J,ut),Gt=new Me.Path.Rectangle(new Me.Point(0,0),new Me.Point(mt.view.viewSize.width,mt.view.viewSize.height));Gt.strokeColor=null;const xt=[Gt];vt.forEach((le,Ht,bt)=>{[Js(le,bt,"topLeft",mt),Qs(le,bt,"topLeft",mt),$s(le,bt,"topLeft",mt),js(le,bt,"topLeft",mt),Js(le,bt,"bottomRight",mt),Qs(le,bt,"bottomRight",mt),$s(le,bt,"bottomRight",mt),js(le,bt,"bottomRight",mt)].forEach(Mt=>xt.push(Mt))}),console.log(xt),it(xt,mt)})(4,yf,lt)},e0=()=>{const dt=document.getElementsByClassName("unstyled")[0];dt.className=""},n0=()=>{const dt=Me;dt.setup("bg");const mt=mf(.02,dt,!1),T=wf([.2,.4],dt),wt=6*10,ct=xf(T,mt,wt,4),z="#ccc",Et=[];ct.forEach((lt,K,it)=>{[Qs(lt,it,"topLeft",dt,z),Js(lt,it,"topLeft",dt,z),$s(lt,it,"topLeft",dt,z),js(lt,it,"topLeft",dt,z),Qs(lt,it,"bottomRight",dt,z),Js(lt,it,"bottomRight",dt,z),$s(lt,it,"bottomRight",dt,z),js(lt,it,"bottomRight",dt,z)].forEach(J=>{J.dashArray=[J.length],J.dashOffset=J.length,Et.push(J)})}),dt.view.onFrame=()=>{Et.forEach(lt=>{lt.dashOffset>0&&(lt.dashOffset=Math.max(0,lt.dashOffset-5))})}};t0(ea);jg();e0();n0();
